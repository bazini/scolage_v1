<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:18              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 class Image_nation { private $_image_library; private $_source_directory; private $_parent_directory; private $_size_folders; private $_default_sizes; private $_keep_aspect_ratio; private $_default_master_dim; private $_default_style; private $_overwrite_images; private $_default_quality; private $_max_filename_increment = 100; private $_sizes = array(); private $_errors = array(); private $_images = array(); private $_processed_images = array(); public function __construct() { goto FhK1_; ads6R: $this->_default_master_dim = $this->config->item("\x64\x65\x66\x61\165\x6c\x74\137\155\141\163\164\x65\162\137\144\151\155", "\x69\155\x61\147\145\x5f\156\141\164\151\157\156"); goto bxyfq; FhK1_: $this->load->config("\x69\x6d\x61\x67\145\x5f\156\x61\x74\x69\157\156", TRUE); goto aKvGz; j18Zl: if (strlen($this->_parent_directory) == 0) { $this->_parent_directory = $this->_source_directory; } goto birki; bxyfq: $this->_default_style = $this->config->item("\144\145\x66\x61\165\154\164\137\x73\x74\x79\x6c\145", "\x69\x6d\x61\147\145\137\x6e\x61\164\x69\157\156"); goto gPIB0; gPIB0: $this->_overwrite_images = $this->config->item("\x6f\166\x65\162\167\162\x69\164\x65\x5f\151\155\x61\x67\x65\x73", "\151\155\x61\x67\x65\x5f\156\141\164\x69\x6f\x6e"); goto qih9z; birki: $this->_sizes = $this->_set_defaults(); goto oaL8F; qih9z: $this->_default_quality = $this->config->item("\x64\x65\x66\141\165\x6c\x74\x5f\161\165\x61\x6c\151\x74\x79", "\151\x6d\141\147\145\137\x6e\141\x74\151\157\156"); goto j18Zl; Cepni: $this->_size_folders = $this->config->item("\163\x69\x7a\145\x5f\146\x6f\x6c\x64\x65\162\x73", "\151\x6d\141\147\x65\137\x6e\141\x74\x69\157\156"); goto J43s8; aKvGz: $this->_image_library = $this->config->item("\151\155\141\x67\145\x5f\154\x69\x62\x72\141\162\x79", "\151\155\x61\x67\x65\x5f\x6e\x61\164\151\157\156"); goto zmdOF; bLqyJ: $this->_keep_aspect_ratio = $this->config->item("\x6b\x65\145\160\137\141\x73\x70\145\x63\164\137\x72\x61\164\x69\157", "\x69\x6d\141\147\x65\137\x6e\141\x74\151\x6f\156"); goto ads6R; lBt2c: $this->_parent_directory = str_replace("\134", "\57", FCPATH . $this->config->item("\160\x61\x72\x65\x6e\x74\x5f\x64\x69\x72\145\x63\164\157\x72\171", "\x69\x6d\141\147\x65\x5f\156\x61\x74\x69\x6f\x6e")); goto Cepni; J43s8: $this->_default_sizes = $this->config->item("\x64\x65\146\141\x75\x6c\164\137\x73\151\x7a\x65\x73", "\151\155\x61\x67\x65\137\156\141\x74\x69\157\156"); goto bLqyJ; zmdOF: $this->_source_directory = $this->config->item("\x73\157\165\x72\x63\145\137\144\x69\x72\x65\x63\x74\157\x72\171", "\151\155\141\147\145\137\x6e\x61\164\x69\157\156"); goto lBt2c; oaL8F: } private function _set_defaults() { if (strlen($this->_default_sizes) > 0) { goto TmNco; Gex5i: foreach ($sizes as $size) { goto WUjeu; Y8mWW: $width_height = explode("\x78", $size); goto paCUE; paCUE: $sizes_arr[$size] = array("\167\151\x64\x74\x68" => $width_height[0], "\150\x65\x69\147\150\164" => $width_height[1], "\x6d\141\x73\164\x65\162\137\x64\x69\x6d" => $this->_default_master_dim, "\153\x65\145\x70\137\x61\x73\160\145\x63\164\137\162\x61\x74\151\157" => $this->_keep_aspect_ratio, "\x73\164\x79\x6c\145" => $this->_default_style, "\161\165\x61\154\151\164\x79" => $this->_default_quality, "\x64\151\162\145\143\x74\x6f\x72\171" => $image_path, "\x66\151\x6c\x65\x5f\156\x61\155\145" => FALSE, "\157\166\145\162\x77\x72\x69\x74\x65" => $this->_overwrite_images); goto iig3J; WUjeu: $image_path = $this->_parent_directory . "\57"; goto Q426P; Q426P: if ($this->_size_folders == true) { $image_path .= $size . "\x2f"; } goto Y8mWW; iig3J: } goto nMkJQ; nMkJQ: return $sizes_arr; goto qN0QS; TmNco: $sizes = explode("\174", $this->_default_sizes); goto Gex5i; qN0QS: } } public function source($str, $full_path = FALSE) { goto NZbOI; NZbOI: if (is_array($str)) { foreach ($str as $key => $value) { $str[$key] = $this->source($str[$key], $full_path); } return $str; } goto ozaHm; BKDlu: if (file_exists($source_image)) { $source_size = getimagesize($source_image); $this->_images[] = array("\163\x6f\165\162\x63\x65\x5f\x69\x6d\x61\147\145" => $source_image, "\x69\x6d\141\147\145\x5f\156\141\155\x65" => $image_name, "\163\157\x75\162\143\145\x5f\x77\x69\144\x74\x68" => $source_size[0], "\x73\157\x75\162\x63\145\137\150\145\151\147\150\x74" => $source_size[1]); } else { $this->_errors[] = "\111\x6d\141\x67\145\x5f\156\141\x74\x69\x6f\156\72\40\103\x6f\x75\154\144\156\x27\x74\x20\146\151\156\x64\40\164\x68\145\x20\x69\155\x61\x67\x65\40" . $source_image; } goto Ab_kp; ozaHm: if ($full_path) { goto fZMXq; fZMXq: $source_image = str_replace("\x5c", "\x2f", $str); goto sPs2M; BBAWG: $image_name = $path[sizeof($path) - 1]; goto t2M_H; sPs2M: $path = explode("\57", $source_image); goto BBAWG; t2M_H: } else { $source_image = str_replace("\134", "\57", FCPATH . $this->_source_directory) . "\57" . $str; $image_name = $str; } goto BKDlu; Ab_kp: } private function _set_sizes($parameters = NULL) { foreach ($this->_images as $key => $value) { if (is_null($parameters)) { $this->_images[$key]["\163\x69\x7a\145\163"] = $this->_sizes; } else { $dimensions = explode("\x7c", $parameters); foreach ($dimensions as $dimension) { $this->_images[$key]["\x73\x69\x7a\x65\x73"][$dimension] = $this->_sizes[$dimension]; } } } } public function clear_sizes() { $this->_sizes = array(); return TRUE; } public function add_size($parameters) { goto V3NdM; V3NdM: if (is_array($parameters)) { $this->_sizes = array_merge($this->_sizes, $parameters); } goto MxZVG; MxZVG: foreach ($parameters as $key => $value) { goto kQbWb; kQbWb: $width_height = explode("\170", $key); goto g0EHg; mhcLD: $this->_sizes[$key]["\x68\145\151\147\x68\x74"] = $width_height[1]; goto a9ECq; g0EHg: $this->_sizes[$key]["\167\151\144\x74\150"] = $width_height[0]; goto mhcLD; a9ECq: } goto Cbi6g; Cbi6g: return TRUE; goto gNffH; gNffH: } public function process($parameters = NULL) { if (!is_null($parameters) && is_array($parameters)) { $this->clear_sizes(); $this->add_size($parameters); } elseif (!is_null($parameters) && !is_array($parameters)) { $this->_set_sizes($parameters); } else { $this->_set_sizes(); } return $this->_create_images(); } private function _iterate_file_exists($path, $overwrite = FALSE) { if (file_exists($path) && $overwrite === FALSE) { for ($i = 1; $i <= $this->_max_filename_increment; $i++) { $ext = pathinfo($path, PATHINFO_EXTENSION); $new_file = rtrim($path, "\56" . $ext); $new_file .= "\x2d" . $i . "\56" . $ext; if (!file_exists($new_file)) { break; } } return $new_file; } else { return $path; } } public function get_errors() { if (!empty($this->_errors)) { return $this->_errors; } else { return FALSE; } } public function get_processed() { return $this->_processed_images; } private function _create_images() { foreach ($this->_images as $key => $image) { goto A5gUR; A5gUR: $master_config["\x69\155\x61\147\145\x5f\154\x69\x62\x72\141\162\x79"] = $this->_image_library; goto kaqR9; kaqR9: $master_config["\143\x72\x65\x61\164\x65\137\x74\150\x75\x6d\142"] = FALSE; goto yGlhM; yGlhM: foreach ($image["\163\151\x7a\x65\x73"] as $image_size => $params) { goto EKW5l; hIZ8b: $source_ratio = $image["\x73\x6f\x75\x72\143\145\x5f\x77\151\x64\x74\x68"] / $image["\163\x6f\x75\162\x63\x65\x5f\150\145\x69\147\150\x74"]; goto gR06a; DLcM1: if ($params["\x6b\145\145\160\137\x61\x73\160\145\x63\x74\137\x72\141\164\151\157"] === FALSE && $source_ratio != $new_ratio) { if ($new_ratio > $source_ratio || $new_ratio == 1 && $source_ratio < 1) { goto WbHAp; get7a: $size_config["\x78\137\141\170\x69\163"] = 0; goto lYq7w; WbHAp: $size_config["\x77\151\x64\x74\x68"] = $image["\163\157\165\162\143\x65\137\x77\x69\x64\164\x68"]; goto hngzd; hngzd: $size_config["\150\x65\x69\147\150\164"] = round($image["\163\x6f\165\162\143\x65\x5f\x77\151\x64\x74\x68"] / $new_ratio); goto g7D4K; g7D4K: switch ($params["\163\x74\x79\x6c\145"]["\166\x65\162\x74\x69\x63\x61\154"]) { case "\x63\x65\x6e\x74\x65\162": $size_config["\171\x5f\141\170\151\x73"] = round(($image["\x73\x6f\x75\162\143\145\137\x68\x65\151\x67\150\164"] - $size_config["\150\145\x69\x67\x68\164"]) / 2); break; case "\164\x6f\160": $size_config["\171\137\141\170\151\x73"] = 0; break; case "\142\157\x74\x74\x6f\155": $size_config["\171\137\141\170\x69\x73"] = round($image["\163\157\165\162\x63\x65\137\150\x65\x69\x67\x68\x74"] - $size_config["\150\145\x69\147\x68\164"]); break; } goto get7a; lYq7w: } else { goto aI8YN; a3Zw0: $size_config["\x68\x65\151\x67\x68\164"] = $image["\163\x6f\165\162\143\x65\137\150\145\x69\147\x68\x74"]; goto nKB0K; a3g2S: $size_config["\x79\137\x61\170\151\163"] = 0; goto XmbT4; aI8YN: $size_config["\x77\151\x64\x74\150"] = round($image["\163\157\x75\x72\143\x65\x5f\150\x65\x69\147\150\164"] * $new_ratio); goto a3Zw0; nKB0K: switch ($params["\x73\164\x79\154\145"]["\150\157\x72\151\x7a\x6f\156\x74\x61\x6c"]) { case "\x63\145\x6e\x74\145\162": case "\155\x69\144\x64\154\x65": $size_config["\x78\x5f\x61\x78\x69\x73"] = round(($image["\x73\157\x75\x72\x63\x65\x5f\x77\151\144\164\150"] - $size_config["\167\151\x64\x74\150"]) / 2); break; case "\154\x65\x66\x74": $size_config["\x78\x5f\141\170\x69\163"] = 0; break; case "\x72\151\147\150\x74": $size_config["\x78\x5f\x61\170\x69\163"] = round($image["\163\x6f\x75\x72\x63\x65\x5f\167\x69\144\164\x68"] - $size_config["\x77\x69\144\x74\150"]); break; } goto a3g2S; XmbT4: } } goto MAKIH; kKzJh: if (!$this->image_lib->resize()) { $this->_errors[] = "\x4f\x6e\x65\x20\x6f\162\x20\155\157\162\x65\40\145\x72\162\x6f\162\163\40\167\x61\163\x20\x65\156\x63\157\165\156\164\145\162\145\144\40\x77\x68\x69\x6c\145\40\x72\145\x73\x69\x7a\x69\x6e\x67\40\151\155\141\x67\x65\40" . $config["\x73\x6f\x75\162\143\x65\x5f\151\155\141\147\x65"]; $errors[] = $this->image_lib->display_errors(); } goto L2wTh; gR06a: $new_ratio = $params["\x77\151\144\x74\x68"] / $params["\150\x65\x69\147\x68\164"]; goto DLcM1; HSzak: $ext = pathinfo($image["\163\157\165\x72\x63\x65\x5f\x69\155\x61\x67\145"], PATHINFO_EXTENSION); goto ILceB; AsXNV: if ($this->_size_folders === TRUE) { if (!file_exists($params["\144\151\x72\x65\x63\164\x6f\162\171"])) { if (!mkdir($params["\x64\x69\162\x65\x63\164\x6f\x72\x79"])) { show_error("\103\157\x75\154\144\156\x27\164\x20\143\162\x65\x61\x74\x65\x20\144\x69\162\x65\x63\164\x6f\162\171\x20" . $image_size); } } } goto HSzak; y6dUI: $config["\155\x61\x69\156\x74\x61\x69\156\x5f\x72\141\x74\x69\157"] = TRUE; goto s2EMi; wgehj: if ($params["\x6b\x65\x65\160\137\x61\163\x70\145\x63\x74\137\162\x61\x74\151\157"] === FALSE && $source_ratio != $new_ratio) { goto wUJ5a; onk1E: $this->image_lib->clear(); goto DA2P9; Aybbh: $this->image_lib->initialize($config); goto yJWaV; yJWaV: if (!$this->image_lib->crop()) { $this->_errors[] = "\x4f\156\x65\40\x6f\x72\x20\155\157\162\x65\40\x65\162\162\157\162\x73\40\x77\141\x73\x20\145\x6e\x63\157\x75\x6e\164\145\162\145\x64\x20\167\x68\x69\154\x65\40\x63\162\x6f\160\x70\x69\x6e\147\40\x69\155\141\147\145\40" . $config["\x73\x6f\165\162\143\x65\x5f\x69\155\141\147\145"]; $errors[] = $this->image_lib->display_errors(); } goto onk1E; wUJ5a: $config["\x6d\x61\x69\x6e\164\141\x69\x6e\x5f\162\x61\x74\151\x6f"] = FALSE; goto Aybbh; DA2P9: } goto y6dUI; b_jEA: $size_config["\x71\165\141\154\151\164\x79"] = "\x31\x30\60\45"; goto jjRHq; biwYn: $this->_processed_images[$key][$image_size] = array("\x66\x69\x6c\145\x5f\x6e\x61\155\x65" => $file_name, "\x70\141\x74\x68" => $config["\x6e\145\167\137\x69\x6d\141\147\x65"], "\145\162\162\x6f\162\163" => $errors); goto C__Ro; s2EMi: $config["\x6d\x61\x73\164\145\162\137\144\151\x6d"] = isset($params["\x6d\x61\163\x74\145\x72\x5f\x64\x69\x6d"]) ? $params["\x6d\x61\163\164\145\x72\x5f\144\x69\155"] : $this->_default_master_dim; goto K_saM; EMPNp: $this->load->library("\x69\155\x61\x67\x65\137\154\x69\x62"); goto wgehj; L2wTh: $this->image_lib->clear(); goto C0ChU; YNV4x: $config["\150\x65\x69\x67\x68\164"] = $params["\150\x65\x69\x67\150\x74"]; goto PEYwG; mBVkX: $file_name = $file_name_arr[sizeof($file_name_arr) - 1]; goto biwYn; EkCjv: if (!file_exists($params["\x64\151\162\145\x63\x74\x6f\162\171"])) { mkdir($params["\x64\x69\x72\x65\143\164\x6f\162\171"]); } goto AsXNV; C0ChU: if (!isset($errors)) { $errors = array(); } goto UTgHE; EKW5l: $size_config = array(); goto pHuYM; PEYwG: $config["\161\165\x61\154\151\x74\x79"] = isset($params["\161\x75\141\x6c\151\164\x79"]) ? $params["\161\165\141\x6c\151\x74\x79"] : $this->_default_quality; goto idknV; IgmP1: $size_config["\x6e\145\167\x5f\151\x6d\x61\x67\145"] = $params["\x64\x69\162\x65\x63\x74\157\162\x79"] . "\57" . $file_name; goto ZDIxH; MAKIH: $config = array_merge($master_config, $size_config); goto EMPNp; ZDIxH: $size_config["\x6e\x65\167\x5f\151\155\141\x67\145"] = $this->_iterate_file_exists($size_config["\x6e\145\x77\137\x69\x6d\x61\147\145"], $params["\157\166\145\162\167\x72\x69\x74\x65"]); goto hIZ8b; ILceB: if ($this->_size_folders === FALSE && $params["\x66\151\154\145\x5f\156\141\x6d\x65"] === FALSE) { $file_name = rtrim($image["\151\155\141\147\145\137\x6e\x61\x6d\x65"], "\x2e" . $ext); $file_name .= "\55" . $image_size . "\56" . $ext; } elseif (isset($params["\146\151\154\145\137\x6e\x61\155\145"]) && strlen($params["\146\151\x6c\145\x5f\156\141\x6d\x65"]) > 0) { $file_name = $params["\x66\x69\x6c\145\137\x6e\x61\x6d\x65"] . "\x2e" . $ext; } else { $file_name = $image["\x69\155\x61\147\x65\137\x6e\141\x6d\x65"]; } goto IgmP1; UTgHE: $file_name_arr = explode("\x2f", $file_name); goto mBVkX; jjRHq: if (!isset($params["\144\x69\x72\145\143\164\157\x72\171"])) { $params["\x64\151\162\x65\x63\164\157\162\x79"] = $this->_parent_directory . "\57"; if ($this->_size_folders == true) { $params["\144\x69\162\145\x63\x74\157\162\x79"] .= $image_size . "\57"; } } goto EkCjv; pHuYM: $size_config["\163\x6f\x75\x72\143\145\x5f\151\x6d\141\147\145"] = $image["\x73\x6f\165\x72\x63\145\x5f\151\155\141\x67\x65"]; goto b_jEA; K_saM: $config["\167\x69\144\164\150"] = $params["\x77\x69\144\164\x68"]; goto YNV4x; idknV: $this->image_lib->initialize($config); goto kKzJh; C__Ro: } goto izq6D; izq6D: } return $this->_processed_images; } public function __get($var) { return $CI =& get_instance()->{$var}; } }
