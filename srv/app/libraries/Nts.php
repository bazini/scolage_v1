<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:17              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\102\101\123\x45\120\x41\x54\x48") or exit("\116\x6f\40\x64\151\162\x65\143\164\x20\163\143\x72\151\x70\164\40\x61\143\x63\x65\163\x73\40\141\154\x6c\x6f\167\x65\x64"); class Nts { protected $CI; private $mydb; private $cls; private $std; private $table; private $utils; private $mdate; private $mats; private $id; public function __construct() { goto K8RLR; xvWO3: $this->utils =& $this->CI->utilitaire; goto MStfc; WFWKC: $this->cls =& $this->CI->cls; goto O2Ji8; O2Ji8: $this->std =& $this->CI->std; goto xvWO3; K8RLR: $this->CI =& get_instance(); goto cRAzr; MStfc: $this->mats =& $this->CI->mats; goto mw7En; gsyLa: $this->mdate = gmdate("\x59\x2d\x6d\x2d\x64\x20\110\x3a\151\72\163"); goto hyH1E; cRAzr: $this->mydb =& $this->CI->mydb; goto WFWKC; hyH1E: $this->id = $this->CI->session->userdata("\x69\x64"); goto w6n1Y; mw7En: $this->table = "\156\x6f\164\x65"; goto gsyLa; w6n1Y: } public function index($cls, $decoupage) { goto WilvO; fRmTm: $an = $this->utils->get_an(); goto R4NOF; gVkEc: return $d; goto UBCJY; R4NOF: if (!empty($an)) { goto qTuP8; FZkKm: $d["\x63\x75\x72\x72\x65\156\164"] = $page->current; goto vKY8N; MSheq: $limit = array($page->start, $page->epp); goto q0GNq; q0GNq: $notes = $this->mydb->gets($this->table, $req, $where, $join, $orderby, $limit); goto Ah0ll; qTuP8: $where = array("\x6e\x6f\x74\145\x2e\141\x6e" => $an->id, "\156\x6f\x74\145\x2e\143\x6c\x61\163\x73\x65" => $cls, "\156\157\164\x65\x2e\144\145\143\157\165\x70\x61\x67\145" => $decoupage); goto Y1Ycw; Ah0ll: if (!empty($notes)) { goto UtX0C; SROP_: $d["\x6e\157\x74\x65\x73"] = $data; goto TtxxZ; OFaEK: foreach ($notes as $n) { array_push($data, $n); } goto SROP_; UtX0C: $data = array(); goto OFaEK; TtxxZ: } goto E0IBo; DBlmP: $d["\x65\x70\160"] = $page->epp; goto cIqJA; Y1Ycw: $join = array("\x6d\x61\x74\x69\145\162\x65" => array("\x69\x6e\156\145\x72" => array("\x6d\141\164\x69\145\162\145", "\x69\x64")), "\x65\154\x65\166\145" => array("\151\156\156\x65\x72" => array("\145\154\x65\x76\x65", "\151\x64")), "\141\x70\160\x72\145\x63\151\x61\164\x69\157\x6e" => array("\151\x6e\156\x65\162" => array("\141\160\160\x72\145\143\x69\141\164\x69\x6f\156", "\151\x64"))); goto oEUo5; oEUo5: $req = array(array("\156\x6f\164\145\56\151\144" => "\x69\144"), array("\x6e\x6f\x74\145\x2e\x6e\143\x31" => "\x6e\x63\61"), array("\x6e\157\x74\145\x2e\156\143\62" => "\156\x63\x32"), array("\x6e\157\x74\x65\56\x6e\x63\x33" => "\x6e\143\63"), array("\x6e\157\164\145\56\156\143\x34" => "\x6e\143\64"), array("\x6e\x6f\x74\x65\x2e\x63\157\x6d\160\157" => "\x63\x6f\155\x70\157"), array("\156\x6f\x74\x65\56\x6d\157\171\x65\156\137\143\x6c\163" => "\155\157\171\x65\156\137\143\x6c\x73"), array("\156\157\164\145\x2e\155\157\171\x65\156\x6e\x65" => "\x6d\157\171\145\x6e\x6e\x65"), array("\x61\160\x70\162\x65\143\151\x61\164\151\157\156\56\x69\x64" => "\141\160\x70\162\x65\143\151\141\x74\x69\x6f\x6e\137\151\144"), array("\x61\160\x70\x72\145\x63\151\141\164\x69\x6f\156\56\155\x65\163\163\x61\x67\x65" => "\141\x70\x70\x72\145\143\151\141\x74\151\157\x6e"), array("\145\154\x65\166\145\56\156\x6f\155" => "\x6e\x6f\155"), array("\x65\x6c\x65\x76\145\56\160\x72\x65\156\x6f\x6d\163" => "\x70\x72\x65\156\x6f\155\x73"), array("\145\x6c\x65\166\145\56\x73\145\170\145" => "\x73\x65\170\x65"), array("\x6d\x61\x74\x69\145\x72\145\56\x69\x64" => "\155\141\164\x69\144"), array("\155\x61\164\x69\x65\x72\145\x2e\x6e\157\155\137\143\157\x75\x72\164" => "\x6e\x6f\x6d\x5f\x63\157\165\x72\x74"), array("\155\x61\164\x69\x65\162\145\56\156\157\155\x5f\154\157\x6e\147" => "\x6e\x6f\x6d\x5f\x6c\x6f\x6e\x67")); goto UHDZz; UHDZz: $count = $this->mydb->count($this->table, $where, $join); goto xxOMu; rBWwb: $d["\x6e\x62\x70\x61\147\x65\163"] = $page->nbpages; goto FZkKm; cIqJA: $orderby = array("\145\x6c\145\166\145\x2e\x6e\157\155" => "\x41\x53\103"); goto MSheq; vKY8N: $d["\x74\157\x74\141\154"] = $count; goto DBlmP; xxOMu: $page = pager($count); goto rBWwb; E0IBo: } goto gVkEc; WilvO: $d = array(); goto fRmTm; UBCJY: } public function list_note_moyenne_stat($an, $cls, $decoupage) { goto VucDg; a_ktg: $join = array("\155\x61\164\151\145\162\145" => array("\x69\156\156\x65\x72" => array("\155\x61\164\x69\145\162\x65", "\x69\x64"))); goto P3x6m; P3x6m: $req = array(array("\x6e\157\x74\145\56\151\144" => "\151\x64"), array("\x6e\157\164\x65\56\156\143\x31" => "\156\143\x31"), array("\x6e\x6f\164\x65\x2e\156\x63\62" => "\156\x63\62"), array("\x6e\157\x74\145\56\x6e\x63\63" => "\156\x63\x33"), array("\156\157\164\145\x2e\156\143\x34" => "\156\143\64"), array("\x6e\157\164\x65\x2e\143\x6f\x6d\x70\157" => "\x63\157\155\x70\157"), array("\156\x6f\164\x65\x2e\155\x6f\x79\x65\156\137\143\154\163" => "\155\x6f\171\145\156\137\143\154\x73"), array("\x6e\x6f\x74\145\x2e\155\x6f\171\145\156\x6e\145" => "\155\157\x79\x65\x6e\x6e\x65"), array("\155\x61\x74\x69\145\162\x65\x2e\151\x64" => "\x6d\141\x74\151\144"), array("\155\141\x74\x69\145\162\145\x2e\x6e\x6f\155\137\x63\157\165\x72\x74" => "\x6e\157\155\x5f\x63\157\165\162\164"), array("\155\x61\164\151\x65\x72\145\x2e\x6e\157\155\137\x6c\157\x6e\x67" => "\156\x6f\x6d\x5f\x6c\x6f\156\147")); goto YkRgD; yBXMb: if (!empty($notes)) { foreach ($notes as $note) { $name = strlen($note->nom_long) < 20 ? $note->nom_long : $note->nom_court; $d[$name][] = $note->moyenne; } } goto vU3B7; YkRgD: $orderby = array("\156\157\x74\x65\x2e\x6d\157\x79\x65\x6e\x6e\x65" => "\x41\x53\103"); goto OcBlu; OcBlu: $notes = $this->mydb->gets($this->table, $req, $where, $join, $orderby); goto yBXMb; VucDg: $d = array(); goto mOZwk; vU3B7: return $d; goto NexyG; mOZwk: $where = array("\156\x6f\x74\145\x2e\x61\156" => $an, "\x6e\x6f\164\x65\x2e\x63\x6c\x61\x73\x73\145" => $cls, "\x6e\x6f\x74\x65\56\144\145\143\x6f\165\160\x61\x67\x65" => $decoupage, "\156\157\x74\145\x2e\x6d\x6f\171\145\156\156\x65" => array("\x3e" => 0)); goto a_ktg; NexyG: } public function get($id) { goto hsuPz; yQh8d: return $d; goto i0wHf; BfA4V: if (!empty($note)) { $note->cls = $this->cls->get($note->classe); $d = $note; } goto yQh8d; b4kvZ: $note = $this->mydb->get($this->table, array(array("\156\157\x74\x65\x2e\151\144" => "\151\x64"), array("\x6e\x6f\x74\145\56\x61\x6e" => "\141\x6e"), array("\x6e\157\x74\145\56\x63\x6c\x61\x73\x73\145" => "\143\x6c\x61\x73\x73\145"), array("\x6e\x6f\164\145\x2e\145\154\x65\x76\x65" => "\x65\154\145\x76\x65"), array("\156\x6f\x74\145\x2e\155\141\x74\151\x65\162\145" => "\155\x61\x74\151\x65\162\x65"), array("\156\x6f\164\x65\56\x64\x65\143\x6f\165\160\141\147\145" => "\144\x65\143\157\165\x70\141\x67\145"), array("\x6e\x6f\164\x65\56\x6e\143\61" => "\x6e\x63\61"), array("\x6e\x6f\x74\x65\56\156\x63\62" => "\x6e\x63\x32"), array("\156\157\x74\145\x2e\156\143\x33" => "\x6e\143\63"), array("\156\x6f\x74\145\x2e\x6e\x63\x34" => "\x6e\x63\x34"), array("\x6e\157\164\x65\56\143\x6f\155\x70\157" => "\143\x6f\x6d\160\157"), array("\x65\x6c\x65\x76\145\56\156\x6f\155" => "\156\157\x6d"), array("\145\x6c\145\166\x65\56\160\162\145\x6e\157\x6d\163" => "\x70\x72\145\x6e\157\155\x73"), array("\x65\x6c\x65\x76\145\x2e\163\x65\x78\145" => "\163\x65\x78\145"), array("\x6d\x61\x74\151\145\x72\x65\56\x6e\157\155\x5f\x63\157\165\x72\164" => "\156\157\155\137\143\x6f\x75\x72\x74"), array("\x6d\141\164\x69\x65\x72\145\56\x6e\157\155\x5f\154\157\x6e\147" => "\156\157\155\x5f\154\x6f\x6e\147"), array("\x64\x65\143\157\x75\160\141\x67\x65\x2e\x6e\157\x6d" => "\x64\145\x63\156\157\x6d")), array("\156\x6f\x74\145\x2e\151\144" => $id), array("\x65\154\x65\166\145" => array("\151\156\156\145\162" => array("\x65\x6c\145\x76\x65", "\151\144")), "\155\x61\x74\151\x65\162\145" => array("\151\x6e\156\145\x72" => array("\x6d\x61\164\x69\145\162\145", "\x69\x64")), "\144\145\143\157\x75\x70\141\147\x65" => array("\x69\156\x6e\x65\x72" => array("\144\x65\143\157\x75\x70\141\x67\145", "\x69\144")))); goto BfA4V; hsuPz: $d = false; goto b4kvZ; i0wHf: } public function get_class_std($id, $subject, $decoupage, $nt) { goto hewiA; TP3tO: $an = $this->utils->get_an(); goto M91s6; c7CMu: return $d; goto Clyg6; hewiA: $d = array(); goto TP3tO; M91s6: if (!empty($an)) { $std = $this->std->list_class_std($id); if (!empty($std)) { goto lhAc6; sVNtG: $nt = $this->get_note_type($nt); goto lsvsz; lsvsz: foreach ($std as $s) { goto LuoUE; l2B7S: array_push($data, $s); goto jq6Lp; LuoUE: $note = $this->mydb->get($this->table, array(array($nt => "\156\164")), array("\x61\x6e" => $an->id, "\143\x6c\x61\163\163\145" => $id, "\x65\154\145\166\x65" => $s->id, "\x6d\141\x74\151\145\x72\x65" => $subject, "\144\x65\143\157\165\160\x61\147\145" => $decoupage)); goto muMsj; cK_rO: $s->note = $n; goto l2B7S; muMsj: if (!empty($note)) { $n = $note->nt; } else { $n = 0.0; } goto cK_rO; jq6Lp: } goto WBAgk; lhAc6: $data = array(); goto sVNtG; WBAgk: $d = $data; goto iimXJ; iimXJ: } } goto c7CMu; Clyg6: } public function get_std_notes($cls, $decoupage, $std) { goto Ukce8; Ukce8: $d = array(); goto SyXVN; grqew: return $d; goto va6Vq; SyXVN: $an = $this->utils->get_an(); goto hw6Lo; hw6Lo: if (!empty($an)) { $mats = $this->mats->get_class_mats_list($cls); if (!empty($mats)) { foreach ($mats as $m) { goto D4JTU; HyjoW: $m->nc2 = $nc2; goto XncPv; XncPv: $m->nc3 = $nc3; goto QC7Xd; TW47K: $m->moyen_cls = $moyen_cls; goto Jcukz; QC7Xd: $m->nc4 = $nc4; goto waNEp; KoiND: $m->nc1 = $nc1; goto HyjoW; waNEp: $m->compo = $compo; goto TW47K; Jcukz: $m->moyenne = $moyenne; goto D0YHn; D4JTU: $note = $this->mydb->get($this->table, '', array("\141\x6e" => $an->id, "\x63\x6c\141\x73\x73\145" => $cls, "\x64\145\x63\x6f\165\160\141\x67\x65" => $decoupage, "\x65\x6c\145\x76\145" => $std, "\155\141\164\x69\145\162\145" => $m->id)); goto M9uPf; D0YHn: $m->id = $id; goto Q4BI1; M9uPf: if (!empty($note)) { goto HAWXK; bmUFo: $compo = $note->compo; goto K86YL; GCRZ2: $nc3 = $note->nc3; goto dvVGG; K86YL: $moyen_cls = $note->moyen_cls; goto IHqDT; IHqDT: $moyenne = $note->moyenne; goto HMGa8; HAWXK: $nc1 = $note->nc1; goto kg6xX; HMGa8: $id = $note->id; goto mBoBx; kg6xX: $nc2 = $note->nc2; goto GCRZ2; dvVGG: $nc4 = $note->nc4; goto bmUFo; mBoBx: } else { goto GxKVs; vz81C: $nc2 = 0; goto oX175; GERzB: $nc4 = 0; goto PZmYA; dY7Wd: $moyenne = 0; goto Z8dSq; Z8dSq: $id = 0; goto UkGYa; iGSe3: $moyen_cls = 0; goto dY7Wd; oX175: $nc3 = 0; goto GERzB; GxKVs: $nc1 = 0; goto vz81C; PZmYA: $compo = 0; goto iGSe3; UkGYa: } goto KoiND; Q4BI1: array_push($d, $m); goto QgrAt; QgrAt: } } } goto grqew; va6Vq: } public function get_std_bulnotes($id, $cls, $an, $dec) { goto RmXzE; RA_2z: $mats = $this->mydb->gets("\143\154\x61\x73\x73\145\x5f\x68\141\x73\137\x6d\x61\x74", array(array("\104\x49\123\124\111\x4e\103\124\50\x6d\x61\x74\x69\145\x72\145\x2e\x69\144\51" => "\163\x75\x62\x6a\x65\143\164\x5f\x69\144"), array("\156\x6f\164\x65\x2e\151\144" => "\151\144"), array("\155\141\164\x69\x65\162\x65\56\x6e\x6f\155\137\143\x6f\x75\162\164" => "\x6e\x6f\155\x5f\x63\x6f\165\162\x74"), array("\155\x61\x74\151\x65\x72\145\x2e\156\x6f\x6d\x5f\x6c\x6f\x6e\x67" => "\156\x6f\155\137\154\x6f\x6e\x67"), array("\143\x6c\141\163\x73\145\137\150\141\163\137\155\x61\164\x2e\x63\x6f\x65\x66" => "\x63\157\145\146"), array("\x70\145\162\x73\157\156\156\x65\x6c\x2e\x63\x69\166\x69\x6c\151\x74\x65" => "\x63\151\x76\151\x6c\x69\164\145"), array("\x70\x65\162\163\157\156\156\x65\154\x2e\x6e\157\x6d" => "\x6e\x6f\155"), array("\160\x65\162\x73\x6f\156\156\x65\154\x2e\x70\162\x65\156\x6f\x6d\x73" => "\160\162\x65\x6e\x6f\155\x73"), array("\x6e\x6f\x74\145\x2e\x6e\x63\61" => "\x6e\143\x31"), array("\x6e\x6f\x74\145\x2e\156\x63\x32" => "\156\143\62"), array("\156\x6f\164\x65\56\156\x63\x33" => "\x6e\x63\x33"), array("\x6e\x6f\x74\145\56\156\x63\64" => "\156\x63\64"), array("\156\x6f\x74\x65\56\155\x6f\171\x65\156\137\x63\x6c\163" => "\x6d\157\171\145\156\x5f\x63\x6c\163"), array("\x6e\x6f\x74\145\x2e\143\157\155\160\157" => "\143\x6f\155\x70\157"), array("\156\x6f\164\x65\56\x6d\157\x79\145\156\x6e\x65" => "\155\x6f\x79\x65\x6e\156\x65"), array("\x6d\141\x74\x69\x65\162\x65\56\x6d\141\164\151\x65\x72\x65\137\156\x61\164\165\162\145" => "\156\141\164\x75\162\x65"), array("\x63\x6c\141\163\x73\x65\137\x68\x61\163\x5f\x6d\141\x74\x2e\x6d\141\x74\x69\145\162\x65\x5f\x74\x79\x70\145" => "\164\171\160\x65"), array("\x61\x70\x70\162\x65\x63\x69\x61\164\x69\x6f\156\x2e\x6d\x65\163\x73\141\147\x65" => "\x61\x70\160\162\x65\143\x69\x61\x74\151\157\156")), array("\x6e\x6f\x74\x65\x2e\x61\156" => $an, "\x6e\157\164\x65\56\143\x6c\x61\x73\x73\145" => $cls, "\x63\x6c\x61\x73\163\x65\x5f\150\141\x73\x5f\x6d\x61\x74\x2e\x63\x6c\x61\163\163\145" => $cls, "\x6e\x6f\x74\x65\x2e\144\145\143\x6f\165\160\141\x67\x65" => $dec, "\156\157\x74\145\x2e\x65\x6c\x65\x76\145" => $id, "\x6e\x6f\x74\x65\x2e\x73\164\x61\x74\165\x73" => 0, "\143\154\x61\163\163\145\x5f\x68\141\x73\x5f\x6d\141\164\56\163\x74\141\x74\165\x73" => 0), array("\x6d\x61\x74\x69\x65\x72\145" => array("\x69\156\x6e\x65\x72" => array("\155\141\164\151\x65\162\145", "\151\144")), "\160\145\162\163\157\x6e\156\145\x6c" => array("\151\x6e\156\x65\x72" => array("\x70\145\x72\x73\x6f\156\x6e\145\154", "\x69\144")), "\156\157\164\145" => array("\x69\x6e\x6e\x65\x72" => array("\x6d\141\164\151\145\x72\x65", "\x6d\x61\x74\151\x65\x72\145")), "\141\160\x70\x72\x65\x63\151\x61\164\151\157\x6e" => array("\x69\x6e\156\145\x72" => array("\x6e\x6f\x74\145\56\141\160\160\162\x65\143\x69\141\164\151\x6f\x6e", "\x69\x64"))), array("\x6d\141\164\x69\x65\162\x65\x2e\x69\x64" => "\x41\123\x43")); goto slB2b; W67Dy: return $d; goto Kk4Tw; RmXzE: $d = array(); goto RA_2z; slB2b: if (!empty($mats)) { $d = $mats; } goto W67Dy; Kk4Tw: } public function get_note_type($nt) { goto KdQyz; tdG6K: return $d; goto bMuJm; URkrE: if (intval($nt) != 0) { $d = "\156\x63" . $nt; } else { $d = "\143\x6f\155\x70\x6f"; } goto tdG6K; KdQyz: $d = false; goto URkrE; bMuJm: } public function get_note_params($cls) { goto vq1tT; fxins: if (!empty($edit)) { foreach ($edit as $e) { $key = $e->key; $d->{$key} = $e->value; } } else { goto HBigV; tCCKO: $d->roundNote = 1; goto H3gZL; HBigV: $d->nbNote = 2; goto RRrTc; RRrTc: $d->calcMoy = 1; goto tCCKO; H3gZL: } goto eytNw; eytNw: return $d; goto PVURf; bLy5A: $edit = $this->mydb->gets("\156\x6f\164\145\137\x70\x61\x72\141\x6d\163", '', array("\x63\154\x61\163\x73\145" => $cls)); goto fxins; vq1tT: $d = new stdClass(); goto bLy5A; PVURf: } public function get_appreciation($note) { goto YiGkF; NOwww: $ap = $this->mydb->gets("\141\x70\x70\x72\145\x63\151\x61\164\x69\157\x6e", array("\x69\144", "\151\x6e\146\x65\162\x69\145\165\x72", "\x73\x75\x70\x65\x72\151\145\165\162")); goto VaiZD; T33Yb: return $d; goto fdO9E; VaiZD: if (!empty($ap)) { foreach ($ap as $a) { if ($note >= $a->inferieur && $note <= $a->superieur) { $d = $a->id; } } } goto T33Yb; YiGkF: $d = 0; goto NOwww; fdO9E: } public function get_appreciation_message($note) { goto Ef0ot; n_MTE: return $d; goto uEon0; zedPt: if (!empty($ap)) { foreach ($ap as $a) { if ($note >= $a->inferieur && $note <= $a->superieur) { $d = $a->message; } } } goto n_MTE; Ef0ot: $d = 0; goto EMGin; EMGin: $ap = $this->mydb->gets("\141\160\x70\x72\145\x63\151\x61\164\151\x6f\x6e", array("\151\144", "\151\156\146\x65\x72\x69\145\x75\162", "\x73\x75\x70\145\x72\x69\x65\x75\162", "\155\x65\163\163\141\x67\145")); goto zedPt; uEon0: } public function import($an, $cls, $decoupage, $subject, $notes) { goto O7kBw; fIWvE: if (!empty($notes)) { goto CAo_E; t4n58: $nts = array(); goto DzFEl; VF1nz: $nts["\143\x6f\155\160\x6f"] = 8; goto YG5Ek; DzFEl: if ($params->nbNote == 1) { $nts["\156\x63\x31"] = 4; } else { if ($params->nbNote == 2) { $nts["\x6e\143\x31"] = 4; $nts["\x6e\143\x32"] = 5; } else { if ($params->nbNote == 3) { goto Us50m; wQhzk: $nts["\x6e\x63\x33"] = 6; goto XUnsw; PTPyH: $nts["\156\x63\62"] = 5; goto wQhzk; Us50m: $nts["\156\x63\61"] = 4; goto PTPyH; XUnsw: } else { if ($params->nbNote == 4) { goto nGmAF; fCHQK: $nts["\156\x63\x33"] = 6; goto cC_lv; cC_lv: $nts["\x6e\x63\x34"] = 7; goto PCAw1; n2B0Z: $nts["\156\x63\x32"] = 5; goto fCHQK; nGmAF: $nts["\156\143\61"] = 4; goto n2B0Z; PCAw1: } else { $nts["\156\x63\61"] = 4; $nts["\156\143\62"] = 5; } } } } goto VF1nz; CAo_E: $params = $this->get_note_params($cls); goto t4n58; YG5Ek: foreach ($notes as $note) { if (!empty($note)) { foreach ($nts as $key => $nt) { goto I12iy; RYyko: $std = $note[0]; goto Hc0I8; Hc0I8: if (!empty($std)) { $n = $n <= 20 ? $n : 0; $this->import_notes($an, $cls, $decoupage, $key, $subject, $std, $n, $params); } goto DPs_r; I12iy: $n = floatval($note[$nt]); goto RYyko; DPs_r: } } } goto Uheuw; Uheuw: $d["\x65\162\162\x6f\x72"] = false; goto xgadZ; xgadZ: } else { $d["\145\162\155\163\147"] = "\x4c\145\40\x66\151\x63\x68\x69\145\162\x20\145\163\x74\40\166\151\x64\x65"; } goto l4HK1; l4HK1: return $d; goto iA0rB; O7kBw: $d["\145\162\162\157\x72"] = true; goto fIWvE; iA0rB: } public function import_notes($an, $cls, $decoupage, $nt, $subject, $std, $note, $params) { goto MY9nP; iLGni: $ncs["\144\x65\143\157\165\x70\141\x67\x65"] = $decoupage; goto HAwzn; RQgHn: $ncs["\141\x70\x70\x72\x65\x63\x69\141\164\x69\157\156"] = $this->get_appreciation($moy); goto kuWiB; kYx1U: $note_id = isset($ncs["\x69\144"]) && !empty($ncs["\x69\x64"]) ? $ncs["\x69\144"] : false; goto n8Yt2; lhJAx: $ncs[$nt] = floatval($note); goto kYx1U; tJHsN: if ($note_id == false) { $ncs["\143\162\145\x61\x74\x65\x64"] = $this->mdate; $this->mydb->set($this->table, $ncs); } else { $this->mydb->update($this->table, $ncs, array("\151\x64" => $note_id)); } goto Z8mFZ; MpNxY: $moy = $mys[1]; goto ug5UB; InONv: if (!empty($check)) { $ncs = $check; } else { $ncs = array("\x6e\143\x31" => 0.0, "\x6e\143\x32" => 0.0, "\156\x63\63" => 0.0, "\156\143\x34" => 0.0, "\143\157\x6d\160\157" => 0.0); } goto lhJAx; PEpZm: $ncs["\x6d\157\171\x65\156\156\145"] = $moys; goto f6x8_; YqAvw: $ncs["\155\x6f\x79\x65\x6e\x5f\143\154\163"] = $this->arrondir_note($cls_moy); goto PEpZm; MY9nP: $check = $this->check_note($an, $cls, $decoupage, $subject, $std); goto InONv; G4Wml: $ncs["\141\x6e"] = $an; goto iLGni; n8Yt2: $mys = $this->compute_note($ncs, $params); goto B7Oou; HAwzn: $ncs["\145\154\x65\166\x65"] = $std; goto NVUxz; f6x8_: $ncs["\143\154\x61\x73\163\145"] = $cls; goto G4Wml; B7Oou: $cls_moy = $mys[0]; goto MpNxY; kuWiB: $ncs["\155\x6f\x64\151\146\x69\145\144"] = $this->mdate; goto rXU15; ug5UB: $moys = round(floatval($moy), 2); goto YqAvw; NVUxz: $ncs["\x6d\x61\164\x69\x65\162\145"] = $subject; goto RQgHn; rXU15: unset($ncs["\151\x64"]); goto tJHsN; Z8mFZ: } public function set($cls, $decoupage, $note_type, $subject, $notes) { goto gufR7; h2tKn: return $d; goto Yso5V; gufR7: $d["\x65\x72\x72\x6f\x72"] = true; goto rHJp0; rHJp0: $an = $this->utils->get_an(); goto c9VC1; c9VC1: if (!empty($an)) { goto cnFsx; qscM0: $note = intval($note_type); goto mCHS_; cnFsx: $anid = $an->id; goto qscM0; mCHS_: if (!empty($notes)) { goto D93YV; oz3kz: foreach ($notes as $key => $n) { goto BZ1ZV; BZ1ZV: if ($note == 0) { $nt = "\143\x6f\155\x70\157"; } else { $nt = "\156\143" . $note_type; } goto LZTjY; dJTmm: $this->set_note($anid, $cls, $decoupage, $key, $subject, $ncs, $params, $note_id); goto ZKJ4E; LZTjY: $check = $this->check_note($anid, $cls, $decoupage, $subject, $key); goto Mo7ZF; pFzuN: $note_id = isset($ncs["\151\144"]) && !empty($ncs["\151\144"]) ? $ncs["\151\x64"] : false; goto dJTmm; Mo7ZF: if (!empty($check)) { $ncs = $check; } else { $ncs = array("\x6e\143\x31" => 0.0, "\156\x63\x32" => 0.0, "\156\x63\x33" => 0.0, "\156\x63\64" => 0.0, "\143\157\x6d\160\x6f" => 0.0); } goto S40Nt; S40Nt: $ncs[$nt] = floatval($n); goto pFzuN; ZKJ4E: } goto nZf1s; nZf1s: $d["\145\x72\x72\x6f\162"] = false; goto Sfgm6; D93YV: $params = $this->get_note_params($cls); goto oz3kz; Sfgm6: } else { $d["\145\162\155\x73\147"] = "\114\145\163\x20\156\157\x74\x65\x73\x20\x73\157\156\164\x20\x76\151\144\x65\163"; } goto D4v0S; D4v0S: } else { $d["\x65\x72\x6d\x73\147"] = "\x4c\x27\x61\156\x6e\303\251\x65\x20\163\143\157\154\141\x69\162\x65\40\156\x27\145\x73\164\40\x70\x61\x73\40\144\303\251\x66\x69\156\151\145"; } goto h2tKn; Yso5V: } public function set_single_note($cls, $decoupage, $subject, $std, $notes, $id) { $an = $this->utils->get_an(); if (!empty($an)) { $params = $this->get_note_params($cls); $this->set_note($an->id, $cls, $decoupage, $std, $subject, $notes, $params, $id); } } public function set_note_params($cls, $key, $val = '') { goto oVTkM; Qjnth: if (!empty($vrf)) { $d = $this->mydb->update("\156\157\164\x65\137\160\141\x72\x61\155\163", array("\x76\141\x6c\165\145" => $val), array("\165\163\x65\x72" => $this->id, "\x63\154\x61\x73\163\x65" => $cls, "\x6b\145\x79" => $key)); } else { $d = $this->mydb->set("\156\157\164\145\137\160\x61\x72\141\155\163", array("\x75\163\x65\x72" => $this->id, "\x63\x6c\x61\163\x73\x65" => $cls, "\x6b\x65\x79" => $key, "\x76\x61\x6c\165\145" => $val)); } goto hSL79; oVTkM: $vrf = $this->mydb->get("\x6e\x6f\x74\x65\x5f\x70\x61\x72\x61\155\163", '', array("\143\x6c\141\x73\163\145" => $cls, "\153\145\x79" => $key)); goto Qjnth; hSL79: return $d; goto kmR4t; kmR4t: } public function set_moyenne($id, $cls, $an, $dec, $moy) { goto dy3AZ; XthI7: if (!empty($moy)) { goto Cw2Ug; MnQ1q: if ($check == false) { $d = $this->mydb->set("\x62\165\x6c\154\x65\164\x69\x6e", $req); } else { $d = $this->mydb->update("\142\165\x6c\154\x65\164\151\156", $req, array("\151\x64" => $check)); } goto vCKNy; FS27n: $req = array("\141\156" => $an, "\x63\154\141\x73\163\x65" => $cls, "\x64\145\143\x6f\165\x70\x61\x67\x65" => $dec, "\145\154\x65\x76\145" => $id, "\155\x6f\171\x65\x6e\156\x65" => $moy, "\x61\160\160\x72\145\143\151\141\x74\151\x6f\156" => $this->get_appreciation($moy), "\x73\x79\156\143\x68\x72\x6f\156\151\x7a\x65\144" => 0, "\155\x6f\x64\x69\146\151\x65\144" => $this->mdate); goto MnQ1q; Cw2Ug: $check = $this->check_std_moy($id, $cls, $an, $dec); goto FS27n; vCKNy: } goto ckliC; dy3AZ: $d = false; goto XthI7; ckliC: return $d; goto vdnLo; vdnLo: } public function set_bloc_moyenne($id, $cls, $an, $dec, $moy, $bloc) { goto bNz1A; bNz1A: $d = false; goto C_ky5; C_ky5: if (!empty($moy)) { goto Q0uFZ; Q0uFZ: $check = $this->check_std_moy_bloc($id, $cls, $an, $dec, $bloc); goto h2QKt; pio8H: if ($check == false) { $d = $this->mydb->set("\x62\165\154\x6c\x65\164\x69\x6e\137\x62\x6c\x6f\x63", $req); } else { $d = $this->mydb->update("\x62\165\154\x6c\x65\x74\x69\156\x5f\x62\154\x6f\143", $req, array("\151\x64" => $check)); } goto Cmqhr; h2QKt: $req = array("\141\x6e" => $an, "\x63\x6c\x61\163\163\x65" => $cls, "\144\x65\x63\157\x75\160\x61\147\x65" => $dec, "\x65\154\x65\166\145" => $id, "\142\x6c\x6f\x63" => $bloc, "\x6d\x6f\x79\x65\x6e\x6e\x65" => $moy, "\141\x70\x70\162\x65\x63\151\x61\164\x69\x6f\156" => $this->get_appreciation($moy), "\x73\171\x6e\143\150\x72\157\156\151\x7a\145\x64" => 0, "\155\157\144\x69\146\151\145\144" => $this->mdate); goto pio8H; Cmqhr: } goto RlZ18; RlZ18: return $d; goto nEUIe; nEUIe: } private function check_note($an, $cls, $decoupage, $subject, $std) { goto rvJKZ; ue0h2: $check = $this->mydb->get($this->table, array("\151\x64", "\x6e\x63\61", "\156\x63\x32", "\156\143\x33", "\x6e\x63\x34", "\143\x6f\x6d\x70\157"), array("\x61\x6e" => $an, "\x63\154\141\163\163\145" => $cls, "\145\x6c\x65\166\145" => $std, "\x6d\141\x74\151\x65\162\x65" => $subject, "\x64\145\143\x6f\165\160\x61\147\145" => $decoupage, "\x73\164\141\164\165\163" => 0)); goto d3Y5S; n1nj3: return $d; goto QrwRr; rvJKZ: $d = false; goto ue0h2; d3Y5S: if (!empty($check)) { $d = array("\x69\x64" => $check->id, "\x6e\143\61" => $check->nc1, "\x6e\x63\62" => $check->nc2, "\x6e\x63\x33" => $check->nc3, "\x6e\143\64" => $check->nc4, "\143\x6f\x6d\160\157" => $check->compo); } goto n1nj3; QrwRr: } private function compute_note($notes, $params) { goto a_N1Q; tYscn: if (!empty($calcMoy)) { $mtd = $calcMoy; } else { $mtd = 1; } goto oaEIZ; QGiDl: if ($rd == 1) { $d = $this->arrondir_note($moy); } elseif ($rd == 2) { $d = ceil($moy); } else { $d = $moy; } goto K7v3k; Pbj8n: $moy = floatval(floatval($cls_note + $notes["\x63\x6f\x6d\x70\x6f"]) / 2.0); goto QGiDl; TBOzh: $calcMoy = isset($params->calcMoy) ? $params->calcMoy : false; goto a5jO2; oubCT: $cls_note = $this->compute_class_note($notes, $nbn, $mtd); goto Pbj8n; K7v3k: return array($cls_note, floatval($d)); goto W7yFt; a5jO2: $roundNote = isset($params->roundNote) ? $params->roundNote : false; goto wTKU6; oaEIZ: if (!empty($roundNote)) { $rd = $roundNote; } else { $rd = 1; } goto oubCT; a_N1Q: $nbNote = isset($params->nbNote) ? $params->nbNote : false; goto TBOzh; wTKU6: if (!empty($nbNote)) { $nbn = $nbNote; } else { $nbn = 2; } goto tYscn; W7yFt: } private function compute_class_note($notes, $nb, $method) { goto hjCxJ; mAZcx: return round(floatval($d), 2); goto zKA3y; V0dnl: if ($nb == 1) { array_push($data, floatval($notes["\156\x63\x31"])); } else { if ($nb == 2) { array_push($data, floatval($notes["\156\143\61"])); array_push($data, floatval($notes["\x6e\x63\62"])); } else { if ($nb == 3) { goto YqID0; YqID0: array_push($data, floatval($notes["\156\143\x31"])); goto p0GQg; QiW_A: array_push($data, floatval($notes["\x6e\x63\x33"])); goto F5Xrc; p0GQg: array_push($data, floatval($notes["\x6e\x63\62"])); goto QiW_A; F5Xrc: } else { if ($nb == 4) { goto GsYG8; dPEt9: array_push($data, floatval($notes["\x6e\143\62"])); goto LAsdW; LAsdW: array_push($data, floatval($notes["\x6e\x63\x33"])); goto yEHly; GsYG8: array_push($data, floatval($notes["\x6e\x63\61"])); goto dPEt9; yEHly: array_push($data, floatval($notes["\156\x63\64"])); goto bOxUr; bOxUr: } else { array_push($data, floatval($notes["\x6e\x63\x31"])); array_push($data, floatval($notes["\x6e\x63\62"])); } } } } goto qBCF7; qBCF7: if ($method == 1) { $d = array_sum($data) / count($data); } else { $d = max($data); } goto mAZcx; hjCxJ: $data = array(); goto V0dnl; zKA3y: } private function arrondir_note($note) { goto cBRtM; nerTA: return $d; goto SJut3; ryt_c: if ($n2 == 0.0 || $n2 == 0.5 || $n2 == 0.25 || $n2 == 0.75) { $d = $note; } else { if ($n2 < 0.25) { $n = 0.25; } else { if ($n2 > 0.25 && $n2 < 0.5) { $n = 0.5; } else { if ($n2 > 0.5 && $n2 < 0.75) { $n = 0.75; } else { $n = 1.0; } } } $d = $n1 + $n; } goto nerTA; oJ3bq: $nt = explode("\x2e", $ntes); goto vXN2C; vXN2C: $n1 = floatval($nt[0]); goto ETwsH; cBRtM: $ntes = round($note, 2); goto oJ3bq; ETwsH: $n2 = isset($nt[1]) ? floatval("\60\x2e" . $nt[1]) : 0.0; goto ryt_c; SJut3: } private function set_note($an, $cls, $decoupage, $std, $subject, $ncs, $params, $note_id) { goto YDTe9; wOle_: $ncs["\x6d\157\x79\x65\156\156\145"] = $moys; goto bhUCF; tdwDC: $ncs["\x64\x65\x63\x6f\165\160\x61\147\145"] = $decoupage; goto v2fcw; CFRr2: $ncs["\155\157\171\x65\x6e\x5f\143\x6c\x73"] = $this->arrondir_note($cls_moy); goto wOle_; MsYNo: $ncs["\x61\156"] = $an; goto tdwDC; v2fcw: $ncs["\145\x6c\x65\x76\145"] = $std; goto nO4hs; N9ebJ: if ($note_id == false) { goto tCkyv; p9RcG: $this->mydb->set($this->table, $ncs); goto DtTF2; IDU0z: $ncs["\165\x73\145\162"] = $this->id; goto p9RcG; tCkyv: $ncs["\143\162\x65\141\164\145\x64"] = $this->mdate; goto IDU0z; DtTF2: } else { $this->mydb->update($this->table, $ncs, array("\151\x64" => $note_id)); } goto Ch2NR; vuJ80: $cls_moy = $mys[0]; goto BxQTo; kPvt9: $ncs["\155\157\144\x69\146\151\x65\144"] = $this->mdate; goto N9ebJ; EwfxA: $moys = round(floatval($moy), 2); goto CFRr2; cLLuZ: $ncs["\x61\x70\160\162\145\x63\151\x61\x74\151\x6f\156"] = $this->get_appreciation($moy); goto kPvt9; YDTe9: $mys = $this->compute_note($ncs, $params); goto vuJ80; nO4hs: $ncs["\x6d\141\x74\x69\145\x72\x65"] = $subject; goto cLLuZ; bhUCF: $ncs["\x63\x6c\141\163\163\x65"] = $cls; goto MsYNo; BxQTo: $moy = $mys[1]; goto EwfxA; Ch2NR: } private function check_std_moy($id, $cls, $an, $dec) { goto Og5Ig; kKz37: return $d; goto pZ7h5; Og5Ig: $d = false; goto QZViy; QZViy: $check = $this->mydb->get("\x62\165\154\x6c\x65\164\x69\156", array("\151\x64"), array("\x61\x6e" => $an, "\143\x6c\x61\163\163\x65" => $cls, "\x65\x6c\145\166\145" => $id, "\x64\145\143\157\x75\x70\x61\x67\145" => $dec)); goto EooLx; EooLx: if (!empty($check)) { $d = $check->id; } goto kKz37; pZ7h5: } private function check_std_moy_bloc($id, $cls, $an, $dec, $bloc) { goto briBi; IWyNa: if (!empty($check)) { $d = $check->id; } goto quYsD; quYsD: return $d; goto M6J4Z; nqdI0: $check = $this->mydb->get("\x62\165\154\x6c\145\164\151\x6e\137\142\x6c\x6f\x63", array("\151\144"), array("\141\156" => $an, "\x63\x6c\x61\x73\x73\145" => $cls, "\x65\154\145\166\145" => $id, "\x64\x65\x63\157\165\160\x61\x67\x65" => $dec, "\142\154\157\x63" => $bloc)); goto IWyNa; briBi: $d = false; goto nqdI0; M6J4Z: } }
