<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:18              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\102\x41\123\x45\x50\x41\124\x48") or exit("\116\x6f\x20\x64\x69\x72\x65\x63\x74\x20\163\143\162\151\160\164\40\141\143\143\x65\163\x73\40\141\x6c\154\x6f\167\x65\144"); class Fee { protected $CI; private $mydb; private $table; private $cls; private $utils; private $fc; private $fp; private $std; private $id; private $mdate; public function __construct() { goto zucVl; ryAF3: $this->std =& $this->CI->std; goto lYv4l; dx_0A: $this->fp = "\146\x65\145\x5f\160\141\x79\155\x65\x6e\164"; goto Gcxem; r4Phm: $this->cls =& $this->CI->cls; goto Q4m9O; HzbIi: $this->fc = "\146\145\145\137\x63\x6c\141\x73\x73\x65"; goto dx_0A; eELjP: $this->id = $this->CI->session->userdata("\x69\x64"); goto tlBvX; Gcxem: $this->mdate = gmdate("\x59\x2d\x6d\55\x64\40\x48\x3a\151\x3a\x73"); goto eELjP; u9zyi: $this->mydb =& $this->CI->mydb; goto r4Phm; lYv4l: $this->table = "\x66\x65\145"; goto HzbIi; Q4m9O: $this->utils =& $this->CI->utilitaire; goto ryAF3; zucVl: $this->CI =& get_instance(); goto u9zyi; tlBvX: } public function index() { goto nPc9s; aBwp8: $an = $this->utils->get_an(); goto o4ixY; nPc9s: $d = 0; goto aBwp8; Y3ca3: return $d; goto eqUjp; o4ixY: if (!empty($an)) { $mont = $this->mydb->get($this->fp, array(array("\x53\125\115\x28\155\x6f\156\164\141\x6e\164\51" => "\155\157\156\164\141\x6e\x74")), array("\x61\x6e" => $an->id)); if (!empty($mont)) { $d = $mont->montant; } } goto Y3ca3; eqUjp: } public function gets() { goto IDnn_; WHlgh: $an = $this->utils->get_an(); goto t0mGi; t0mGi: if (!empty($an)) { $cls = $this->cls->liste(); if (!empty($cls)) { foreach ($cls as $c) { goto vgmA2; lknPB: array_push($d, $c); goto opP_d; YFu4t: $c->color = $this->get_color($pay["\x70\x65\x72\x63\145\156\164"]); goto lknPB; T90xk: $c->pay = $pay["\160\145\162\x63\145\x6e\x74"]; goto dAQ_z; vgmA2: $pay = $this->get_class_payment_state($an->id, $c->id); goto JhKLO; Y_OK6: $c->du = $pay["\x64\165"]; goto YFu4t; dAQ_z: $c->amount = $pay["\141\x6d\157\x75\x6e\x74"]; goto Y_OK6; JhKLO: $c->effectif = $pay["\x65\x66\x66\x65\143\164\151\x66"]; goto T90xk; opP_d: } } } goto Rkwmd; IDnn_: $d = array(); goto WHlgh; Rkwmd: return $d; goto ncWYV; ncWYV: } public function get($id) { goto HdV1N; SlHoS: $fee = $this->mydb->get($this->table, '', array("\151\x64" => $id)); goto tA_52; HdV1N: $d = false; goto SlHoS; tA_52: if (!empty($fee)) { $d = $fee; } goto u8aU9; u8aU9: return $d; goto WeJYJ; WeJYJ: } public function liste() { goto Ar_WZ; Uw9sH: if (!empty($fees)) { foreach ($fees as $f) { $f->nbclass = $this->mydb->count($this->fc, array("\x66\x65\145" => $f->id)); array_push($d, $f); } } goto n5IyD; W6V0G: $fees = $this->mydb->gets($this->table); goto Uw9sH; Ar_WZ: $d = array(); goto W6V0G; n5IyD: return $d; goto q07Il; q07Il: } public function get_fee_classes($id) { goto JziCK; QPjLC: $fees = $this->mydb->gets("\146\x65\145\137\143\154\x61\163\163\x65", array("\143\154\x61\163\x73\x65"), array("\x66\x65\145" => $id, "\x73\x74\x61\164\x75\x73" => 0)); goto poCXL; DAP2E: return $d; goto hL7Wf; JziCK: $d = array(); goto QPjLC; poCXL: if (!empty($fees)) { foreach ($fees as $f) { $cls = $this->cls->get($f->classe); array_push($d, $cls); } } goto DAP2E; hL7Wf: } public function get_new_classes() { goto H6VEB; PKNse: $cls = $this->cls->liste(); goto jz90F; H6VEB: $d = array(); goto PKNse; jz90F: if (!empty($cls)) { foreach ($cls as $c) { $vrf = $this->mydb->count("\x66\x65\145\137\x63\154\141\x73\163\145", array("\143\154\141\x73\163\145" => $c->id, "\163\x74\x61\164\x75\163" => 0)); if (empty($vrf)) { array_push($d, $c); } } } goto sVFTt; sVFTt: return $d; goto Q7OFN; Q7OFN: } public function get_class_fee($id) { goto ytZ3B; WhnSk: if (!empty($fee)) { $d = $fee; } goto n0bzw; n0bzw: return $d; goto RuJxc; XZXHt: $fee = $this->mydb->get($this->fc, array(array("\x66\145\x65\56\151\x64" => "\151\x64"), array("\146\x65\145\56\x6d\x6f\156\164\x61\x6e\x74\x5f\x67\141\x72\x63\157\x6e" => "\155\157\156\164\141\x6e\164\137\x67\x61\x72\143\x6f\156"), array("\x66\145\x65\x2e\x6d\157\156\164\x61\x6e\164\137\146\x69\154\x6c\145" => "\x6d\x6f\156\x74\x61\x6e\x74\137\146\x69\154\154\x65")), array("\146\x65\x65\137\143\154\141\163\x73\x65\x2e\143\x6c\x61\x73\x73\145" => $id, "\x66\145\145\137\143\x6c\141\163\163\x65\x2e\163\164\141\x74\165\163" => 0), array("\x66\145\x65" => array("\x69\x6e\156\x65\x72" => array("\x66\145\145", "\x69\x64")))); goto WhnSk; ytZ3B: $d = false; goto XZXHt; RuJxc: } public function get_class_payments($id) { goto lmwHs; XUN6o: $an = $this->utils->get_an(); goto qW4MO; qW4MO: if (!empty($an)) { goto ggs1w; ggs1w: $std = $this->std->get_class_std($id); goto mz3nH; pd3D5: if (isset($std["\x73\x74\144"]) && !empty($std["\x73\164\x64"])) { goto S2PQA; X0uRk: $d["\143\165\x72\x72\x65\156\164"] = $std["\x63\x75\x72\162\145\x6e\x74"]; goto Zyn7S; V87KQ: $d["\163\164\144"] = $state; goto yc6vr; Zyn7S: $d["\x74\x6f\x74\141\x6c"] = $std["\164\157\x74\141\x6c"]; goto bDX2l; S2PQA: $d["\x6e\x62\160\x61\147\145\163"] = $std["\156\142\160\141\147\145\163"]; goto X0uRk; XaEf6: foreach ($std["\x73\x74\x64"] as $s) { goto s0fJI; OGpAA: $s->du = $pay["\x64\x75"]; goto lbt2D; qf4Ud: $s->pay = $pay["\x70\145\162\143\x65\x6e\x74"]; goto zA6sz; zA6sz: $s->amount = $pay["\x61\x6d\157\165\x6e\164"]; goto OGpAA; raGgn: array_push($state, $s); goto Bf4kT; lbt2D: $s->color = $this->get_color($pay["\x70\145\x72\143\145\x6e\x74"]); goto raGgn; s0fJI: $pay = $this->get_class_std_payment_state($an->id, $id, $fee, $s); goto qf4Ud; Bf4kT: } goto V87KQ; BbTIF: $state = array(); goto XaEf6; bDX2l: $d["\145\x70\x70"] = $std["\x65\x70\160"]; goto BbTIF; yc6vr: } goto Yyvha; mz3nH: $fee = $this->get_class_fee($id); goto pd3D5; Yyvha: } goto Wx0Tr; Wx0Tr: return $d; goto aMWJB; lmwHs: $d = array(); goto XUN6o; aMWJB: } public function list_class_payments($id) { goto lnHPn; d0dpA: $an = $this->utils->get_an(); goto SLkwk; SLkwk: if (!empty($an)) { goto y_QOr; y_QOr: $std = $this->std->list_class_std($id); goto xeKt2; xeKt2: $fee = $this->get_class_fee($id); goto qrBXu; qrBXu: if (isset($std) && !empty($std)) { $state = array(); foreach ($std as $s) { goto rl9_B; INgPW: $s->pay = $pay["\160\x65\162\143\x65\x6e\x74"]; goto bLbMo; iDP5P: array_push($d, $s); goto NYU4I; T5q3i: $s->du = $pay["\144\165"]; goto bZBD7; bLbMo: $s->amount = $pay["\x61\155\x6f\165\x6e\x74"]; goto T5q3i; rl9_B: $pay = $this->get_class_std_payment_state($an->id, $id, $fee, $s); goto INgPW; bZBD7: $s->color = $this->get_color($pay["\160\x65\162\143\x65\x6e\164"]); goto iDP5P; NYU4I: } } goto OP34q; OP34q: } goto cK7BS; lnHPn: $d = array(); goto d0dpA; cK7BS: return $d; goto Fn2qN; Fn2qN: } public function get_level_payments($id) { goto BPYPL; LE_m0: if (!empty($an)) { $std = $this->std->get_level_std($id); if (isset($std["\x73\164\x64"]) && !empty($std["\163\164\x64"])) { goto X9bkR; eQy0E: $state = array(); goto JWlCA; VFpD1: $d["\164\x6f\164\141\154"] = $std["\164\x6f\x74\141\x6c"]; goto U1W9K; JWlCA: foreach ($std["\163\x74\144"] as $s) { goto fFhUI; fFhUI: $fee = $this->get_class_fee($s->classe_id); goto tisBz; Ci5F1: $s->du = $pay["\x64\x75"]; goto ueDqk; tisBz: $pay = $this->get_class_std_payment_state($an->id, $s->classe_id, $fee, $s); goto gOyc2; gOyc2: $s->pay = $pay["\x70\x65\162\143\145\x6e\x74"]; goto xWvmK; ueDqk: $s->color = $this->get_color($pay["\x70\x65\162\x63\145\x6e\x74"]); goto VNPd0; VNPd0: array_push($state, $s); goto XXrNi; xWvmK: $s->amount = $pay["\141\x6d\157\165\156\164"]; goto Ci5F1; XXrNi: } goto YOk2F; dMFqO: $d["\x63\x75\x72\162\x65\156\164"] = $std["\143\x75\x72\x72\145\156\164"]; goto VFpD1; YOk2F: $d["\x73\x74\144"] = $state; goto nHJfr; U1W9K: $d["\145\x70\x70"] = $std["\145\160\160"]; goto eQy0E; X9bkR: $d["\156\142\x70\141\x67\x65\163"] = $std["\x6e\142\160\x61\147\145\x73"]; goto dMFqO; nHJfr: } } goto kQwTQ; kQwTQ: return $d; goto AYH7b; esGQd: $an = $this->utils->get_an(); goto LE_m0; BPYPL: $d = array(); goto esGQd; AYH7b: } public function list_level_payments($id) { goto bIBwn; SP7F0: if (!empty($an)) { $std = $this->std->list_level_std($id); if (isset($std) && !empty($std)) { foreach ($std as $s) { goto PxXjO; IbVPX: $s->pay = $pay["\160\145\x72\143\145\156\x74"]; goto lUMQU; PxXjO: $fee = $this->get_class_fee($s->classe_id); goto E1zNi; V8Yi0: $s->du = $pay["\x64\x75"]; goto VJNZ2; N9Bhw: array_push($d, $s); goto hv9v9; E1zNi: $pay = $this->get_class_std_payment_state($an->id, $s->classe_id, $fee, $s); goto IbVPX; lUMQU: $s->amount = $pay["\x61\x6d\157\x75\156\164"]; goto V8Yi0; VJNZ2: $s->color = $this->get_color($pay["\x70\145\x72\x63\145\156\x74"]); goto N9Bhw; hv9v9: } } } goto eczvg; T8uGs: $an = $this->utils->get_an(); goto SP7F0; bIBwn: $d = array(); goto T8uGs; eczvg: return $d; goto zCio4; zCio4: } public function get_payments() { $d = array(); return $d; } public function get_std_paid_amount($cls, $id) { goto E_qzp; Exfbr: return $d; goto HKip_; E_qzp: $d["\x65\x72\162\x6f\x72"] = true; goto sFo6v; sFo6v: $an = $this->utils->get_an(); goto KyqZI; KyqZI: if (!empty($an)) { goto T2fMV; FvXXo: $d["\x65\162\162\157\x72"] = false; goto xrMq3; T2fMV: $paid = $this->mydb->get($this->fp, array(array("\x53\x55\x4d\x28\155\x6f\x6e\164\141\x6e\x74\51" => "\155\x6f\x6e\x74\x61\156\x74")), array("\141\156" => $an->id, "\x63\x6c\x61\x73\163\x65" => $cls, "\x65\x6c\145\x76\x65" => $id)); goto FvXXo; xrMq3: $d["\144\141\164\141"] = $paid->montant; goto X_krG; X_krG: } else { $d["\x65\x72\155\163\x67"] = "\x4c\x27\141\x6e\156\303\xa9\x65\x20\x73\x63\157\x6c\141\151\x72\x65\40\x6e\47\x65\163\164\x20\x70\x61\163\40\x64\303\251\146\151\156\x69\145"; } goto Exfbr; HKip_: } public function get_std_paid_tranche($cls, $id) { goto Iz5uo; cC8Up: return $d; goto v5yUM; kcZmf: $an = $this->utils->get_an(); goto jnTkm; Iz5uo: $d["\145\162\162\x6f\162"] = true; goto kcZmf; jnTkm: if (!empty($an)) { goto qmD6Z; qmD6Z: $paid = $this->mydb->count($this->fp, array("\141\156" => $an->id, "\x63\154\x61\x73\x73\x65" => $cls, "\145\x6c\145\166\x65" => $id)); goto LRObD; kKhuI: $d["\144\x61\164\141"] = $paid; goto kHwx4; LRObD: $d["\x65\x72\x72\x6f\x72"] = false; goto kKhuI; kHwx4: } else { $d["\145\162\155\163\147"] = "\114\x27\141\156\156\303\251\x65\40\163\x63\x6f\x6c\x61\x69\x72\145\40\156\47\x65\163\x74\x20\160\x61\x73\x20\144\xc3\xa9\146\x69\x6e\151\145"; } goto cC8Up; v5yUM: } public function get_std_payments($cls, $id) { goto HqGz5; HqGz5: $d = array(); goto yVdFs; ri3Xk: return $d; goto QdE6_; yVdFs: $an = $this->utils->get_an(); goto KjsUq; KjsUq: if (!empty($an)) { goto y0Kp6; MHEWt: $d["\156\x62\x70\141\x67\x65\163"] = $page->nbpages; goto kU7QK; kU7QK: $d["\143\165\162\x72\x65\156\x74"] = $page->current; goto WSXkt; NBr7J: $d["\145\x70\x70"] = $page->epp; goto Bigqb; y0Kp6: $where = array("\x61\x6e" => $an->id, "\143\154\141\x73\x73\x65" => $cls, "\x65\x6c\145\166\x65" => $id); goto OSQrO; LtHBb: $count = $this->mydb->count($this->fp, $where, $join); goto o8EPo; WSXkt: $d["\x74\x6f\164\x61\x6c"] = $count; goto NBr7J; Bigqb: $orderby = array("\155\x6f\144\151\146\x69\145\x64" => "\x44\105\123\x43"); goto S8HfJ; zfnWJ: $d["\x70\x61\171\x73"] = $this->mydb->gets($this->fp, '', $where, $join, $orderby, $limit); goto YdaEI; S8HfJ: $limit = array($page->start, $page->epp); goto zfnWJ; o8EPo: $page = pager($count); goto MHEWt; OSQrO: $join = array(); goto LtHBb; YdaEI: } goto ri3Xk; QdE6_: } public function get_edit_std_payment($id) { goto xwWEb; uOfky: $pay = $this->mydb->get($this->fp, '', array("\151\144" => $id)); goto dQiYv; yY6DA: return $d; goto lSdDr; dQiYv: if (!empty($pay)) { $pay->date = formatmysql($pay->modified); $d = $pay; } goto yY6DA; xwWEb: $d = false; goto uOfky; lSdDr: } public function get_class_state($id) { goto TsQLx; TsQLx: $d = new stdClass(); goto yh7ez; IZhZJ: if (!empty($an)) { $pay = $this->get_class_payment_state($an->id, $id); if (!empty($pay)) { goto gm6nN; pz858: $d->reste = $pay["\144\x75"] - $pay["\141\155\157\165\x6e\x74"]; goto y8BBn; agwAS: $d->du = $pay["\x64\165"]; goto pz858; QHnZn: $d->pay = $pay["\x70\x65\162\143\145\156\164"]; goto WONua; v3KwJ: $d->garcon = $pay["\x67\x61\162\x63\x6f\156"]; goto TP68j; TP68j: $d->fille = $pay["\x66\x69\154\x6c\x65"]; goto QHnZn; WONua: $d->amount = $pay["\x61\155\x6f\x75\x6e\164"]; goto agwAS; y8BBn: $d->color = $this->get_color($pay["\x70\145\x72\x63\145\156\164"]); goto mmiKc; gm6nN: $d->effectif = $pay["\145\146\x66\x65\143\x74\151\x66"]; goto v3KwJ; mmiKc: } } goto lWcXL; lWcXL: return $d; goto umEAI; yh7ez: $an = $this->utils->get_an(); goto IZhZJ; umEAI: } public function get_level_state($id) { goto x4uik; MlBct: return $d; goto Hp1x5; vWMA2: $an = $this->utils->get_an(); goto oWg4x; x4uik: $d = new stdClass(); goto vWMA2; oWg4x: if (!empty($an)) { $pay = $this->get_level_payment_state($an->id, $id); if (!empty($pay)) { goto oiprs; zeGll: $d->pay = $pay["\160\145\162\x63\x65\156\164"]; goto Pf0Hj; oiprs: $d->nbclass = $pay["\x6e\x62\x63\x6c\141\163\163"]; goto W4aJE; T1cwb: $d->fille = $pay["\146\x69\154\154\145"]; goto zeGll; jM9d1: $d->color = $this->get_color($pay["\x70\x65\162\x63\x65\x6e\x74"]); goto qo8oo; W4aJE: $d->effectif = $pay["\x65\146\146\145\143\164\151\x66"]; goto Spubj; Spubj: $d->garcon = $pay["\x67\141\x72\x63\x6f\156"]; goto T1cwb; jXbie: $d->du = $pay["\144\x75"]; goto vAOUC; Pf0Hj: $d->amount = $pay["\x61\155\157\165\156\164"]; goto jXbie; vAOUC: $d->reste = $pay["\x64\165"] - $pay["\141\x6d\x6f\165\156\164"]; goto jM9d1; qo8oo: } } goto MlBct; Hp1x5: } public function get_pay_range($start, $end) { goto iaQoq; w1IWo: $an = $this->utils->get_an(); goto DuD1G; iaQoq: $d = array(); goto w1IWo; QoB2v: return $d; goto M_BH1; DuD1G: if (!empty($an)) { goto mckhR; Ipa5o: $pays = $this->mydb->custom_get($sql); goto ie069; mckhR: $anid = $an->id; goto hlzRP; ie069: if (!empty($pays)) { foreach ($pays as $p) { goto lHLs1; PXoZE: if ($amount["\145\162\x72\157\162"] == false) { $p->amount = $amount["\x64\x61\x74\141"]; } else { $p->amount = 0; } goto UTfJn; lHLs1: $cls = $this->cls->get($p->clsid); goto gWKeW; gWKeW: if (!empty($cls)) { $p->classe = $cls->nom; } else { $p->classe = ''; } goto uB_f4; UTfJn: array_push($d, $p); goto jJgKQ; uB_f4: $amount = $this->get_std_paid_amount($p->clsid, $p->id); goto PXoZE; jJgKQ: } } goto R6pJB; R6pJB: if ($start == 0 || $end == 0) { $none = $this->get_none_paid($anid); $d = array_merge($d, $none); } goto xq63W; hlzRP: $sql = "\x53\105\x4c\x45\x43\x54\x20\145\x6c\x65\166\x65\x2e\x69\x64\40\101\123\40\x69\144\x2c\40\145\154\x65\x76\x65\x2e\x6e\157\155\40\x41\123\40\156\x6f\155\x2c\40\x65\154\x65\166\x65\x2e\160\162\145\156\x6f\x6d\x73\x20\101\x53\x20\160\x72\x65\156\157\x6d\x73\54\40\145\154\x65\166\145\x2e\x73\145\x78\x65\x20\101\x53\40\163\145\170\x65\x2c\x20\145\154\x65\x76\x65\x2e\155\x6c\x6c\145\40\101\123\x20\x6d\x6c\x6c\145\x2c\x20\x63\x6c\141\x73\163\x65\x5f\150\x61\x73\137\x65\x6c\145\x76\145\56\x63\154\x61\x73\163\x65\40\x41\123\x20\143\x6c\x73\x69\144\40\106\x52\x4f\x4d\40\x65\x6c\x65\166\x65\x20\111\x4e\116\105\x52\x20\112\x4f\x49\116\40\x63\x6c\x61\x73\163\x65\x5f\150\141\x73\137\x65\154\x65\x76\x65\40\117\116\x20\x63\154\141\163\x73\x65\x5f\150\141\163\x5f\x65\154\x65\x76\x65\x2e\145\154\x65\x76\145\x20\x3d\x20\145\154\x65\166\x65\56\x69\144\40\127\110\x45\122\105\x20\x63\154\x61\163\x73\145\x5f\x68\x61\163\137\145\x6c\145\166\x65\56\141\156\40\x3d\40{$anid}\40\x41\x4e\104\x20\x28\x28\x28\x53\105\114\x45\x43\124\x20\123\x55\115\50\155\157\x6e\x74\141\x6e\x74\x29\40\101\123\40\155\x6f\156\x74\x61\156\164\x20\106\x52\x4f\x4d\40\146\x65\145\137\x70\141\171\155\145\x6e\164\x20\x57\110\x45\x52\x45\40\145\154\145\x76\x65\x20\75\40\x65\x6c\x65\x76\x65\56\151\x64\x20\x41\x4e\x44\x20\x61\x6e\40\x3d\x20{$anid}\51\40\76\75\x20{$start}\x29\x20\x41\x4e\104\40\x28\50\123\x45\x4c\105\103\124\x20\123\125\x4d\50\x6d\157\x6e\164\x61\x6e\x74\x29\40\101\x53\x20\155\x6f\x6e\x74\x61\x6e\164\40\106\x52\x4f\115\x20\x66\x65\x65\x5f\x70\141\x79\155\x65\156\164\x20\x57\110\105\122\105\x20\145\154\x65\166\145\40\75\x20\145\154\145\166\145\56\x69\144\40\101\x4e\104\40\x61\156\40\x3d\x20{$anid}\51\40\74\75\x20{$end}\51\x29"; goto Ipa5o; xq63W: } goto QoB2v; M_BH1: } public function get_paid($montant) { goto PX7HN; uxBaa: return $d; goto Q6lAa; PX7HN: $d = array(); goto yTZci; yTZci: $an = $this->utils->get_an(); goto GOl5m; GOl5m: if (!empty($an)) { goto c7GIK; c7GIK: $anid = $an->id; goto AyqQG; t0OFR: if ($montant == 0) { $none = $this->get_none_paid($anid); $d = array_merge($d, $none); } goto te60y; AyqQG: $sql = "\x53\x45\x4c\105\x43\x54\x20\x65\x6c\x65\166\145\56\x69\144\40\101\x53\x20\151\144\x2c\40\145\x6c\145\x76\145\56\x6e\x6f\155\40\101\123\x20\156\157\x6d\x2c\x20\145\x6c\145\x76\145\x2e\160\x72\145\156\x6f\x6d\x73\x20\101\x53\x20\x70\162\145\x6e\157\155\x73\x2c\x20\x65\154\x65\x76\145\x2e\163\x65\x78\x65\x20\101\x53\40\163\145\x78\145\x2c\40\145\x6c\145\x76\145\x2e\155\154\x6c\145\40\101\123\40\155\x6c\x6c\x65\54\40\x63\154\x61\163\163\x65\x5f\150\141\x73\x5f\145\x6c\x65\166\x65\x2e\143\x6c\x61\163\x73\x65\40\101\x53\x20\x63\x6c\x73\x69\x64\40\106\x52\117\115\40\145\x6c\145\x76\145\x20\111\x4e\x4e\x45\122\40\112\117\x49\x4e\x20\143\x6c\x61\163\163\145\137\x68\141\x73\x5f\145\154\x65\166\145\40\x4f\x4e\40\x63\154\141\x73\x73\145\137\x68\x61\163\x5f\x65\x6c\145\166\145\x2e\x65\x6c\x65\x76\x65\40\75\40\145\154\145\166\x65\56\151\144\40\127\x48\105\x52\105\40\143\x6c\x61\163\x73\145\x5f\150\141\163\x5f\145\154\145\x76\x65\56\x61\156\x20\x3d\40{$anid}\x20\x41\116\104\40\x28\50\x53\105\114\x45\103\124\x20\x53\x55\115\x28\x6d\x6f\x6e\x74\x61\156\x74\x29\40\101\123\40\155\157\156\x74\141\x6e\x74\x20\x46\x52\x4f\x4d\40\146\145\x65\x5f\x70\x61\171\155\x65\x6e\164\40\127\110\105\x52\x45\x20\x65\x6c\x65\166\x65\x20\x3d\40\x65\x6c\x65\x76\x65\x2e\151\144\40\x41\x4e\x44\40\141\156\x20\75\x20{$anid}\40\51\40\75\40{$montant}\51"; goto pBpTL; BPJ_h: if (!empty($pays)) { foreach ($pays as $p) { goto jjJXK; cFeFf: $amount = $this->get_std_paid_amount($p->clsid, $p->id); goto nC1jn; jjJXK: $cls = $this->cls->get($p->clsid); goto lh13a; lh13a: if (!empty($cls)) { $p->classe = $cls->nom; } else { $p->classe = ''; } goto cFeFf; uAuBN: array_push($d, $p); goto sz_WO; nC1jn: if ($amount["\x65\162\162\157\x72"] == false) { $p->amount = $amount["\x64\x61\164\x61"]; } else { $p->amount = 0; } goto uAuBN; sz_WO: } } goto t0OFR; pBpTL: $pays = $this->mydb->custom_get($sql); goto BPJ_h; te60y: } goto uxBaa; Q6lAa: } public function get_class_pay_range($id, $start, $end) { goto lbQMf; XbA0Q: return $d; goto jAq3J; IpEbY: $an = $this->utils->get_an(); goto WAIm2; WAIm2: if (!empty($an)) { goto hw84_; TWPWD: if (!empty($pays)) { foreach ($pays as $p) { goto VpGIi; vq0jK: if ($amount["\145\162\x72\157\x72"] == false) { $p->amount = $amount["\144\x61\x74\141"]; } else { $p->amount = 0; } goto JQgAh; VpGIi: $amount = $this->get_std_paid_amount($p->clsid, $p->id); goto vq0jK; JQgAh: array_push($d, $p); goto P6GkN; P6GkN: } } goto BJGt4; kSzj2: $pays = $this->mydb->custom_get($sql); goto TWPWD; BJGt4: if ($start == 0 || $end == 0) { $none = $this->get_class_none_paid($anid, $id); $d = array_merge($d, $none); } goto usoYO; hw84_: $anid = $an->id; goto E0IJG; E0IJG: $sql = "\123\x45\x4c\105\103\x54\40\145\154\145\x76\145\56\x69\x64\x20\101\x53\x20\x69\144\54\40\x65\x6c\145\x76\145\x2e\x6e\x6f\155\x20\x41\x53\x20\x6e\x6f\155\54\40\145\x6c\x65\x76\x65\x2e\160\x72\x65\x6e\157\x6d\163\40\x41\123\40\160\x72\145\156\157\x6d\163\54\x20\145\x6c\x65\x76\x65\56\x73\x65\170\145\x20\101\x53\40\163\x65\x78\145\54\40\x65\154\x65\166\145\56\x6d\154\154\145\x20\101\123\40\155\x6c\154\145\54\40\x63\x6c\x61\163\163\145\137\150\141\163\137\x65\154\145\166\x65\56\x63\154\141\x73\163\x65\40\x41\x53\x20\143\154\x73\x69\x64\x20\106\x52\117\115\x20\x65\154\145\166\145\x20\x49\x4e\116\105\x52\x20\112\117\111\x4e\x20\x63\x6c\141\x73\x73\x65\x5f\x68\141\x73\x5f\x65\154\145\x76\x65\x20\117\x4e\x20\x63\154\x61\x73\x73\145\137\150\x61\163\x5f\145\x6c\145\x76\145\x2e\145\154\x65\166\145\x20\75\x20\145\154\145\x76\145\x2e\x69\144\40\x57\x48\x45\x52\x45\40\x63\154\x61\163\x73\x65\x5f\x68\141\x73\x5f\145\154\145\x76\x65\x2e\x61\x6e\40\75\40{$anid}\40\101\116\104\x20\x63\x6c\141\x73\x73\x65\x5f\150\141\x73\x5f\145\154\x65\166\145\x2e\x63\154\141\x73\x73\x65\75{$id}\x20\x41\116\104\40\x28\x28\50\123\105\114\x45\x43\x54\40\123\125\x4d\50\155\x6f\x6e\x74\x61\x6e\x74\51\x20\x41\x53\x20\x6d\x6f\x6e\164\x61\156\x74\40\x46\x52\x4f\x4d\40\x66\145\145\137\160\141\171\x6d\145\x6e\164\40\x57\110\x45\x52\105\40\145\x6c\145\166\x65\40\75\40\x65\x6c\x65\166\x65\56\x69\144\40\101\116\104\x20\x61\x6e\x20\x3d\40{$anid}\51\40\x3e\x3d\40{$start}\51\x20\x41\116\x44\x20\50\x28\123\105\x4c\105\103\x54\40\x53\125\x4d\x28\x6d\x6f\x6e\x74\141\156\164\51\40\101\123\40\155\157\156\164\x61\156\164\x20\106\122\117\115\x20\x66\x65\145\137\x70\141\x79\x6d\145\x6e\164\40\x57\x48\105\122\x45\40\145\x6c\145\x76\145\x20\x3d\x20\x65\154\145\x76\x65\56\151\x64\40\101\116\x44\40\x61\x6e\40\x3d\40{$anid}\x29\40\x3c\75\x20{$end}\51\51"; goto kSzj2; usoYO: } goto XbA0Q; lbQMf: $d = array(); goto IpEbY; jAq3J: } public function get_class_paid($id, $montant) { goto PtWM6; PtWM6: $d = array(); goto LzRlm; LzRlm: $an = $this->utils->get_an(); goto Q4uK2; Q4uK2: if (!empty($an)) { goto gyKZf; xVt_m: $sql = "\123\x45\114\105\103\124\x20\x65\154\x65\x76\145\56\151\x64\40\101\123\40\151\144\x2c\x20\145\154\145\166\145\x2e\x6e\157\x6d\x20\x41\x53\x20\156\157\x6d\54\40\x65\x6c\x65\166\x65\56\x70\x72\145\156\157\155\x73\x20\x41\123\x20\160\162\145\x6e\x6f\155\163\54\40\x65\x6c\145\x76\x65\x2e\x73\145\x78\x65\x20\101\123\40\x73\145\170\x65\x2c\40\x65\x6c\145\166\x65\56\x6d\x6c\154\145\40\x41\x53\x20\x6d\x6c\x6c\x65\x2c\40\x63\x6c\x61\x73\x73\x65\x5f\x68\141\x73\137\x65\x6c\145\166\145\x2e\143\x6c\x61\x73\163\x65\40\x41\x53\x20\x63\154\x73\151\x64\40\x46\122\117\x4d\x20\x65\154\x65\x76\x65\40\111\x4e\116\x45\122\x20\x4a\x4f\111\116\40\143\154\141\x73\163\145\137\150\141\163\x5f\145\154\145\x76\x65\x20\117\x4e\40\143\154\x61\163\163\145\137\150\141\163\137\145\154\x65\166\145\56\x65\154\145\166\145\40\75\40\145\x6c\x65\166\x65\56\151\144\x20\127\x48\105\x52\x45\40\143\154\141\163\x73\x65\137\x68\x61\163\137\145\x6c\145\166\145\56\141\x6e\40\x3d\40{$anid}\x20\101\116\x44\40\143\154\x61\163\163\145\x5f\150\141\163\x5f\145\154\x65\166\x65\x2e\143\154\x61\x73\163\145\x3d{$id}\x20\x41\x4e\x44\x20\50\x28\123\x45\114\x45\x43\124\40\123\x55\115\50\155\x6f\156\164\x61\x6e\164\51\40\101\123\x20\x6d\157\x6e\164\141\x6e\164\x20\106\122\x4f\x4d\40\146\x65\x65\x5f\160\141\171\155\145\x6e\x74\x20\x57\x48\x45\x52\x45\40\145\154\145\x76\145\40\75\40\x65\x6c\x65\x76\x65\x2e\151\x64\40\101\x4e\x44\x20\141\x6e\40\75\x20{$anid}\x20\x29\x20\x3d\40{$montant}\x29"; goto XzCTC; N6ktl: if (!empty($pays)) { foreach ($pays as $p) { goto beJc3; beJc3: $amount = $this->get_std_paid_amount($p->clsid, $p->id); goto XwGK9; d80Mb: array_push($d, $p); goto tV5TO; XwGK9: if ($amount["\145\162\x72\x6f\162"] == false) { $p->amount = $amount["\144\x61\x74\x61"]; } else { $p->amount = 0; } goto d80Mb; tV5TO: } } goto z61J4; z61J4: if ($montant == 0) { $none = $this->get_class_none_paid($anid, $id); $d = array_merge($d, $none); } goto pJ03R; gyKZf: $anid = $an->id; goto xVt_m; XzCTC: $pays = $this->mydb->custom_get($sql); goto N6ktl; pJ03R: } goto L3f83; L3f83: return $d; goto ot4kY; ot4kY: } public function set($montant_garcon, $montant_fille, $date, $edit = false) { goto G3KLT; XODfh: $check = $this->check_fee($montant_garcon, $montant_fille, $edit); goto jZEUa; G3KLT: $d["\x65\162\x72\x6f\162"] = true; goto XODfh; bP4BN: return $d; goto CiF5G; jZEUa: if ($check == false) { goto wZiUd; wZiUd: $montant_fille = !empty($montant_fille) ? $montant_fille : $montant_garcon; goto rYU4Q; rYU4Q: $req = array("\165\163\x65\162" => $this->id, "\155\x6f\x6e\164\x61\x6e\x74\137\x67\x61\x72\143\x6f\156" => $montant_garcon, "\155\x6f\156\164\x61\x6e\164\x5f\x66\x69\154\x6c\x65" => $montant_fille, "\x6d\x6f\144\151\x66\x69\145\x64" => $date); goto Pq3zv; NHI24: if (isset($id)) { $d["\145\x72\162\x6f\x72"] = false; $d["\144\141\x74\141"] = $id; } else { $d["\x65\x72\x6d\x73\x67"] = $done; } goto Dg1yk; Pq3zv: if ($edit !== false) { $done = $this->mydb->update($this->table, $req, array("\151\x64" => $edit)); if ($done) { $id = $edit; } } else { $done = $this->mydb->set($this->table, $req); if ($done) { $id = $done; } } goto NHI24; Dg1yk: } else { $d["\x65\x72\x6d\x73\x67"] = "\x44\x65\x73\40\146\162\x61\x69\163\40\145\170\x69\x73\x74\x65\156\x74\40\x64\xc3\251\x6a\303\xa0\40\141\x76\x65\x63\x20\x63\x65\x73\x20\155\157\x6e\164\141\156\x74\x73"; } goto bP4BN; CiF5G: } public function set_fee_class($classes, $id) { if (!empty($classes)) { foreach ($classes as $cl) { $this->mydb->set("\x66\x65\145\x5f\143\x6c\141\163\x73\x65", array("\165\163\x65\162" => $this->id, "\x66\x65\145" => $id, "\x63\154\141\163\x73\145" => $cl)); } } } public function set_std_payment($cls, $fee, $id, $montant, $date, $edit = false) { goto rt9Iw; mFKS0: $an = $this->utils->get_an(); goto bmmDA; bmmDA: if (!empty($an)) { goto ybazw; OrHy5: if ($edit == false) { goto XixBb; XixBb: $req["\143\x72\x65\141\x74\145\144"] = $dte; goto CFrmN; CFrmN: $done = $this->mydb->set($this->fp, $req); goto QLeod; QLeod: if ($done) { $ret = $done; } goto JER1L; JER1L: } else { $done = $this->mydb->update($this->fp, $req, array("\151\144" => $edit)); if ($done) { $ret = $edit; } } goto qjHnP; ybazw: $dte = dte2mysql($date); goto a6B3D; qjHnP: if (isset($ret)) { $d["\145\x72\x72\x6f\x72"] = false; $d["\x64\141\x74\141"] = $ret; } else { $d["\145\x72\x6d\x73\147"] = "\125\156\145\40\145\162\x72\x65\x75\x72\40\145\x6d\x70\xc3\xaa\x63\150\145\40\x6c\47\145\156\162\145\147\x69\163\x74\x72\145\x6d\145\x6e\x74\x20\x64\x65\163\40\x69\156\x66\x6f\162\x6d\x61\x74\x69\157\x6e\x73\56\40\122\x61\x69\163\157\156\x3a\40" . $done; } goto pC1iD; a6B3D: $req = array("\x75\x73\145\162" => $this->id, "\x61\156" => $an->id, "\146\x65\x65" => $fee, "\143\x6c\x61\163\x73\x65" => $cls, "\145\154\x65\x76\145" => $id, "\155\157\x6e\164\141\156\164" => $montant, "\x6d\157\144\151\146\x69\145\144" => $dte); goto OrHy5; pC1iD: } else { $d["\x65\162\x6d\163\147"] = "\x4c\x27\x61\x6e\x6e\xc3\251\145\40\x73\x63\x6f\154\141\151\162\x65\40\156\x27\145\163\x74\x20\x70\x61\163\40\144\xc3\xa9\x66\151\x6e\151\x65"; } goto kOqyt; kOqyt: return $d; goto ONbiT; rt9Iw: $d["\145\x72\162\157\x72"] = true; goto mFKS0; ONbiT: } public function set_arrears($cls, $std, $amount) { goto cgoma; cgoma: $d = false; goto kYYzE; gQlGW: return $d; goto LFt83; BkZtd: if (!empty($an)) { goto SwGVA; SwGVA: $req = array("\x61\x6e" => $an->id, "\x63\154\141\x73\x73\x65" => $cls, "\145\154\145\x76\145" => $std, "\x61\x6d\157\x75\x6e\164" => $amount, "\155\x6f\144\151\x66\x69\145\x64" => $this->mdate); goto lCQT6; N25Ul: if (!empty($check)) { $done = $this->mydb->update("\141\162\x72\145\x61\x72\x73", $req, array("\151\x64" => $check->id)); if ($done) { $d = $check->id; } } else { goto U__jY; J7qVi: if ($done) { $d = $done; } goto qGeB4; U__jY: $req["\143\162\145\x61\x74\145\144"] = $this->mdate; goto hjJ2L; hjJ2L: $done = $this->mydb->set("\141\x72\162\145\x61\x72\x73", $req); goto J7qVi; qGeB4: } goto pSoJE; lCQT6: $where = array("\141\156" => $an->id, "\x63\154\x61\163\x73\145" => $cls, "\x65\x6c\145\166\x65" => $std); goto y5F3H; y5F3H: $check = $this->mydb->get("\141\162\x72\x65\x61\x72\x73", array("\151\x64"), $where); goto N25Ul; pSoJE: } goto gQlGW; kYYzE: $an = $this->CI->utilitaire->get_an2(); goto BkZtd; LFt83: } public function delete_class_fee($cls, $id) { goto Z_9Rc; Z_9Rc: $d["\x65\162\x72\x6f\x72"] = true; goto QyDS4; QyDS4: $an = $this->utils->get_an(); goto ca8N0; uDaJ1: return $d; goto lM7OJ; ca8N0: if (!empty($an)) { $check = $this->check_class_fee_usage($an->id, $cls, $id); if ($check["\x65\162\162\157\162"] == false) { $done = $this->mydb->delete("\146\145\145\x5f\143\154\141\x73\163\145", array("\x63\x6c\141\163\163\145" => $cls, "\146\x65\x65" => $id)); if (!empty($done)) { $d["\145\162\162\x6f\x72"] = false; } else { $d["\145\162\x6d\163\147"] = "\125\156\x65\x20\145\x72\x72\x65\165\162\40\163\x27\145\163\164\40\160\x72\157\x64\165\x69\164\145\x20\x6c\x6f\x72\x73\40\144\145\x20\x63\145\164\x74\145\x20\x61\143\x74\151\157\x6e"; } } else { if ($check["\145\162\x72\x6f\x72\137\154\145\x76\145\x6c"] == 0) { $d["\x65\x72\155\x73\x67"] = $check["\145\162\155\163\x67"]; } else { $done = $this->mydb->update($this->fc, array("\x73\x74\141\164\x75\x73" => 1), array("\143\154\x61\x73\163\x65" => $cls, "\x66\145\x65" => $id)); if ($done) { $d["\x65\x72\162\x6f\162"] = false; } else { $d["\145\162\155\163\147"] = "\125\x6e\x65\40\x65\162\x72\x65\x75\162\40\x73\47\145\x73\164\40\x70\162\157\x64\165\151\164\x65\40\154\x6f\x72\163\x20\x64\145\x20\x63\145\x74\x74\145\x20\141\143\164\151\157\156"; } } } } else { $d["\145\x72\155\163\147"] = "\x4c\47\x61\156\156\303\251\145\x20\163\143\157\154\x61\151\x72\x65\x20\x6e\47\145\x73\x74\40\160\141\x73\x20\144\303\xa9\146\151\x6e\x69\145"; } goto uDaJ1; lM7OJ: } public function delete($id) { goto QCNIA; QCNIA: $d["\x65\162\x72\157\x72"] = true; goto jLRr6; jLRr6: $an = $this->utils->get_an(); goto Ku3ba; XKEc2: return $d; goto LpG14; Ku3ba: if (!empty($an)) { $check = $this->check_fee_usage($an->id, $id); if ($check["\x65\162\x72\x6f\x72"] == false) { $done = $this->mydb->delete($this->table, array("\x69\x64" => $id)); if (!empty($done)) { $this->mydb->delete($this->fc, array("\x66\x65\x65" => $id)); $d["\x65\162\x72\157\x72"] = false; } else { $d["\x65\162\x6d\x73\147"] = "\x55\x6e\145\40\145\x72\162\145\x75\162\40\x73\47\x65\x73\164\40\160\162\x6f\144\165\x69\164\145\40\154\x6f\x72\x73\x20\144\x65\x20\x63\x65\164\x74\x65\x20\x61\143\164\151\x6f\156"; } } else { if ($check["\x65\162\x72\157\162\137\154\x65\166\x65\x6c"] == 0) { $d["\x65\x72\155\163\x67"] = $check["\145\x72\x6d\x73\147"]; } else { $done = $this->mydb->update($this->fc, array("\163\x74\141\164\165\x73" => 1), array("\146\x65\145" => $id)); if ($done) { $d["\145\162\162\x6f\x72"] = false; } else { $d["\145\x72\x6d\x73\x67"] = "\125\156\145\40\x65\x72\x72\x65\x75\162\x20\x73\47\x65\x73\164\x20\160\162\x6f\144\x75\151\164\x65\x20\x6c\157\x72\163\40\x64\145\40\143\145\164\164\x65\40\141\x63\164\151\157\156"; } } } } else { $d["\x65\162\x6d\x73\147"] = "\114\47\x61\156\156\xc3\xa9\x65\x20\x73\143\x6f\154\141\151\x72\145\x20\x6e\x27\x65\163\164\40\x70\141\x73\x20\x64\303\251\146\x69\156\151\x65"; } goto XKEc2; LpG14: } public function delete_std_fee_payment($id) { return $this->mydb->delete($this->fp, array("\x69\144" => $id)); } private function check_fee($montant_garcon, $montant_fille, $edit = false) { goto ZgDk8; x_msk: if (!empty($check)) { $d = true; } goto xNUNQ; PwUj1: if ($edit != false) { $where["\x69\144"] = array("\x3c\76" => $edit); } goto jntZq; xNUNQ: return $d; goto QRy4P; ZgDk8: $d = false; goto FUzOx; FUzOx: $where = array("\x6d\157\x6e\164\x61\x6e\164\x5f\147\141\x72\x63\x6f\156" => $montant_garcon, "\x6d\x6f\x6e\x74\141\156\164\x5f\146\151\154\x6c\x65" => $montant_fille); goto PwUj1; jntZq: $check = $this->mydb->count($this->table, $where); goto x_msk; QRy4P: } private function check_fee_usage($an, $id) { goto KFY_p; KFY_p: $d["\145\x72\162\x6f\x72"] = true; goto yPMTY; con2n: $vrf = $this->mydb->count($this->fp, array("\146\145\145" => $id, "\x61\156" => $an)); goto iwYhl; DUYJC: return $d; goto y3d2k; iwYhl: if (!empty($vrf)) { $d["\145\162\x6d\163\x67"] = $vrf . "\40\160\x61\151\145\x6d\x65\x6e\x74\x28\163\51\x20\x61\x20\x28\157\156\164\51\x20\144\303\251\x6a\303\240\x20\xc3\xa9\164\xc3\xa9\40\x65\x6e\x72\x65\x67\151\163\x74\x72\xc3\251\x28\x73\51\x20\x61\166\145\143\40\x63\x65\x20\146\x72\141\x69\163\x2e\40\123\x75\160\x70\162\x65\x73\x73\151\157\x6e\x20\151\155\x70\157\163\163\151\x62\154\145"; } else { $vrf2 = $this->mydb->count($this->fp, array("\146\x65\x65" => $id)); if (!empty($vrf2)) { $d["\145\162\162\x6f\x72\137\154\x65\166\x65\154"] = 1; } else { $d["\145\x72\x72\x6f\x72"] = false; } } goto DUYJC; yPMTY: $d["\x65\x72\162\157\x72\x5f\x6c\145\166\x65\x6c"] = 0; goto con2n; y3d2k: } private function check_class_fee_usage($an, $cls, $id) { goto e4l6D; bV_sd: $d["\x65\x72\x72\157\162\x5f\x6c\145\x76\x65\154"] = 0; goto rbkGW; i6B9C: return $d; goto RY78Z; rbkGW: $vrf = $this->mydb->count($this->fp, array("\x63\x6c\x61\163\x73\145" => $cls, "\146\145\145" => $id, "\x61\x6e" => $an)); goto DdHGr; DdHGr: if (!empty($vrf)) { $d["\145\162\x6d\x73\x67"] = $vrf . "\x20\160\141\x69\145\x6d\145\x6e\164\50\x73\51\40\141\x20\50\157\156\x74\x29\x20\144\xc3\251\x6a\xc3\xa0\x20\xc3\xa9\164\xc3\xa9\40\x65\x6e\x72\145\x67\151\163\164\162\303\xa9\50\163\51\x20\141\166\145\x63\40\143\x65\x20\146\162\141\x69\x73\56\x20\x53\x75\160\160\162\x65\x73\163\151\x6f\156\x20\x69\x6d\160\x6f\163\x73\151\x62\x6c\x65"; } else { $vrf2 = $this->mydb->count($this->fp, array("\x63\154\141\163\163\145" => $cls, "\x66\x65\x65" => $id)); if (!empty($vrf2)) { $d["\x65\x72\x72\x6f\162\137\154\145\x76\145\154"] = 1; } else { $d["\x65\x72\x72\157\x72"] = false; } } goto i6B9C; e4l6D: $d["\145\x72\x72\157\162"] = true; goto bV_sd; RY78Z: } private function get_level_payment_state($an, $id) { goto hnEJh; qVieF: $effectif = 0; goto qGjf_; CCL5q: if (!empty($cls)) { foreach ($cls as $c) { $fee = $this->get_class_fee($c->id); if (!empty($fee)) { goto hkH26; Ya5xN: if (!empty($std)) { foreach ($std as $s) { goto JXHtH; N4uwR: $pay += $mnt->montant; goto rCeqb; hq7n2: $effectif += 1; goto hKu6S; hKu6S: $mnt = $this->mydb->get($this->fp, array(array("\123\x55\115\50\155\157\x6e\164\141\156\x74\51" => "\155\x6f\156\164\141\156\164")), array("\x66\x65\145\x5f\160\x61\x79\155\145\x6e\x74\56\x61\156" => $an, "\146\145\145\137\x70\x61\x79\155\145\156\x74\x2e\143\x6c\x61\163\x73\x65" => $c->id, "\x66\x65\145\x5f\160\141\171\x6d\x65\156\x74\x2e\145\x6c\145\166\145" => $s->id)); goto N4uwR; JXHtH: if ($s->sexe == "\x4d" || $s->sexe == "\x4d\x61\163\143\x75\x6c\151\156") { $du += $fee->montant_garcon; $garcon += 1; } else { $du += $fee->montant_fille; $fille += 1; } goto hq7n2; rCeqb: } } goto QNSa6; QNSa6: $nbclass += 1; goto ULCD_; hkH26: $std = $this->mydb->gets("\x63\154\141\163\163\145\x5f\x68\x61\x73\x5f\145\154\x65\x76\x65", array(array("\x65\x6c\x65\166\145\x2e\x69\144" => "\x69\x64"), array("\145\154\x65\166\145\x2e\163\145\x78\145" => "\x73\145\x78\x65")), array("\143\154\x61\x73\x73\145\137\150\x61\x73\x5f\x65\x6c\x65\x76\145\56\x61\x6e" => $an, "\x63\x6c\x61\x73\x73\x65\137\150\141\x73\x5f\145\x6c\145\166\145\x2e\x63\154\141\163\x73\x65" => $c->id), array("\145\x6c\x65\x76\145" => array("\x69\156\x6e\x65\x72" => array("\145\x6c\x65\x76\x65", "\x69\x64")))); goto Ya5xN; ULCD_: } } if ($du > 0) { goto cbmRi; YgHJD: $d["\146\x69\x6c\154\x65"] = $fille; goto lATxV; lATxV: $d["\156\142\x63\154\x61\163\163"] = $nbclass; goto ul2XI; cbmRi: $d["\x64\165"] = $du; goto MlWiz; Fk3Sc: $d["\x65\x66\146\145\143\x74\151\146"] = $effectif; goto JYR07; JYR07: $d["\x67\x61\162\143\x6f\x6e"] = $garcon; goto YgHJD; qnsig: $d["\160\x65\162\x63\x65\x6e\x74"] = round($pay * 100 / $du, 2); goto Fk3Sc; MlWiz: $d["\x61\x6d\x6f\x75\156\164"] = $pay; goto qnsig; ul2XI: } } goto CMoP4; hnEJh: $d = array("\160\145\162\143\145\156\164" => 0, "\x61\x6d\157\x75\156\164" => 0, "\144\165" => 0, "\x65\x66\x66\x65\x63\164\x69\x66" => 0, "\147\141\162\143\157\x6e" => 0, "\146\x69\x6c\154\x65" => 0, "\x6e\142\143\154\141\x73\163" => 0); goto vXwRG; k0P3V: $cls = $this->cls->list_level_classes($id); goto CCL5q; VZ8s8: $pay = 0; goto pmdvT; qGjf_: $nbclass = 0; goto k0P3V; CMoP4: return $d; goto e28B1; yLPW1: $fille = 0; goto qVieF; pmdvT: $garcon = 0; goto yLPW1; vXwRG: $du = 0; goto VZ8s8; e28B1: } private function get_class_payment_state($an, $id) { goto NRGvj; EqIWr: $garcon = 0; goto lpc4f; Ux8eK: return $d; goto MMxpX; S_MOP: $fee = $this->get_class_fee($id); goto Uk23R; lpc4f: $fille = 0; goto WTdx0; FbMi_: $pay = 0; goto EqIWr; NRGvj: $d = array("\160\x65\x72\143\145\156\x74" => 0, "\x61\155\x6f\x75\156\x74" => 0, "\144\165" => 0, "\145\x66\146\x65\x63\164\151\146" => 0, "\x67\141\x72\x63\157\x6e" => 0, "\146\x69\x6c\x6c\145" => 0); goto S_MOP; G0QCJ: if (!empty($fee)) { goto fOiHV; fOiHV: $std = $this->mydb->gets("\143\154\x61\163\163\x65\x5f\x68\x61\x73\137\x65\154\145\166\145", array(array("\x65\154\x65\166\145\x2e\x69\x64" => "\x69\144"), array("\x65\x6c\x65\166\x65\x2e\x73\145\170\145" => "\x73\x65\170\x65")), array("\143\x6c\141\163\x73\145\x5f\x68\x61\163\x5f\145\154\145\x76\x65\56\x61\x6e" => $an, "\x63\154\141\163\x73\145\137\150\141\163\x5f\x65\x6c\145\166\x65\x2e\143\154\x61\163\163\145" => $id), array("\145\x6c\x65\166\x65" => array("\x69\156\156\145\162" => array("\x65\x6c\145\166\x65", "\151\x64")))); goto PUWq6; r0inz: if ($du > 0) { goto WIV2U; ijBub: $d["\141\x6d\x6f\x75\156\x74"] = $pay; goto SyQOE; N6jE9: $d["\146\151\x6c\154\x65"] = $fille; goto L8SsV; SyQOE: $d["\x70\145\162\143\145\x6e\164"] = round($pay * 100 / $du, 2); goto CgyzW; WDm3L: $d["\147\141\x72\x63\x6f\x6e"] = $garcon; goto N6jE9; CgyzW: $d["\145\146\x66\145\x63\x74\x69\x66"] = $effectif; goto WDm3L; WIV2U: $d["\144\165"] = $du; goto ijBub; L8SsV: } goto SWOtg; PUWq6: if (!empty($std)) { foreach ($std as $s) { goto B8Kl6; rNOPb: $mnt = $this->mydb->get($this->fp, array(array("\x53\125\115\x28\155\x6f\x6e\164\x61\156\x74\51" => "\x6d\x6f\x6e\x74\x61\156\164")), array("\146\145\x65\137\x70\141\x79\155\x65\x6e\x74\x2e\x61\156" => $an, "\146\x65\145\137\x70\x61\171\155\145\x6e\164\56\x63\x6c\x61\163\x73\x65" => $id, "\146\x65\145\137\160\x61\x79\155\145\x6e\x74\56\x65\154\x65\166\145" => $s->id)); goto qrj68; qrj68: $pay += $mnt->montant; goto Au9IA; B8Kl6: if ($s->sexe == "\115" || $s->sexe == "\x4d\x61\163\143\x75\x6c\x69\x6e") { $du += $fee->montant_garcon; $garcon += 1; } else { $du += $fee->montant_fille; $fille += 1; } goto l8oCW; l8oCW: $effectif += 1; goto rNOPb; Au9IA: } } goto r0inz; SWOtg: } goto Ux8eK; WTdx0: $effectif = 0; goto G0QCJ; Uk23R: $du = 0; goto FbMi_; MMxpX: } private function get_class_std_payment_state($an, $cls, $fee, $std) { goto IbdA9; z6lon: if (!empty($fee)) { goto JbTgz; JbTgz: if ($std->sexe == "\x4d" || $std->sexe == "\115\141\x73\x63\165\x6c\x69\x6e") { $du = $fee->montant_garcon; } else { $du = $fee->montant_fille; } goto Ecdqr; JqoPy: $pay = $mnt->montant; goto V4cZf; Ecdqr: $mnt = $this->mydb->get($this->fp, array(array("\123\x55\115\x28\x6d\x6f\x6e\x74\141\156\164\51" => "\x6d\x6f\x6e\x74\141\x6e\164")), array("\146\x65\145\x5f\160\141\x79\155\145\x6e\x74\56\141\156" => $an, "\146\145\145\137\x70\141\171\155\145\156\x74\x2e\143\154\141\163\163\x65" => $cls, "\x66\145\x65\x5f\160\x61\x79\x6d\x65\156\164\56\x65\x6c\x65\x76\x65" => $std->id)); goto JqoPy; V4cZf: if ($du > 0) { goto j3EQE; gblI0: $d["\160\x65\162\143\x65\x6e\164"] = round($pay * 100 / $du, 2); goto Inc1B; j3EQE: $d["\144\165"] = $du; goto lviME; lviME: $d["\141\x6d\x6f\165\x6e\x74"] = $pay; goto gblI0; Inc1B: } goto fjSiG; fjSiG: } goto Zcxt0; Zcxt0: return $d; goto U25NN; IbdA9: $d = array("\160\145\x72\143\x65\x6e\x74" => 0, "\x61\155\157\x75\x6e\x74" => 0, "\x64\x75" => 0); goto zag8E; zBD0r: $pay = 0; goto z6lon; zag8E: $du = 0; goto zBD0r; U25NN: } private function get_color($pay) { if ($pay < 25) { $color = "\144\141\x6e\x67\145\162"; } elseif ($pay >= 25 && $pay < 33) { $color = "\x77\x61\162\x6e\x69\x6e\147"; } elseif ($pay >= 33 && $pay < 50) { $color = "\160\x72\151\x6d\x61\x72\x79"; } elseif ($pay >= 50 && $pay < 66) { $color = "\x6e\141\166\171"; } elseif ($pay >= 66 && $pay < 75) { $color = "\157\x6c\151\x76\145"; } elseif ($pay >= 75 && $pay < 100) { $color = "\151\x6e\x66\157"; } else { $color = "\x73\165\143\x63\145\x73\x73"; } return $color; } private function get_none_paid($an) { goto Vwsbf; Vwsbf: $d = array(); goto a4l1V; swTgW: if (!empty($pays)) { foreach ($pays as $p) { goto fvCve; fvCve: $cls = $this->cls->get($p->clsid); goto wN1nz; wN1nz: if (!empty($cls)) { $p->classe = $cls->nom; } else { $p->classe = ''; } goto Fj8QK; Fj8QK: $p->amount = 0; goto sNHcO; sNHcO: array_push($d, $p); goto mmCEZ; mmCEZ: } } goto cjAB4; cjAB4: return $d; goto uo9jG; kYrw1: $pays = $this->mydb->custom_get($sql); goto swTgW; a4l1V: $sql = "\x53\x45\x4c\x45\x43\x54\40\145\x6c\x65\166\145\x2e\x69\144\x20\x41\123\x20\151\144\x2c\40\145\x6c\145\166\145\x2e\156\x6f\155\40\101\x53\x20\x6e\x6f\x6d\54\x20\145\x6c\145\x76\x65\x2e\x70\162\145\156\157\155\163\x20\x41\x53\x20\x70\162\145\156\157\x6d\x73\x2c\x20\x65\154\x65\x76\145\56\x73\145\x78\x65\40\101\123\x20\163\x65\x78\x65\x2c\40\x65\x6c\x65\x76\x65\x2e\x6d\x6c\x6c\145\x20\x41\x53\x20\155\x6c\x6c\x65\x2c\40\x63\154\x61\x73\x73\145\137\150\x61\x73\x5f\145\154\145\166\x65\56\x63\x6c\141\x73\163\145\x20\x41\x53\x20\143\154\x73\151\x64\40\x46\122\117\115\x20\145\154\145\x76\145\x20\x49\116\116\x45\x52\40\112\117\x49\116\40\x63\154\141\163\x73\145\x5f\x68\141\x73\137\x65\154\145\166\145\40\117\x4e\40\x63\x6c\x61\x73\163\145\137\150\x61\x73\137\x65\154\x65\x76\x65\x2e\145\x6c\x65\x76\x65\40\75\x20\x65\154\x65\x76\145\56\151\144\x20\x57\x48\105\x52\x45\40\143\154\141\x73\163\145\x5f\150\x61\x73\x5f\x65\x6c\145\x76\x65\x2e\x61\156\40\75\x20{$an}\x20\x41\x4e\104\x20\145\154\x65\166\x65\x2e\x69\144\40\116\x4f\124\x20\111\x4e\x20\x28\x53\105\x4c\x45\x43\124\x20\145\154\x65\x76\x65\40\106\x52\x4f\115\x20\x66\145\145\x5f\160\x61\171\155\x65\x6e\x74\x20\127\110\105\x52\x45\40\x61\156\x20\x3d\x20{$an}\51"; goto kYrw1; uo9jG: } private function get_class_none_paid($an, $id) { goto qmFkR; f3XS5: $sql = "\123\105\114\x45\x43\x54\40\x65\154\145\x76\145\x2e\x69\144\x20\101\123\40\151\144\x2c\x20\145\154\x65\166\145\56\156\157\155\x20\101\x53\x20\156\157\155\x2c\40\x65\154\145\x76\145\56\x70\x72\145\x6e\157\155\163\40\101\123\40\x70\162\145\156\157\x6d\x73\x2c\x20\x65\x6c\145\166\145\56\163\145\170\145\x20\x41\x53\x20\x73\145\170\145\54\40\145\x6c\x65\166\145\x2e\x6d\154\x6c\x65\40\101\123\40\x6d\x6c\154\145\x2c\40\143\x6c\x61\x73\x73\x65\x5f\x68\141\163\137\x65\154\x65\166\145\x2e\x63\x6c\x61\x73\163\145\x20\101\123\x20\143\154\x73\x69\144\40\106\122\117\x4d\x20\x65\x6c\145\166\145\40\111\116\116\105\122\x20\x4a\x4f\x49\116\40\143\154\141\163\x73\145\x5f\x68\x61\x73\x5f\145\x6c\x65\x76\145\40\x4f\x4e\x20\143\x6c\x61\163\x73\145\137\x68\x61\163\x5f\x65\x6c\145\166\x65\56\x65\154\x65\x76\x65\40\x3d\40\145\x6c\145\166\145\x2e\x69\144\x20\127\110\105\x52\105\40\x63\154\x61\x73\x73\x65\x5f\x68\x61\163\x5f\145\x6c\x65\166\x65\x2e\x61\156\x20\75\40{$an}\x20\x41\116\104\x20\x63\154\x61\163\163\145\137\150\141\163\x5f\145\x6c\145\166\145\x2e\x63\x6c\x61\x73\163\x65\40\x3d\40{$id}\x20\101\x4e\x44\x20\145\154\145\x76\x65\56\x69\144\40\116\x4f\124\40\x49\116\40\x28\x53\105\114\x45\103\124\40\145\154\x65\x76\145\x20\106\x52\117\x4d\40\146\145\x65\x5f\x70\x61\171\x6d\145\156\x74\40\x57\x48\105\122\x45\40\x61\x6e\x20\75\40{$an}\x29"; goto j4V5z; j4V5z: $pays = $this->mydb->custom_get($sql); goto sF0yP; qmFkR: $d = array(); goto f3XS5; Dk5rO: return $d; goto Rdust; sF0yP: if (!empty($pays)) { foreach ($pays as $p) { goto ZwPJO; ZwPJO: $cls = $this->cls->get($p->clsid); goto OMTid; kXOwq: $p->amount = 0; goto bK9BM; OMTid: if (!empty($cls)) { $p->classe = $cls->nom; } else { $p->classe = ''; } goto kXOwq; bK9BM: array_push($d, $p); goto Bhwn8; Bhwn8: } } goto Dk5rO; Rdust: } }
