<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:18              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\x42\x41\x53\x45\120\x41\x54\x48") or exit("\x4e\157\x20\x64\151\162\x65\143\164\x20\163\143\162\x69\x70\x74\40\x61\143\143\x65\163\163\x20\141\154\x6c\157\x77\145\x64"); class An { protected $CI; private $mydb; private $table; private $ahd; private $date; private $nd; public function __construct() { goto Z5r1j; Z5r1j: $this->CI =& get_instance(); goto Ga8M5; CMig1: $this->date = gmdate("\131\x2d\x6d\55\144\40\110\72\151\x3a\x73"); goto wqooh; Ga8M5: $this->mydb =& $this->CI->mydb; goto CMig1; E8xps: $this->nd = "\x6e\151\166\145\141\x75\137\x64\x65\x63\157\x75\x70\141\147\145"; goto p33NT; p33NT: $this->ahd = "\x61\156\x5f\x68\x61\163\137\144\145\143\157\165\x70\x61\x67\145"; goto KLc5r; wqooh: $this->table = "\x61\x6e"; goto E8xps; KLc5r: } public function get($id) { goto c_9hC; Cg1bo: $an = $this->mydb->get("\x61\156", '', array("\151\x64" => $id)); goto E93wI; c_9hC: $d = false; goto Cg1bo; QCkIh: return $d; goto JykXF; E93wI: if (!empty($an)) { $d = $an; } goto QCkIh; JykXF: } public function get_current_an() { goto G_zq7; G_zq7: $d = false; goto n3RRw; qxyCa: if (!empty($an)) { $d = $an; } goto uqKtj; n3RRw: $an = $this->mydb->get($this->table, array(), array("\x73\164\x61\164\x75\163" => 0)); goto qxyCa; uqKtj: return $d; goto fkyd1; fkyd1: } public function get_decoupage_names() { return $this->mydb->gets("\x64\145\143\157\x75\160\141\147\x65"); } public function get_decoupage_edition($id) { goto ekArv; ekArv: $d = false; goto OaXSU; OaXSU: $edit = $this->mydb->get($this->ahd, array(array("\x61\156\x5f\150\x61\163\137\144\x65\143\157\x75\x70\x61\147\145\56\151\x64" => "\x69\x64"), array("\144\145\143\x6f\x75\160\x61\x67\145\56\151\x64" => "\144\x65\x63\x6f\x75\x70\141\147\145\137\151\x64"), array("\144\x65\x63\x6f\x75\x70\x61\147\x65\x2e\x6e\x6f\x6d" => "\x6e\x6f\155"), array("\141\x6e\137\x68\x61\x73\x5f\144\x65\x63\x6f\x75\160\x61\x67\145\56\x64\145\x62\x75\x74" => "\x64\145\142\x75\x74"), array("\141\x6e\x5f\x68\x61\x73\137\144\x65\143\x6f\165\x70\x61\147\145\56\146\151\156" => "\146\x69\x6e"), array("\141\x6e\137\x68\141\163\137\x64\x65\143\157\x75\160\x61\147\x65\x2e\143\x72\145\141\x74\145\x64" => "\x63\x72\x65\x61\x74\x65\144")), array($this->ahd . "\x2e\151\144" => $id), array("\x64\x65\143\157\x75\160\x61\x67\145" => array("\151\156\x6e\x65\x72" => array("\x64\145\143\x6f\165\x70\141\147\145", "\151\x64")), "\x61\156" => array("\x69\x6e\x6e\145\x72" => array("\141\x6e", "\151\x64")))); goto E04xr; yvOV8: return $d; goto enKik; E04xr: if (!empty($edit)) { goto Lg90b; Lg90b: $levels = array(); goto dCEe8; dCEe8: $lvs = $this->mydb->gets("\x6e\151\x76\x65\x61\x75\137\144\x65\x63\157\165\x70\x61\x67\145", array("\156\x69\x76\145\141\x75"), array("\x64\145\x63\x6f\x75\160\x61\x67\x65" => $edit->decoupage_id, "\x61\156\x2e\163\x74\141\x74\165\163" => 0), array("\x6e\151\x76\145\141\x75" => array("\x69\x6e\x6e\x65\162" => array("\x6e\x69\166\x65\141\165", "\151\144")), "\141\156" => array("\151\x6e\156\145\162" => array("\141\x6e", "\151\x64")))); goto qUitn; D6bSw: $edit->levels = $levels; goto cEhsg; cEhsg: $d = $edit; goto Gin5P; qUitn: if (!empty($lvs)) { foreach ($lvs as $l) { array_push($levels, $l->niveau); } } goto D6bSw; Gin5P: } goto yvOV8; enKik: } public function get_closed_ans() { goto IvR5J; l8j29: if (!empty($ans)) { $d = $ans; } goto eG2yt; A5Eb1: $ans = $this->mydb->gets($this->table, array(), array("\163\164\x61\164\x75\163" => 1)); goto l8j29; eG2yt: return $d; goto FY0VP; IvR5J: $d = array(); goto A5Eb1; FY0VP: } public function get_class_decoupage($id) { goto p_Vo9; yVw88: if (!empty($an)) { $decs = $this->mydb->gets("\x61\x6e\137\x68\141\163\x5f\144\145\x63\157\x75\160\x61\x67\145", array(array("\x64\145\x63\157\165\x70\141\x67\145\x2e\151\x64" => "\x69\144"), array("\144\145\143\157\165\x70\141\147\145\x2e\x6e\157\x6d" => "\x6e\x6f\155"), array("\141\x6e\x5f\150\x61\163\137\144\x65\143\157\165\160\x61\x67\145\56\x64\x65\x62\x75\x74" => "\144\145\142\165\x74"), array("\141\156\x5f\150\141\163\137\144\145\x63\157\x75\x70\x61\147\145\56\146\151\156" => "\x66\x69\156"), array("\141\156\137\150\x61\163\x5f\x64\145\x63\157\165\x70\141\147\145\x2e\x63\162\145\x61\x74\145\144" => "\x63\x72\145\141\x74\x65\144")), array("\x63\x6c\141\x73\x73\145\56\151\x64" => $id, "\x61\156\x5f\x68\141\163\137\x64\x65\x63\x6f\165\x70\141\147\x65\56\x61\156" => $an->id, "\156\151\166\145\x61\165\137\x64\x65\143\x6f\165\x70\141\147\145\x2e\x61\x6e" => $an->id), array("\x64\145\143\x6f\x75\160\x61\x67\145" => array("\x69\156\x6e\145\x72" => array("\x64\x65\x63\x6f\x75\x70\141\147\x65", "\x69\x64")), "\156\x69\166\145\141\x75\x5f\144\145\x63\157\x75\160\x61\147\x65" => array("\x69\156\156\x65\162" => array("\x64\x65\x63\x6f\x75\x70\x61\147\145", "\144\145\x63\157\x75\160\x61\x67\145")), "\x63\x6c\141\x73\x73\x65\x5f\x69\156\x69\164" => array("\151\156\156\145\162" => array("\x6e\x69\166\145\141\165\x5f\144\x65\143\x6f\165\160\141\x67\145\56\x6e\151\166\x65\x61\165", "\156\151\x76\145\x61\165")), "\x63\154\x61\x73\163\145" => array("\x69\156\156\145\x72" => array("\143\154\141\x73\163\x65\x5f\151\x6e\151\x74\56\151\144", "\x63\x6c\141\163\x73\145\x5f\151\x6e\151\x74")), "\141\x6e" => array("\x69\156\156\x65\162" => array("\141\156", "\x69\144")))); if (!empty($decs)) { $d = $decs; } } goto xcfhL; p_Vo9: $d = array(); goto Z8ezZ; Z8ezZ: $an = $this->get_current_an(); goto yVw88; xcfhL: return $d; goto jNsLL; jNsLL: } public function get_decoupage($id) { goto TXamL; TXamL: $d = false; goto nSjFi; R_5iu: if (!empty($dec)) { $d = $dec; } goto g8KJ2; nSjFi: $dec = $this->mydb->get("\141\156\x5f\150\141\x73\x5f\144\145\x63\157\165\x70\x61\147\145", array(array("\x64\x65\x63\x6f\165\x70\x61\x67\145\56\151\144" => "\x69\144"), array("\144\145\x63\157\x75\x70\141\x67\x65\56\x6e\x6f\x6d" => "\x6e\157\x6d"), array("\141\156\x5f\x68\141\163\x5f\x64\145\x63\x6f\165\160\x61\x67\145\56\144\145\142\165\164" => "\x64\145\x62\165\x74"), array("\141\x6e\137\150\x61\x73\137\x64\x65\143\x6f\x75\x70\x61\x67\x65\x2e\146\151\156" => "\x66\x69\156"), array("\x61\156\137\x68\x61\163\137\x64\x65\143\157\x75\160\x61\147\145\x2e\x63\162\x65\x61\164\x65\144" => "\x63\162\145\141\164\x65\x64")), array("\144\145\143\157\165\x70\x61\x67\x65\x2e\151\x64" => $id, "\141\156\x2e\163\164\x61\164\165\x73" => 0), array("\144\x65\x63\x6f\165\160\x61\147\x65" => array("\x69\x6e\156\x65\x72" => array("\144\x65\143\x6f\x75\x70\141\x67\145", "\x69\144")), "\141\x6e" => array("\x69\156\156\x65\x72" => array("\x61\156", "\x69\x64")))); goto R_5iu; g8KJ2: return $d; goto tJlaL; tJlaL: } public function get_list_decoupage() { goto hCCYF; WoBaW: if (!empty($decs)) { foreach ($decs as $dec) { goto fYobc; c7qPy: $nivs = $this->mydb->gets("\x6e\x69\x76\x65\x61\x75\x5f\144\x65\x63\x6f\x75\160\x61\147\145", array(array("\156\x69\166\x65\x61\165\56\156\157\x6d" => "\156\x6f\x6d")), array("\156\151\166\x65\141\x75\137\144\145\143\x6f\165\x70\141\x67\145\x2e\144\x65\143\x6f\x75\x70\141\x67\x65" => $dec->decoupage_id, "\141\x6e\x2e\x73\x74\141\164\x75\163" => 0), array("\156\151\166\145\141\x75" => array("\151\156\156\145\x72" => array("\156\151\166\145\x61\x75", "\x69\144")), "\x61\156" => array("\151\x6e\156\x65\162" => array("\x61\x6e", "\151\144")))); goto eaVQV; lykuc: array_push($d, $dec); goto EsC1R; eaVQV: if (!empty($nivs)) { foreach ($nivs as $n) { array_push($levels, $n->nom); } } goto BUNHw; fYobc: $levels = array(); goto c7qPy; BUNHw: $dec->levels = $levels; goto lykuc; EsC1R: } } goto b37N1; b37N1: return $d; goto ax3G3; XTP3a: $decs = $this->mydb->gets("\141\156\137\150\141\x73\137\144\145\143\x6f\165\x70\x61\147\x65", array(array("\141\156\137\x68\141\x73\137\144\x65\x63\x6f\165\160\x61\x67\x65\x2e\x69\x64" => "\x69\x64"), array("\144\145\x63\157\x75\x70\x61\147\145\56\x69\144" => "\144\145\143\157\x75\x70\x61\x67\145\x5f\x69\144"), array("\x64\x65\x63\x6f\165\160\141\147\145\x2e\156\157\x6d" => "\x6e\157\x6d"), array("\x61\156\137\x68\x61\163\x5f\144\x65\143\157\165\160\x61\x67\145\x2e\x64\x65\x62\x75\164" => "\x64\145\142\165\x74"), array("\141\x6e\137\150\x61\x73\x5f\144\x65\x63\157\x75\x70\141\x67\x65\56\x66\x69\156" => "\x66\x69\x6e"), array("\141\x6e\x5f\x68\x61\163\x5f\144\145\143\157\x75\x70\x61\x67\x65\56\143\x72\145\x61\x74\x65\x64" => "\143\162\145\141\x74\x65\x64")), array("\x61\x6e\56\163\x74\141\164\165\x73" => 0), array("\x64\145\x63\157\x75\x70\x61\147\145" => array("\x69\156\x6e\145\162" => array("\x64\x65\x63\157\165\x70\141\x67\145", "\151\144")), "\x61\156" => array("\151\x6e\x6e\x65\162" => array("\x61\x6e", "\x69\144")))); goto WoBaW; hCCYF: $d = array(); goto XTP3a; ax3G3: } public function get_decoupages() { goto mhvfa; pz_zg: if (!empty($dec)) { $d = $dec; } goto qOyC5; qOyC5: return $d; goto DEVrR; mhvfa: $d = false; goto u2QIx; u2QIx: $dec = $this->mydb->gets("\141\x6e\x5f\x68\141\163\137\144\x65\x63\157\165\x70\x61\x67\145", array(array("\144\145\143\x6f\x75\160\141\147\145\x2e\x69\x64" => "\151\x64"), array("\x64\145\x63\x6f\165\160\x61\147\x65\56\156\157\155" => "\156\157\x6d"), array("\141\x6e\x5f\150\x61\163\137\x64\x65\143\157\x75\160\x61\147\145\x2e\x64\145\x62\x75\x74" => "\144\x65\x62\165\164"), array("\141\x6e\137\x68\x61\163\x5f\x64\145\143\x6f\x75\160\141\147\145\x2e\x66\x69\156" => "\x66\151\x6e"), array("\141\156\x5f\150\x61\x73\x5f\144\145\x63\x6f\165\x70\x61\x67\145\x2e\x63\162\x65\x61\x74\x65\x64" => "\143\x72\145\141\164\x65\x64")), array("\141\156\x2e\163\x74\x61\164\165\x73" => 0), array("\144\145\143\157\165\160\141\147\145" => array("\x69\x6e\156\145\162" => array("\144\145\143\157\165\160\141\147\145", "\151\x64")), "\141\156" => array("\151\156\x6e\145\162" => array("\141\156", "\x69\x64")))); goto pz_zg; DEVrR: } public function check_an_exam_list($show_all = false) { goto affFc; VYyrS: $an = $this->get_current_an(); goto nQcmO; affFc: $d = array(); goto VYyrS; nQcmO: if (!empty($an)) { $exam = $this->mydb->custom_get("\x53\x45\114\x45\x43\x54\40\x63\154\x61\x73\163\145\56\x69\144\40\x41\123\x20\151\144\54\40\x63\154\141\x73\x73\145\x5f\x69\x6e\151\x74\56\156\x6f\x6d\40\101\x53\40\156\x6f\x6d\x2c\40\x63\154\141\163\x73\x65\137\151\x6e\151\164\56\x69\144\40\101\123\40\x63\154\163\137\151\144\x2c\x20\x63\x6c\141\x73\163\x65\x5f\151\156\x69\164\56\x6e\x69\166\x65\x61\x75\x20\x41\x53\40\x6e\151\x76\x65\141\x75\137\x69\144\54\40\143\x6c\x61\x73\x73\x65\137\x73\x65\162\151\145\56\151\x64\40\x41\x53\40\163\x65\162\x69\x65\x5f\x69\144\54\40\143\154\x61\x73\163\145\137\163\x65\x72\x69\145\x2e\x6e\157\x6d\40\101\123\x20\x73\145\x72\151\145\54\40\x63\154\141\x73\163\x65\56\x63\x6c\141\x73\163\145\x5f\166\x61\x72\x69\141\156\x74\x20\x41\x53\40\x76\141\x72\x69\141\x6e\x74\x2c\x20\50\x53\105\114\105\103\x54\40\103\117\125\116\x54\50\x2a\x29\x20\101\123\x20\156\142\x20\x46\122\x4f\x4d\40\145\x78\x61\x6d\145\x6e\137\160\x61\163\163\40\x57\x48\x45\x52\105\40\143\154\141\x73\163\145\56\151\x64\x3d\x65\x78\141\x6d\145\x6e\x5f\x70\x61\163\x73\56\x63\x6c\141\163\163\x65\40\x41\116\x44\x20\x65\x78\141\155\145\x6e\x5f\x70\141\163\163\56\x61\156\75\77\x29\40\x41\123\40\x6e\142\x20\106\x52\117\x4d\40\x63\154\x61\163\x73\x65\x5f\x69\x6e\151\x74\x20\111\116\x4e\105\x52\x20\112\x4f\111\x4e\x20\x63\154\x61\163\x73\x65\40\x4f\x4e\40\x63\x6c\x61\163\x73\145\137\x69\x6e\x69\x74\x2e\151\x64\x3d\x63\x6c\141\163\163\145\x2e\143\x6c\141\x73\x73\x65\x5f\x69\x6e\x69\x74\40\111\116\x4e\x45\122\x20\x4a\x4f\x49\x4e\x20\x6e\151\166\x65\141\x75\40\117\116\x20\143\x6c\x61\163\163\x65\137\x69\x6e\151\164\56\156\x69\166\145\141\165\x3d\156\151\166\145\141\165\56\x69\144\x20\x4c\x45\106\124\x20\112\x4f\x49\116\40\143\x6c\x61\163\x73\x65\137\163\x65\x72\x69\x65\x20\117\x4e\40\x63\154\141\x73\163\145\x2e\x63\154\x61\163\163\145\137\163\145\162\151\x65\x3d\143\x6c\x61\163\163\145\x5f\163\145\162\151\x65\56\x69\144\40\x57\110\x45\x52\x45\40\143\154\141\163\x73\145\x5f\151\x6e\151\x74\56\x73\x74\x61\164\x75\x73\x3d\x3f\x20\x41\116\104\40\x63\x6c\141\163\x73\145\x5f\x69\156\151\x74\56\151\x64\40\111\116\40\x28\x3f\x2c\x3f\x2c\77\54\x3f\51", array($an->id, 0, 7, 11, 13, 14)); if (!empty($exam)) { foreach ($exam as $e) { goto IQxS2; oIppi: if ($show_all) { goto oT6Dz; oT6Dz: $e->classe = $this->CI->cls->get_class_name($e->nom, $e->id, $e->cls_id, $e->niveau_id, $e->serie, $e->serie_id, $e->variant); goto tcj05; ULRQM: continue; goto ftLaY; tcj05: array_push($d, $e); goto ULRQM; ftLaY: } goto WIYQ5; WIYQ5: if ($e->nb == 0) { $e->classe = $this->CI->cls->get_class_name($e->nom, $e->id, $e->cls_id, $e->niveau_id, $e->serie, $e->serie_id, $e->variant); array_push($d, $e); } goto LPiPY; IQxS2: $e->nb = intval($e->nb); goto oIppi; LPiPY: } } } goto bYunv; bYunv: return $d; goto ExRCW; ExRCW: } public function clos() { goto jkmb1; xZInJ: if (!empty($an)) { goto YRL2M; YRL2M: $id = $an->id; goto c9PX1; c9PX1: $this->mydb->update($this->ahd, array("\163\x74\x61\x74\165\163" => 1), array("\141\x6e" => $id)); goto sMJFV; sMJFV: $this->mydb->update($this->table, array("\163\x74\x61\164\165\163" => 1), array("\x69\144" => $id)); goto ik3qN; ik3qN: } goto dvnGe; Hz9J1: $an = $this->get_current_an(); goto xZInJ; jkmb1: $d = false; goto Hz9J1; dvnGe: return $d; goto cepC_; cepC_: } public function set_decoupage($periode, $debut, $fin, $edit) { goto ox0Xp; NJij1: return $d; goto t8chl; ox0Xp: $d = array("\145\x72\x72\x6f\x72" => true); goto BE7B3; f7bQm: if (!empty($edit)) { $done = $this->mydb->update($this->ahd, $req, array("\x69\144" => $edit)); if ($done) { $d["\x65\162\162\x6f\x72"] = false; $d["\x64\x61\164\x61"] = $edit; } else { $d["\145\162\x6d\x73\147"] = "\x55\156\145\x20\x65\x72\x72\145\x75\162\x20\163\47\145\163\x74\40\160\162\157\144\x75\x69\164\145"; } } else { goto nG3d4; Bp00U: if ($done) { $d["\x65\162\162\157\x72"] = false; $d["\x64\x61\164\x61"] = $done; } else { $d["\x65\x72\155\163\147"] = "\125\156\145\x20\145\162\162\x65\x75\162\40\x73\x27\x65\x73\x74\40\160\162\x6f\144\165\151\164\x65"; } goto muX3L; nG3d4: $req["\x69\144\137" . $this->ahd] = 0; goto T13L7; Iy9Yf: $req["\143\x72\145\141\164\x65\144"] = $this->date; goto JDN6G; nd43f: $req["\163\164\x61\164\x75\163"] = 0; goto Iy9Yf; T13L7: $req["\141\156"] = $an->id; goto nd43f; JDN6G: $done = $this->mydb->set($this->ahd, $req); goto Bp00U; muX3L: } goto NJij1; XWbsk: $req = array("\144\x65\x63\157\x75\160\141\x67\145" => $periode, "\x64\145\x62\x75\x74" => $debut, "\146\x69\x6e" => $fin, "\163\171\x6e\x63\150\162\x6f\x6e\x69\172\x65\144" => 0, "\155\157\x64\151\x66\x69\145\x64" => $this->date); goto f7bQm; HD18Y: $check = $this->check_decoupage($an->id, $periode, $edit); goto oJxwr; oJxwr: if ($check) { $d["\x65\x72\155\x73\147"] = "\103\x65\x74\164\x65\x20\x70\303\xa9\162\x69\157\144\x65\x20\x65\170\x69\163\164\145\40\144\303\xa9\152\303\240\40\x70\x6f\x75\162\x20\143\145\x74\x74\145\x20\141\156\x6e\xc3\251\145"; return $d; } goto XWbsk; Igqvk: if (empty($an)) { $d["\145\x72\x6d\163\147"] = "\x41\165\x63\165\156\x65\x20\141\143\x61\144\303\xa9\x6d\x69\161\165\x65\40\145\x6e\x20\143\x6f\165\162\x73"; return $d; } goto HD18Y; BE7B3: $an = $this->get_current_an(); goto Igqvk; t8chl: } public function set_decoupage_niveau(array $niveau, $id) { goto dzIxd; dzIxd: $an = $this->get_current_an()->id; goto gp4Lq; gp4Lq: $dn = $this->mydb->gets($this->nd, array("\x6e\151\x76\145\141\165"), array("\x64\145\x63\157\165\x70\x61\147\x65" => $id, "\141\x6e" => $an)); goto wEQ59; wEQ59: if (!empty($dn)) { goto X6KuS; g62hS: $to_remove = array_diff($dns, $niveau); goto O35a_; DJ0Dd: $to_add = array_diff($niveau, $dns); goto tEcBH; tEcBH: $this->set_niveau_decoupage($an, $to_add, $id); goto g62hS; X6KuS: $dns = array(); goto rydJH; O35a_: $this->remove_niveau_decoupage($to_remove, $id, $an); goto c6tZN; rydJH: foreach ($dn as $d) { array_push($dns, $d->niveau); } goto DJ0Dd; c6tZN: } else { $this->set_niveau_decoupage($an, $niveau, $id); } goto OlR1O; OlR1O: } private function set_niveau_decoupage($an, $niveau, $id) { if (!empty($niveau)) { foreach ($niveau as $n) { $this->mydb->set($this->nd, array("\x61\x6e" => $an, "\x6e\151\166\145\x61\165" => $n, "\144\145\143\x6f\165\160\141\147\x65" => $id)); } } } private function remove_niveau_decoupage($data, $id, $an) { if (!empty($data)) { $params = set_params($data); $this->mydb->custom_req("\x44\x45\x4c\x45\x54\105\x20\106\122\x4f\115\40" . $this->nd . "\x20\x57\x48\x45\122\x45\40\144\145\143\157\x75\160\141\147\145\40\75\x20{$id}\x20\101\x4e\104\40\x61\x6e\40\x3d\x20{$an}\40\101\x4e\104\40\156\x69\166\145\141\165\x20\111\116\40\x28{$params}\x29", $data); } } private function check_decoupage($an, $periode, $edit) { goto tvy32; oUrva: $where = array("\141\156" => $an, "\144\x65\143\x6f\165\160\141\147\145" => $periode); goto k_jDi; YrC1_: $check = $this->mydb->count($this->ahd, $where); goto puHLj; k_jDi: if ($edit != false) { $where["\x69\144"] = array("\74\76" => $edit); } goto YrC1_; MPRT8: return $d; goto y6YHO; tvy32: $d = false; goto oUrva; puHLj: if (!empty($check)) { $d = true; } goto MPRT8; y6YHO: } }
