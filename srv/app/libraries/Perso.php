<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:17              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\x42\101\x53\105\x50\101\x54\x48") or exit("\x4e\157\x20\144\151\x72\x65\143\x74\40\163\143\x72\151\x70\x74\40\x61\x63\143\145\163\x73\x20\141\154\154\x6f\x77\x65\144"); class Perso { protected $CI; private $table; private $mydb; private $phr; private $phm; private $cls; private $mats; private $phs; private $utils; private $sessions; private $paie; private $mdate; private $as; private $ds; private $id; public function __construct() { goto gIxPp; gIxPp: $this->CI =& get_instance(); goto eBAbR; dIQhH: $this->phm = "\160\x72\x6f\x66\x5f\150\x61\163\x5f\155\x61\x74"; goto sUSVq; EMxWN: $this->phr = "\x70\x65\162\163\x6f\x6e\156\145\x6c\x5f\150\141\163\x5f\162\157\154\145"; goto dIQhH; nFjxl: $this->paie = "\x70\141\x69\145"; goto eaFcn; FmAOR: $this->cls =& $this->CI->cls; goto CTZVW; eaFcn: $this->as = "\160\145\162\x73\157\156\156\x65\154\x5f\x61\166\141\156\x63\x65\x5f\163\141\x6c\x61\x69\162\145"; goto kNbVy; VF0j6: $this->id = $this->CI->session->userdata("\x69\144"); goto AP1nH; oLImP: $this->table = "\160\145\x72\x73\157\x6e\x6e\145\154"; goto EMxWN; CTZVW: $this->mats =& $this->CI->mats; goto tTQBE; eBAbR: $this->mydb =& $this->CI->mydb; goto FmAOR; H25qb: $this->session =& $this->CI->session; goto oLImP; Zw0VV: $this->mdate = gmdate("\x59\x2d\155\55\144\40\x48\72\151\x3a\163"); goto VF0j6; kNbVy: $this->ds = "\x70\145\x72\x73\157\x6e\x6e\145\x6c\x5f\144\x65\144\165\x63\164\x69\157\156\137\x73\141\154\141\151\162\x65"; goto Zw0VV; sUSVq: $this->phs = "\x70\x65\x72\163\157\x6e\x6e\145\154\x5f\x68\x61\163\137\x73\x61\154\141\x69\162\145"; goto nFjxl; tTQBE: $this->utils =& $this->CI->utilitaire; goto H25qb; AP1nH: } public function get_roles() { goto TTwZB; h4NSh: $roles = $this->mydb->gets("\x72\x6f\x6c\145\163"); goto I_HYF; PNVzt: return $d; goto audqd; TTwZB: $d = array(); goto h4NSh; I_HYF: if (!empty($roles)) { $d = $roles; } goto PNVzt; audqd: } public function get_role_id($name) { goto oRjES; P876c: $rl = $this->mydb->get("\162\x6f\154\145\163", array("\151\144"), array("\156\157\x6d" => $name)); goto W0oYL; HWhQw: return $d; goto DGUaY; W0oYL: if (!empty($rl)) { $d = $rl->id; } goto HWhQw; oRjES: $d = false; goto P876c; DGUaY: } public function get_perso_roles($id) { goto AetK2; nndIa: $roles = $this->mydb->gets($this->phr, array(array("\x72\x6f\154\145\x73\x2e\151\144" => "\x69\x64"), array("\x72\157\154\145\163\x2e\x6e\x6f\x6d" => "\x6e\157\x6d")), array($this->phr . "\x2e\x70\145\x72\163\157\156\x6e\145\154" => $id), array("\x72\157\154\x65\163" => array("\x69\156\156\145\162" => array("\162\x6f\154\145", "\x69\x64")))); goto sRZr4; P63Hu: return $d; goto hEpEe; AetK2: $d = array(); goto nndIa; sRZr4: if (!empty($roles)) { foreach ($roles as $r) { array_push($d, $r->nom); } } goto P63Hu; hEpEe: } public function liste() { goto bKZ5Y; l76cv: $join = array(); goto NsetS; pe6Ne: $perso = $this->mydb->gets($this->table, '', $where, $join, $orderby); goto lKC9v; sdO01: return $d; goto tw7Zm; JFkQ_: $where = array("\160\145\162\163\157\156\x6e\145\154\x2e\x73\x74\x61\164\x75\163" => 0); goto l76cv; lKC9v: if (!empty($perso)) { goto MW3i4; KLYqz: foreach ($perso as $p) { goto D9t5B; sUseO: array_push($data, $p); goto n_4ii; N972E: $rls_id = array(); goto YxBiw; YxBiw: if (!empty($roles)) { foreach ($roles as $r) { array_push($rls, $r->nom); array_push($rls_id, $r->id); } } goto ya849; D9t5B: $roles = $this->mydb->gets($this->phr, array(array("\x72\x6f\x6c\x65\163\x2e\151\x64" => "\x69\x64"), array("\162\157\x6c\145\163\x2e\156\x6f\x6d" => "\156\157\155")), array("\x70\145\x72\x73\157\x6e\156\145\154\137\150\141\x73\x5f\x72\x6f\x6c\x65\x2e\160\145\x72\x73\157\x6e\x6e\145\x6c" => $p->id), array("\162\x6f\x6c\145\x73" => array("\151\x6e\x6e\145\162" => array("\162\157\154\x65", "\151\144")))); goto xFb2u; fUMbX: $p->rls = $rls_id; goto sUseO; xFb2u: $rls = array(); goto N972E; ya849: $p->roles = $rls; goto fUMbX; n_4ii: } goto IQ1a9; IQ1a9: $d = $data; goto ck1vH; MW3i4: $data = array(); goto KLYqz; ck1vH: } goto sdO01; NsetS: $orderby = array("\x70\145\162\x73\x6f\x6e\156\x65\x6c\x2e\156\x6f\x6d" => "\x41\x53\x43"); goto pe6Ne; bKZ5Y: $d = array(); goto JFkQ_; tw7Zm: } public function gets() { goto H8FID; hGY3A: if (!empty($perso)) { goto crLiS; RXhi_: $d["\x70\x65\x72\x73\x6f"] = $data; goto iYwPX; Z9M6Y: foreach ($perso as $p) { goto kQEfN; nKUm1: $rls_id = array(); goto l08fW; l08fW: if (!empty($roles)) { foreach ($roles as $r) { array_push($rls, $r->nom); array_push($rls_id, $r->id); } } goto K3oxx; QzYj1: array_push($data, $p); goto qo36f; kQEfN: $roles = $this->mydb->gets($this->phr, array(array("\x72\157\154\145\163\56\151\144" => "\151\x64"), array("\162\157\154\145\x73\56\x6e\157\x6d" => "\x6e\157\155")), array("\x70\145\162\163\157\x6e\x6e\x65\x6c\137\150\x61\x73\x5f\x72\x6f\x6c\x65\56\160\145\162\x73\x6f\156\156\x65\154" => $p->id), array("\162\157\154\x65\x73" => array("\x69\x6e\156\145\x72" => array("\x72\x6f\x6c\145", "\x69\x64")))); goto rGWUf; K3oxx: $p->roles = $rls; goto Id0c3; rGWUf: $rls = array(); goto nKUm1; Id0c3: $p->rls = $rls_id; goto QzYj1; qo36f: } goto RXhi_; crLiS: $data = array(); goto Z9M6Y; iYwPX: } goto BVAEJ; w4AfK: $page = pager($count); goto yiNTZ; H8FID: $d = array(); goto gTj_n; daY0D: $d["\145\160\x70"] = $page->epp; goto twNYp; lVmM4: $perso = $this->mydb->gets($this->table, '', $where, $join, $orderby, $limit); goto hGY3A; k_6Qc: $d["\143\165\162\x72\145\x6e\164"] = $page->current; goto BbyJP; S9dPu: $limit = array($page->start, $page->epp); goto lVmM4; twNYp: $orderby = array("\x70\x65\162\x73\x6f\x6e\x6e\145\x6c\56\x6e\157\x6d" => "\x41\x53\x43"); goto S9dPu; gTj_n: $where = array("\x70\145\x72\x73\157\x6e\156\x65\x6c\56\163\164\141\x74\165\x73" => 0); goto sh5UE; BbyJP: $d["\x74\157\164\x61\154"] = $count; goto daY0D; slKJb: $count = $this->mydb->count($this->table, $where, $join); goto w4AfK; yiNTZ: $d["\x6e\x62\160\x61\x67\145\163"] = $page->nbpages; goto k_6Qc; BVAEJ: return $d; goto K0fek; sh5UE: $join = array(); goto slKJb; K0fek: } public function get_profs() { goto adSAk; HS872: $orderby = array("\160\145\162\163\157\156\x6e\x65\x6c\x2e\x6e\x6f\155" => "\x41\123\103"); goto HKPUk; XLNd7: $d["\x63\165\162\x72\x65\x6e\x74"] = $page->current; goto mtrM2; KFSfU: $d["\x65\160\x70"] = $page->epp; goto HS872; hylw5: return $d; goto hUfDi; mtrM2: $d["\x74\157\164\x61\154"] = $count; goto KFSfU; amsOo: $count = $this->mydb->count($this->table, $where, $join); goto kHbZ4; kHbZ4: $page = pager($count); goto QZ0LM; adSAk: $d = array(); goto Iu3eL; pMxro: $d["\160\145\x72\x73\157"] = $this->mydb->gets($this->table, $req, $where, $join, $orderby, $limit); goto hylw5; HKPUk: $limit = array($page->start, $page->epp); goto zbAg4; QZ0LM: $d["\x6e\x62\160\x61\147\x65\x73"] = $page->nbpages; goto XLNd7; zbAg4: $req = array(array("\160\145\x72\x73\157\x6e\156\x65\154\x2e\x69\144" => "\151\x64"), array("\160\x65\162\x73\x6f\156\156\x65\x6c\x2e\x63\x69\166\x69\154\151\x74\145" => "\x63\151\166\x69\x6c\x69\164\x65"), array("\x70\x65\162\163\157\156\x6e\145\154\x2e\x6e\157\155" => "\156\x6f\155"), array("\x70\145\162\x73\x6f\x6e\x6e\145\x6c\x2e\160\162\x65\x6e\x6f\155\163" => "\x70\x72\145\x6e\157\x6d\163"), array("\x70\x65\162\163\157\156\156\145\x6c\56\x73\145\170\x65" => "\x73\145\x78\x65"), array("\x70\x65\162\x73\157\x6e\x6e\x65\154\56\x63\157\x6e\x74\x61\143\x74" => "\143\x6f\x6e\164\141\143\x74")); goto pMxro; Iu3eL: $where = array("\x72\157\154\145\x73\x2e\151\x64" => 1, "\x72\x6f\154\145\163\56\x73\x74\x61\164\165\x73" => 0, "\x70\x65\x72\x73\x6f\156\156\145\154\56\163\x74\x61\164\x75\163" => 0); goto xwVfx; xwVfx: $join = array("\x70\x65\x72\x73\157\x6e\156\145\x6c\137\150\141\x73\137\x72\x6f\154\145" => array("\151\156\156\x65\162" => array("\x69\144", "\x70\x65\x72\x73\157\156\x6e\145\x6c")), "\x72\157\x6c\x65\x73" => array("\x69\x6e\156\x65\162" => array("\x70\x65\x72\x73\157\156\156\145\154\x5f\150\x61\x73\x5f\162\157\x6c\145\x2e\162\x6f\154\x65", "\151\144"))); goto amsOo; hUfDi: } public function get($id) { goto vvU1M; Jxsbs: if (!empty($perso)) { goto Ko08V; Ko08V: $perso->name = ucfirst($perso->civilite) . "\40" . ucfirst($perso->nom) . "\x20" . ucfirst($perso->prenoms); goto Qnjeo; wChuU: $d = $perso; goto IjIgw; Qnjeo: $roles = $this->mydb->gets($this->phr, array("\162\x6f\154\x65"), array("\x70\x65\162\163\x6f\x6e\x6e\145\x6c" => $id)); goto Ccjvl; Ccjvl: if (!empty($roles)) { goto g6odC; jT1Jy: $perso->roles = $rls; goto W73hx; g6odC: $rls = array(); goto YIkYQ; YIkYQ: foreach ($roles as $rl) { array_push($rls, $rl->role); } goto jT1Jy; W73hx: } goto wChuU; IjIgw: } goto vq3e0; xdn6h: $perso = $this->mydb->get($this->table, '', array("\x69\x64" => $id)); goto Jxsbs; vvU1M: $d = false; goto xdn6h; vq3e0: return $d; goto qjqza; qjqza: } public function get_prof_classes($id) { goto yHB6f; ijQm3: $cls = $this->mydb->gets("\x63\154\x61\163\x73\x65\x5f\150\x61\163\x5f\x6d\141\164", array(array("\104\x49\x53\x54\x49\x4e\103\x54\50\x63\x6c\141\163\x73\x65\51" => "\143\x6c\x73")), $where, $join); goto hSTxv; fPzqb: return $d; goto BAzwR; yHB6f: $d = array(); goto idVXH; idVXH: $where = array("\143\154\141\163\163\x65\x5f\x68\x61\x73\x5f\155\x61\x74\56\x70\145\x72\163\x6f\156\156\145\154" => $id); goto mIktS; hSTxv: if (!empty($cls)) { foreach ($cls as $c) { goto cIvTV; Mpk9w: $c->nom = $name->nom; goto lbmG4; cIvTV: $name = $this->cls->get($c->cls); goto Mpk9w; Ti0vc: if (!empty($mats)) { $c->subjects = $mats; } else { $c->subjects = array(); } goto NjTFJ; NjTFJ: array_push($d, $c); goto MH0Ki; lbmG4: $mats = $this->mydb->gets("\143\x6c\x61\163\163\x65\137\150\141\163\137\155\141\x74", array(array("\155\141\164\151\x65\162\x65\56\x6e\x6f\x6d\x5f\x63\x6f\x75\162\164" => "\156\157\155\x5f\143\157\165\x72\x74"), array("\x6d\141\x74\151\x65\x72\145\56\156\x6f\x6d\137\x6c\x6f\x6e\147" => "\x6e\x6f\155\137\154\157\156\147")), array("\x63\x6c\x61\x73\163\x65\x5f\150\x61\163\x5f\155\141\164\x2e\x63\154\x61\x73\163\x65" => $c->cls, "\x63\x6c\x61\163\163\x65\137\x68\141\163\137\155\141\x74\56\x70\x65\162\x73\157\x6e\156\145\154" => $id, "\143\x6c\x61\x73\163\x65\137\150\141\x73\137\155\141\x74\x2e\x73\164\141\x74\x75\163" => 0, "\155\x61\x74\x69\145\x72\x65\56\163\164\x61\x74\x75\x73" => 0), array("\155\141\164\151\x65\162\x65" => array("\151\x6e\156\x65\x72" => array("\x6d\141\164\151\145\x72\x65", "\151\x64")))); goto Ti0vc; MH0Ki: } } goto fPzqb; mIktS: $join = array("\x63\154\x61\163\163\145" => array("\151\x6e\x6e\x65\162" => array("\x63\x6c\x61\163\163\x65", "\151\x64"))); goto ijQm3; BAzwR: } public function is_prof($id) { goto kbFPG; C8HMl: $check = $this->mydb->count($this->phr, array("\162\157\154\x65" => 1, "\x73\164\x61\x74\x75\163" => 0)); goto xpW86; kbFPG: $d = false; goto C8HMl; xpW86: if (!empty($check)) { $d = true; } goto BdGjQ; BdGjQ: return $d; goto rh_UW; rh_UW: } public function get_perso_sal() { goto GV54S; GV54S: $d = array(); goto lR5WL; lR5WL: $liste = $this->liste(); goto dR1j1; hW_BK: return $d; goto XSsIj; dR1j1: if (!empty($liste)) { foreach ($liste as $l) { goto pQ_Rd; pQ_Rd: $sal = $this->mydb->get($this->phs, '', array("\x70\145\x72\x73\x6f\x6e\x6e\x65\x6c" => $l->id)); goto v3HXH; E4cfk: array_push($d, $l); goto Nje2E; v3HXH: if (!empty($sal)) { goto I0tsf; I0tsf: $l->is_salaire = true; goto KyvUF; KyvUF: $l->montant = $sal->montant; goto EdRyy; EdRyy: $l->prime = $sal->prime; goto hU_Ob; hU_Ob: } else { $l->montant = ''; $l->prime = ''; } goto E4cfk; Nje2E: } } goto hW_BK; XSsIj: } public function get_perso_session_sal() { goto Vh8Rv; Vh8Rv: $d = array(); goto yd9lL; QAzIv: $data = $this->session->userdata("\x64\x61\x74\141"); goto WffE9; yd9lL: $mois = $this->session->userdata("\155\157\x69\163"); goto QAzIv; WffE9: if (!empty($mois) && !empty($data)) { goto IH7bQ; vh679: $d["\155\163"] = $mois; goto NJp_R; IaHAN: $eq = eqmonths(); goto J7o1D; i3PwX: $d["\x64\141\164\141"] = $dts; goto w18i8; hIJiU: foreach ($data["\x6d\157\156\x74\x61\156\x74"] as $key => $dt) { goto lybT8; eRB5r: $i->prix = $dt; goto QYbDg; XjQlV: $i = new stdClass(); goto kBeXF; lcVVd: $avs = $this->get_perso_month_avance($key, $mois); goto k4CEN; k4CEN: $des = $this->get_perso_month_deduction($key, $mois); goto vEetZ; vEetZ: $i->retenu = $avs + $des; goto B0ZkC; lybT8: $p = $this->get($key); goto XjQlV; KypwF: $i->name = $p->civilite . "\x20" . ucfirst($p->nom) . "\40" . ucfirst($p->prenoms); goto eRB5r; QYbDg: $i->heure = $data["\x73\x61\x6c"][$key]; goto yWhUf; yWhUf: $i->prime = $data["\x70\x72\x69\x6d\x65"][$key]; goto E4qAa; E4qAa: $i->montant = $data["\163\x6f\x6d\x6d\x65"][$key]; goto lcVVd; kBeXF: $i->id = $key; goto KypwF; B0ZkC: array_push($dts, $i); goto cQP9q; cQP9q: } goto i3PwX; NJp_R: $dts = array(); goto hIJiU; IH7bQ: $ms = $mois . "\x2d\x30\x31"; goto RuF23; RuF23: $m = month_name($ms); goto IaHAN; J7o1D: $d["\x6d\157\x69\x73"] = $eq[$m]; goto vh679; w18i8: } goto Uvf11; Uvf11: return $d; goto sNDt0; sNDt0: } public function get_months_range() { goto wMEur; wMEur: $d = array(); goto SGeTe; aYZpC: if (!empty($an)) { goto nTHIh; v5s05: if (!empty($months)) { foreach ($months as $key => $m) { $vrf = $this->mydb->count($this->paie, array("\155\157\151\163" => $key)); if ($vrf == 0) { $d[$key] = $m; } } } goto kByMl; xQVov: $start = str2mysqlshortdate($deb); goto F945w; F945w: $months = month_range_names($start, $end, true); goto v5s05; M8WZJ: $deb = $an->debut; goto xQVov; nTHIh: $end = gmdate("\131\55\x6d\x2d\x64"); goto M8WZJ; kByMl: } goto aUO5a; SGeTe: $an = $this->utils->get_an(); goto aYZpC; aUO5a: return $d; goto WB6d6; WB6d6: } public function get_salaire_session() { goto AsnsP; b3SoS: $d["\144\x61\164\141"] = $data; goto E96fg; AsnsP: $mois = $this->session->userdata("\x6d\x6f\x69\163"); goto QrcYA; E96fg: return $d; goto rC2jt; mCsOD: $d["\155\157\151\163"] = $mois; goto b3SoS; QrcYA: $data = $this->session->userdata("\144\141\x74\x61"); goto mCsOD; rC2jt: } public function get_salaires() { goto dogLW; Fn91Q: $count = $this->mydb->count($this->paie, $where); goto F3ij6; nQPZY: $where = array(); goto GYfRF; I29yF: $orderby = array("\160\x61\151\x65\x2e\x69\144" => "\104\x45\x53\x43"); goto Ce3PO; dogLW: $d = array(); goto nQPZY; ut0rI: return $d; goto Dvg72; pmBU8: $sal = $this->mydb->gets($this->paie, $req, $where, $join, $orderby, $limit); goto yQjZE; UvYP1: $d["\145\160\160"] = $page->epp; goto I29yF; F3ij6: $page = pager($count); goto pFlLl; o3Fnm: $req = array(array("\160\141\x69\x65\56\151\144" => "\151\144"), array("\x70\141\151\x65\x2e\x6d\157\x69\x73" => "\x6d\157\x69\x73"), array("\x70\141\151\x65\x2e\144\165\162\x65\x65" => "\144\x75\162\x65\145"), array("\160\141\x69\145\x2e\x6d\x6f\x6e\164\141\156\164" => "\155\157\x6e\164\141\156\164"), array("\160\x61\151\145\56\160\x72\x69\155\145" => "\160\x72\x69\x6d\145"), array("\160\x61\x69\145\56\162\145\164\x65\x6e\165" => "\x72\x65\164\x65\156\x75"), array("\160\x65\162\163\x6f\x6e\x6e\x65\154\x2e\151\144" => "\x70\x65\x72\163\157\x6e\156\145\x6c"), array("\x70\145\162\163\x6f\x6e\x6e\145\154\56\x63\151\166\x69\x6c\151\x74\145" => "\x63\151\x76\x69\154\x69\x74\x65"), array("\x70\145\162\x73\157\156\x6e\145\x6c\x2e\156\157\155" => "\x6e\157\155"), array("\160\x65\162\163\157\x6e\x6e\145\154\x2e\160\x72\145\156\157\x6d\163" => "\160\x72\x65\156\157\155\163"), array("\160\145\x72\163\157\x6e\156\145\x6c\56\x73\145\170\x65" => "\163\145\x78\145")); goto pmBU8; po7w2: $d["\143\165\162\162\x65\x6e\164"] = $page->current; goto OarvJ; yQjZE: if (!empty($sal)) { goto lcIyE; lREIv: foreach ($sal as $s) { goto Movew; WbiWW: $annee = explode("\55", $s->mois)[0]; goto iBsFA; Movew: $mois = month_name($s->mois . "\x2d\60\61"); goto iANVy; oDZSQ: array_push($data, $s); goto vB1_5; TxyQ6: $s->roles = $this->get_perso_roles($s->personnel); goto oDZSQ; XqTXE: $s->name = $s->civilite . "\x20" . ucfirst($s->nom) . "\40" . ucfirst($s->prenoms); goto TxyQ6; iANVy: $eq = eqmonths(); goto WbiWW; iBsFA: $s->mois = $eq[$mois] . "\40" . $annee; goto XqTXE; vB1_5: } goto ac6gk; lcIyE: $data = array(); goto lREIv; ac6gk: $d["\x73\x61\154\x61\151\x72\145\163"] = $data; goto VMQUB; VMQUB: } goto ut0rI; OarvJ: $d["\164\x6f\x74\x61\154"] = $count; goto UvYP1; GYfRF: $join = array("\160\145\162\163\157\156\x6e\x65\x6c" => array("\151\x6e\x6e\x65\162" => array("\160\145\162\163\x6f\156\x6e\x65\154", "\x69\144"))); goto Fn91Q; pFlLl: $d["\156\x62\160\141\147\145\163"] = $page->nbpages; goto po7w2; Ce3PO: $limit = array($page->start, $page->epp); goto o3Fnm; Dvg72: } public function is_avance_valid($id, $montant = 0) { goto EmLb3; r8Ri1: $sal = $this->mydb->get($this->as, array(array("\123\x55\115\x28\x6d\157\x6e\x74\141\156\x74\51" => "\155\x6f\156\164\141\x6e\x74")), array("\160\145\x72\x73\x6f\156\x6e\x65\154" => $id)); goto rIPyI; f9vGL: $max = $this->get_maxperso_salaire($id); goto yhtEd; rIPyI: if (!empty($sal)) { $s = intval($sal->montant) - $montant; if ($s <= $sm) { $d = $sm - $s; } } goto FjNjm; BDQkH: $ret = $this->get_perso_month_deduction($id, $month); goto ouXrw; EmLb3: $d = false; goto f9vGL; FjNjm: return $d; goto K0_mI; I3Dne: $month = gmdate("\x59\x2d\155"); goto BDQkH; ouXrw: $sm = $sm - $ret; goto r8Ri1; yhtEd: if (!empty($max)) { $sm = intval($max) * 0.75; } else { $sm = 0; } goto I3Dne; K0_mI: } public function is_deduction_valid($id, $montant = 0) { goto NZQZX; HL1yW: if (!empty($sal)) { $s = intval($sal->montant) - $montant; if ($s <= $sm) { $d = $sm - $s; } } goto AKI13; yWWzp: if (!empty($max)) { $sm = intval($max) * 0.75; } else { $sm = 0; } goto Ypbyf; E25oE: $max = $this->get_maxperso_salaire($id); goto yWWzp; NZQZX: $d = false; goto E25oE; AKI13: return $d; goto ZMu8u; OhsIM: $ret = $this->get_perso_month_avance($id, $month); goto OnTWZ; Ypbyf: $month = gmdate("\131\x2d\155"); goto OhsIM; tt2kY: $sal = $this->mydb->get($this->ds, array(array("\123\125\x4d\x28\155\157\156\x74\x61\156\164\51" => "\155\157\156\164\141\156\164")), array("\160\x65\x72\x73\157\x6e\156\x65\x6c" => $id)); goto HL1yW; OnTWZ: $sm = $sm - $ret; goto tt2kY; ZMu8u: } public function get_maxperso_salaire($id) { goto UKps2; ojr4b: if (!empty($sal)) { $d = $sal->montant; } goto mFWuq; UKps2: $d = 0; goto wI660; mFWuq: return $d; goto AVBeJ; wI660: $sal = $this->mydb->get($this->paie, array(array("\115\x41\x58\x28\x6d\157\156\164\141\x6e\x74\x29" => "\155\x6f\x6e\164\141\x6e\164")), array("\x70\x65\162\x73\157\x6e\156\x65\154" => $id)); goto ojr4b; AVBeJ: } public function get_perso_avance_salaire($id) { goto nZ0Lx; nZ0Lx: $d = false; goto h3RC9; WQOr6: return $d; goto U0K7V; EZrbM: if (!empty($as)) { $as->name = $as->civilite . "\x20" . $as->nom . "\x20" . $as->prenoms; $d = $as; } goto WQOr6; h3RC9: $as = $this->mydb->get($this->as, array(array("\160\x65\162\163\157\156\156\x65\154\x5f\x61\x76\141\156\x63\145\x5f\x73\141\x6c\x61\151\x72\145\56\x69\144" => "\151\x64"), array("\160\x65\162\163\157\156\156\x65\154\137\x61\166\141\156\143\x65\137\163\141\x6c\141\151\x72\145\56\x75\x73\145\162" => "\165\163\145\x72"), array("\160\x65\162\x73\x6f\x6e\156\145\x6c\137\141\x76\x61\x6e\x63\x65\137\x73\x61\x6c\141\x69\x72\145\x2e\x6d\157\x74\151\146" => "\155\x6f\164\151\146"), array("\160\x65\162\163\x6f\x6e\156\145\x6c\x5f\141\x76\x61\x6e\x63\x65\x5f\163\141\154\x61\x69\162\x65\x2e\x6d\x6f\156\164\x61\x6e\164" => "\155\157\x6e\x74\x61\x6e\164"), array("\x70\x65\162\163\157\156\156\x65\x6c\137\141\166\x61\156\x63\x65\x5f\x73\x61\154\x61\x69\x72\x65\56\x70\x65\162\163\x6f\x6e\x6e\x65\154" => "\160\145\162\163\157\x6e\x6e\145\154"), array("\x70\x65\x72\163\x6f\x6e\x6e\145\x6c\56\x63\151\166\151\x6c\151\x74\x65" => "\143\x69\166\151\154\x69\164\x65"), array("\160\145\162\x73\157\x6e\156\145\154\56\156\157\155" => "\156\x6f\x6d"), array("\160\x65\162\163\x6f\x6e\156\145\154\x2e\160\162\x65\156\157\x6d\163" => "\x70\x72\145\x6e\157\x6d\163"), array("\160\x65\162\163\157\156\x6e\x65\x6c\56\163\x65\x78\145" => "\x73\145\x78\145")), array("\160\x65\x72\x73\157\x6e\x6e\x65\154\137\141\166\141\156\x63\x65\137\x73\x61\154\x61\151\162\x65\x2e\x69\x64" => $id), array("\x70\145\x72\163\x6f\x6e\156\x65\154" => array("\151\x6e\156\x65\162" => array("\x70\x65\162\x73\x6f\x6e\x6e\x65\154", "\151\x64")))); goto EZrbM; U0K7V: } public function get_perso_month_avance($id, $month) { goto W9yaZ; KBfd0: return $d; goto H6rs0; ylOJa: if (!empty($as)) { $d = $as->montant; } goto KBfd0; W9yaZ: $d = 0; goto PvpFx; PvpFx: $as = $this->mydb->get($this->as, array(array("\123\125\115\50\x6d\157\156\164\141\156\x74\x29" => "\x6d\157\x6e\164\141\x6e\164")), array("\160\145\162\163\x6f\x6e\156\145\x6c" => $id, "\x6d\157\x69\x73" => $month)); goto ylOJa; H6rs0: } public function get_perso_deduction_salaire($id) { goto DyzG9; hW0Ye: $ds = $this->mydb->get($this->ds, array(array("\160\x65\162\163\x6f\156\156\145\x6c\137\x64\x65\x64\x75\x63\x74\151\x6f\156\137\x73\x61\x6c\141\x69\x72\x65\56\151\x64" => "\x69\x64"), array("\160\x65\x72\x73\157\x6e\x6e\145\x6c\x5f\144\x65\x64\165\x63\x74\x69\x6f\x6e\x5f\x73\141\x6c\141\x69\x72\x65\x2e\165\x73\x65\162" => "\x75\x73\145\x72"), array("\160\145\162\163\x6f\x6e\x6e\145\154\137\144\x65\x64\165\143\164\151\157\156\x5f\163\141\154\141\x69\x72\x65\56\x6d\x6f\x74\151\146" => "\155\157\x74\x69\x66"), array("\160\x65\x72\x73\x6f\x6e\x6e\145\154\x5f\144\145\x64\165\x63\x74\x69\x6f\x6e\x5f\163\x61\x6c\141\x69\162\x65\x2e\155\x6f\156\164\141\x6e\164" => "\155\x6f\x6e\x74\141\156\x74"), array("\x70\145\x72\x73\x6f\x6e\x6e\145\x6c\x5f\x64\145\x64\x75\143\x74\x69\x6f\156\137\163\141\x6c\141\151\162\x65\56\160\145\x72\x73\x6f\156\x6e\145\x6c" => "\x70\x65\x72\x73\157\156\x6e\x65\154"), array("\x70\x65\x72\163\x6f\156\156\x65\154\x2e\x63\x69\x76\x69\x6c\151\x74\x65" => "\x63\151\166\x69\154\x69\x74\x65"), array("\x70\x65\162\x73\157\156\x6e\x65\154\56\156\x6f\x6d" => "\x6e\x6f\155"), array("\x70\145\x72\x73\157\156\x6e\x65\x6c\x2e\160\x72\145\156\157\155\x73" => "\x70\x72\x65\156\157\x6d\163"), array("\x70\145\x72\x73\157\156\x6e\145\154\x2e\x73\145\x78\145" => "\x73\x65\x78\145")), array("\160\x65\x72\163\x6f\x6e\156\x65\154\137\x64\x65\144\x75\143\164\x69\x6f\156\x5f\x73\x61\x6c\141\151\162\145\x2e\151\144" => $id), array("\160\145\x72\163\x6f\156\156\145\x6c" => array("\x69\156\x6e\145\162" => array("\160\145\x72\x73\x6f\x6e\x6e\145\x6c", "\x69\144")))); goto bcyg0; bcyg0: if (!empty($ds)) { $ds->name = $ds->civilite . "\x20" . $ds->nom . "\x20" . $ds->prenoms; $d = $ds; } goto Tq_WV; Tq_WV: return $d; goto mhiOo; DyzG9: $d = false; goto hW0Ye; mhiOo: } public function get_avances_salaire() { goto qi7yE; Y5Xu7: $page = pager($count); goto K9o37; rxfKi: $join = array("\160\x65\x72\163\157\x6e\x6e\x65\154" => array("\x69\156\156\x65\x72" => array("\x70\x65\162\163\x6f\156\x6e\x65\x6c", "\151\144"))); goto XRnJ9; kDCtf: $d["\145\160\x70"] = $page->epp; goto GNaIr; qi7yE: $d = array(); goto I4kt9; fK2xj: $d["\x74\x6f\x74\141\x6c"] = $count; goto kDCtf; aJu6_: $req = array(array("\x70\145\162\163\x6f\x6e\x6e\145\x6c\x5f\141\x76\x61\156\143\145\137\163\x61\154\141\x69\162\x65\56\x69\x64" => "\151\x64"), array("\160\x65\x72\163\157\x6e\x6e\145\x6c\x5f\141\166\x61\x6e\x63\x65\137\163\141\x6c\x61\151\x72\x65\x2e\155\157\x74\151\x66" => "\155\x6f\164\x69\146"), array("\160\145\x72\x73\157\156\156\x65\154\x5f\x61\166\x61\156\x63\145\137\x73\x61\154\141\x69\x72\x65\x2e\155\157\156\164\x61\x6e\x74" => "\x6d\x6f\x6e\x74\x61\156\164"), array("\160\145\162\163\x6f\156\x6e\x65\x6c\137\x61\x76\141\x6e\143\145\137\x73\141\x6c\141\151\162\145\56\x6d\x6f\144\x69\x66\x69\x65\144" => "\x64\141\x74\145"), array("\x70\x65\x72\x73\157\156\x6e\x65\x6c\56\x63\x69\166\151\x6c\151\164\145" => "\x63\x69\166\x69\x6c\x69\164\x65"), array("\160\145\x72\163\x6f\156\x6e\145\154\56\156\157\x6d" => "\x6e\x6f\155"), array("\160\x65\162\163\157\x6e\x6e\x65\x6c\x2e\160\x72\x65\156\157\x6d\163" => "\x70\x72\x65\156\x6f\155\x73"), array("\x70\x65\162\x73\157\x6e\156\145\x6c\56\156\157\x6d\137\152\x65\165\x6e\x65\x5f\x66\151\x6c\154\145" => "\x6e\x6f\x6d\x5f\152\x65\165\x6e\145\137\146\151\154\x6c\x65"), array("\160\145\162\163\157\156\x6e\x65\154\x2e\x73\145\x78\145" => "\x73\x65\170\x65"), array("\160\x65\162\163\157\x6e\x6e\x65\154\x2e\151\144" => "\x70\x65\162\163\157\156\156\145\154")); goto C7e0w; ISb3q: return $d; goto S0AV0; I4kt9: $where = array(); goto rxfKi; GNaIr: $orderby = array("\160\x65\x72\x73\157\x6e\156\x65\154\x5f\141\x76\x61\x6e\143\x65\137\x73\141\x6c\x61\x69\x72\x65\56\151\144" => "\x44\x45\x53\x43"); goto yCMKX; mstEJ: $d["\x63\x75\x72\162\145\x6e\x74"] = $page->current; goto fK2xj; C7e0w: $as = $this->mydb->gets($this->as, $req, $where, $join, $orderby, $limit); goto zIC_B; yCMKX: $limit = array($page->start, $page->epp); goto aJu6_; XRnJ9: $count = $this->mydb->count($this->as, $where, $join); goto Y5Xu7; K9o37: $d["\156\142\x70\x61\147\x65\x73"] = $page->nbpages; goto mstEJ; zIC_B: if (!empty($as)) { goto qKoYn; qKoYn: $data = array(); goto dXCTZ; p0j_I: $d["\x61\x76\141\156\143\145"] = $data; goto Xs7PA; dXCTZ: foreach ($as as $a) { $a->name = $a->civilite . "\x20" . $a->nom . "\x20" . $a->prenoms; array_push($data, $a); } goto p0j_I; Xs7PA: } goto ISb3q; S0AV0: } public function get_deductions_salaire() { goto DDgZ5; jl3eC: $d["\x63\165\x72\x72\x65\156\164"] = $page->current; goto iybAs; yqy0a: $d["\x65\160\x70"] = $page->epp; goto F_0ON; OsTBo: $req = array(array("\160\x65\162\163\x6f\x6e\156\x65\x6c\x5f\x64\145\x64\x75\143\x74\151\x6f\x6e\137\x73\141\x6c\141\x69\x72\x65\x2e\151\144" => "\151\x64"), array("\160\145\162\x73\157\x6e\156\145\154\137\144\x65\x64\165\143\x74\151\x6f\156\137\163\141\154\x61\151\162\x65\x2e\x6d\157\164\151\146" => "\155\157\164\x69\x66"), array("\160\x65\162\163\157\x6e\x6e\x65\154\137\144\x65\144\x75\x63\x74\151\157\x6e\137\x73\141\x6c\141\151\162\145\56\155\157\x6e\164\141\156\x74" => "\x6d\157\156\164\141\156\164"), array("\x70\x65\162\x73\x6f\x6e\156\145\154\137\144\145\x64\165\x63\164\x69\157\156\x5f\163\x61\154\x61\x69\162\145\x2e\x6d\x6f\x64\x69\x66\151\x65\x64" => "\x64\141\164\145"), array("\x70\145\162\x73\x6f\x6e\156\x65\x6c\56\x63\x69\x76\x69\x6c\151\x74\145" => "\x63\x69\166\x69\154\x69\x74\145"), array("\160\x65\162\163\x6f\156\x6e\145\x6c\x2e\x6e\157\x6d" => "\x6e\157\155"), array("\x70\x65\162\x73\x6f\x6e\x6e\145\154\56\x70\x72\145\x6e\x6f\155\163" => "\160\x72\145\x6e\x6f\155\x73"), array("\x70\x65\162\x73\157\x6e\x6e\x65\154\x2e\x6e\157\155\137\x6a\x65\165\156\x65\x5f\146\151\x6c\x6c\x65" => "\x6e\x6f\155\137\152\145\165\x6e\x65\x5f\146\151\154\154\145"), array("\160\145\162\163\x6f\x6e\x6e\x65\154\x2e\x73\145\170\145" => "\x73\x65\x78\x65"), array("\x70\145\x72\163\x6f\156\156\x65\x6c\x2e\151\x64" => "\x70\145\x72\163\157\156\156\145\x6c")); goto Wi31U; F_0ON: $orderby = array("\x70\x65\x72\163\157\156\x6e\x65\x6c\137\x64\145\x64\165\143\164\151\x6f\x6e\137\x73\x61\154\x61\x69\x72\145\56\151\144" => "\104\x45\123\x43"); goto uZFup; iybAs: $d["\164\157\x74\x61\x6c"] = $count; goto yqy0a; vUgJf: $where = array(); goto vMU4h; csj_R: if (!empty($ds)) { goto Ab5a8; GZvas: $d["\x64\145\x64\165\x63\164\x69\x6f\x6e"] = $data; goto ImH_1; Ab5a8: $data = array(); goto b9whg; b9whg: foreach ($ds as $a) { $a->name = $a->civilite . "\40" . $a->nom . "\x20" . $a->prenoms; array_push($data, $a); } goto GZvas; ImH_1: } goto QiTQq; uZFup: $limit = array($page->start, $page->epp); goto OsTBo; nAA46: $page = pager($count); goto a3CE9; QiTQq: return $d; goto YtSgf; DDgZ5: $d = array(); goto vUgJf; vMU4h: $join = array("\160\x65\162\x73\x6f\156\156\145\154" => array("\x69\x6e\x6e\145\162" => array("\x70\145\162\x73\157\x6e\156\x65\154", "\x69\x64"))); goto TraM5; TraM5: $count = $this->mydb->count($this->ds, $where, $join); goto nAA46; Wi31U: $ds = $this->mydb->gets($this->ds, $req, $where, $join, $orderby, $limit); goto csj_R; a3CE9: $d["\x6e\142\160\x61\147\x65\163"] = $page->nbpages; goto jl3eC; YtSgf: } public function get_perso_month_deduction($id, $month) { goto xtQAE; QvVzt: if (!empty($ds)) { $d = $ds->montant; } goto PQHdq; bevsk: $ds = $this->mydb->get($this->ds, array(array("\x53\x55\x4d\50\x6d\x6f\156\164\x61\156\164\51" => "\x6d\157\x6e\164\x61\156\x74")), array("\x70\145\162\x73\157\156\156\145\x6c" => $id, "\155\157\x69\x73" => $month)); goto QvVzt; xtQAE: $d = 0; goto bevsk; PQHdq: return $d; goto nswT1; nswT1: } public function get_prof_mat_id($id, $mat) { goto cgtYc; UgN0s: if (!empty($matid)) { $d = $matid->id; } goto K6ZzS; RYv5V: $matid = $this->mydb->get($this->phm, array("\151\144"), array("\160\145\162\x73\x6f\x6e\156\145\154" => $id, "\155\141\164\151\x65\162\x65" => $mat)); goto UgN0s; cgtYc: $d = false; goto RYv5V; K6ZzS: return $d; goto L1phx; L1phx: } public function set($civilite, $nom, $prenoms, $nom_jeune_fille, $sexe, $date_naissance, $situation_familliale, $nationalite, $niveau_etude, $dernier_diplome, $annee_diplome, $ets_diplome, $autres_competences, $type_contrat, $contact, $ville, $quartier, $debut_contrat, $fin_contrat, $date_embauche, $date, $edit) { goto mJfxl; mJfxl: $d["\x65\x72\162\157\x72"] = true; goto jTsrO; gRGtr: if ($edit == false) { goto o8cIR; XMMKp: if ($done) { $id = $done; } goto l25AX; phx3Z: $done = $this->mydb->set($this->table, $req); goto XMMKp; o8cIR: $req["\143\x72\x65\141\x74\x65\144"] = $dte; goto phx3Z; l25AX: } else { $done = $this->mydb->update($this->table, $req, array("\151\x64" => $edit)); if ($done) { $id = $edit; } } goto Z72PG; bI_pL: return $d; goto ovo2y; jTsrO: $dte = dte2mysql($date); goto KKxAg; KKxAg: $req = array("\x75\x73\145\162" => $this->id, "\143\x69\x76\x69\x6c\x69\x74\x65" => $civilite, "\x6e\157\155" => $nom, "\160\x72\145\x6e\157\x6d\163" => $prenoms, "\156\x6f\x6d\x5f\x6a\145\x75\156\x65\137\x66\x69\x6c\154\x65" => $nom_jeune_fille, "\x73\x65\170\x65" => $sexe, "\x73\x69\164\x75\x61\164\151\157\x6e\137\x66\x61\x6d\x69\x6c\154\151\141\154\x65" => $situation_familliale, "\x64\x61\164\x65\x5f\156\x61\151\x73\x73\x61\x6e\143\x65" => $date_naissance, "\156\x61\164\151\157\x6e\141\x6c\x69\x74\145" => $nationalite, "\166\x69\x6c\x6c\145" => $ville, "\161\165\141\x72\164\x69\x65\162" => $quartier, "\143\x6f\x6e\164\141\143\x74" => $contact, "\156\151\x76\x65\x61\x75\x5f\145\164\165\144\x65" => $niveau_etude, "\144\x65\162\x6e\x69\x65\162\x5f\x64\x69\x70\x6c\x6f\x6d\145" => $dernier_diplome, "\141\156\156\145\145\x5f\144\x69\x70\154\157\x6d\145" => $annee_diplome, "\145\x74\163\137\x64\151\x70\154\157\155\x65" => $ets_diplome, "\x61\165\164\x72\x65\x73\x5f\143\157\155\x70\145\x74\145\156\x63\145\163" => $autres_competences, "\164\x79\160\x65\x5f\x63\157\x6e\x74\x72\141\x74" => $type_contrat, "\x64\x65\x62\165\164\137\x63\157\x6e\x74\x72\141\164" => $debut_contrat, "\146\x69\156\137\x63\157\156\164\162\141\x74" => $fin_contrat, "\x64\x61\x74\145\x5f\x65\155\x62\x61\165\x63\150\x65" => $date_embauche, "\155\157\x64\151\146\151\145\144" => $dte); goto gRGtr; Z72PG: if (isset($id)) { $d["\x65\x72\162\x6f\x72"] = false; $d["\144\141\164\x61"] = $id; } else { $d["\x65\x72\x6d\163\147"] = common_sql_error(); } goto bI_pL; ovo2y: } public function set_roles($roles, $id) { if (!empty($roles)) { goto gKI6N; rh328: if (!empty($orgs)) { goto Ajq1F; Mg3d3: $this->remove_user_roles($to_remove, $id); goto Gsfa3; Ajq1F: $to_add = array_diff($roles, $orgs); goto klRT3; klRT3: $this->add_user_roles($to_add, $id); goto gLfSn; gLfSn: $to_remove = array_diff($orgs, $roles); goto Mg3d3; Gsfa3: } else { $this->add_user_roles($roles, $id); } goto eKVdl; fHBDZ: if (!empty($org)) { foreach ($org as $o) { array_push($orgs, $o->role); } } goto rh328; VVWZP: $orgs = array(); goto fHBDZ; gKI6N: $rls = $roles; goto p8j8S; p8j8S: $org = $this->mydb->gets($this->phr, array("\162\157\x6c\x65"), array("\160\x65\162\x73\157\x6e\156\145\x6c" => $id)); goto VVWZP; eKVdl: } } public function set_prof_mats($mats, $id) { if (!empty($mats)) { return $this->add_prof_mats($mats, $id); } } public function set_prof_sal($mois, $duree, $prime, $retenu, $montant) { goto D_ABY; gozgK: if (!empty($an)) { foreach ($montant as $key => $m) { goto iltED; Z2XV1: $vrf = $this->mydb->get($this->paie, '', $where); goto dPMU8; dPMU8: if (!empty($vrf)) { $req["\x6d\x6f\x64\x69\x66\x69\x65\144"] = $this->mdate; $this->mydb->update($this->paie, $req, array("\151\144" => $vrf->id)); } else { $this->mydb->set($this->paie, $req); } goto wqZzu; iltED: $req = array("\165\163\145\162" => $this->id, "\x61\x6e" => $an->id, "\160\145\x72\163\157\x6e\156\145\154" => $key, "\155\x6f\151\x73" => $mois, "\144\165\162\x65\145" => $duree[$key], "\x6d\157\156\164\141\156\164" => $m, "\160\x72\x69\155\145" => $prime[$key], "\x72\145\164\x65\x6e\165" => $retenu[$key]); goto yGFXm; yGFXm: $where = array("\141\156" => $an->id, "\155\x6f\151\x73" => $mois, "\160\x65\162\163\x6f\156\x6e\x65\154" => $key); goto Z2XV1; wqZzu: } $d["\x65\x72\162\x6f\x72"] = false; } else { $d["\x65\162\155\x73\147"] = "\x4c\47\x61\x6e\x6e\xc3\251\x65\40\163\143\157\x6c\x61\x69\162\x65\40\156\x27\145\163\x74\40\160\x61\x73\40\x64\xc3\xa9\146\x69\x6e\x69\145"; } goto KWeiD; D_ABY: $d["\145\x72\162\157\162"] = true; goto DX2Ks; KWeiD: return $d; goto ArnYe; DX2Ks: $an = $this->utils->get_an(); goto gozgK; ArnYe: } public function set_salaire_session($mois, $data) { goto xl1Gu; escol: if (!empty($mois) && !empty($data)) { goto uM4cA; JJ1Wx: $d["\145\x72\162\x6f\162"] = false; goto NH51K; y40Nu: $this->session->set_userdata($array); goto JJ1Wx; uM4cA: $array = array("\x6d\157\151\163" => $mois, "\144\x61\164\141" => $data); goto y40Nu; NH51K: } else { $d["\145\x72\155\x73\x67"] = "\x4c\x65\163\40\144\157\x6e\156\303\xa9\x65\163\40\156\145\x20\x73\157\156\x74\x20\160\141\163\x20\143\x6f\162\x72\145\143\164\x65\x73"; } goto CO8Rz; xl1Gu: $d["\x65\x72\x72\x6f\162"] = true; goto escol; CO8Rz: return $d; goto Dn46f; Dn46f: } public function set_avance_salaire($id, $motif, $montant, $edit = false) { goto irHWT; Ak3Tq: return $d; goto wR1vK; liobG: if (!empty($an)) { goto TpDTk; hff3T: if ($edit == false) { goto JJgp9; JJgp9: $req["\x6d\x6f\151\163"] = gmdate("\131\55\155"); goto exSSF; exSSF: $done = $this->mydb->set($this->as, $req); goto kYbkz; kYbkz: if ($done) { $idd = $done; } goto X4pLo; X4pLo: } else { $done = $this->mydb->update($this->as, $req, array("\x69\144" => $edit)); if ($done) { $idd = $edit; } } goto qiedY; TpDTk: $req = array("\165\163\x65\x72" => $this->id, "\141\156" => $an->id, "\160\145\162\x73\157\156\156\145\x6c" => $id, "\x6d\157\164\151\x66" => $motif, "\155\x6f\x6e\164\x61\x6e\x74" => $montant, "\155\x6f\144\x69\x66\151\x65\144" => $this->mdate); goto hff3T; qiedY: if (isset($idd)) { $d["\x65\162\162\x6f\x72"] = false; $d["\144\141\x74\x61"] = $idd; } else { $d["\x65\162\155\163\x67"] = common_sql_error(); } goto BxFSZ; BxFSZ: } else { $d["\x65\162\155\x73\147"] = "\x4c\47\141\156\156\303\xa9\x65\x20\163\x63\157\x6c\x61\151\162\x65\x20\x6e\x27\x65\163\x74\x20\160\x61\163\x20\144\303\xa9\146\x69\156\151\145"; } goto Ak3Tq; irHWT: $d["\x65\162\162\157\x72"] = true; goto DGEKN; DGEKN: $an = $this->utils->get_an(); goto liobG; wR1vK: } public function set_deduction_salaire($id, $motif, $montant, $edit = false) { goto uGWzw; H8tMJ: if (!empty($an)) { goto MsWMy; MsWMy: $req = array("\165\x73\x65\x72" => $this->id, "\x61\156" => $an->id, "\160\x65\162\x73\x6f\x6e\156\x65\154" => $id, "\155\x6f\x74\x69\x66" => $motif, "\155\157\156\x74\x61\156\x74" => $montant, "\x6d\157\144\x69\x66\x69\145\x64" => $this->mdate); goto nYsvS; nYsvS: if ($edit == false) { goto I1fWc; I1fWc: $req["\155\x6f\151\x73"] = gmdate("\x59\x2d\x6d"); goto MdiPm; C3he4: if ($done) { $idd = $done; } goto HUFsG; MdiPm: $done = $this->mydb->set($this->ds, $req); goto C3he4; HUFsG: } else { $done = $this->mydb->update($this->ds, $req, array("\x69\144" => $edit)); if ($done) { $idd = $edit; } } goto ogIjv; ogIjv: if (isset($idd)) { $d["\145\162\x72\x6f\x72"] = false; $d["\x64\141\x74\x61"] = $idd; } else { $d["\145\x72\155\163\147"] = common_sql_error(); } goto k708O; k708O: } else { $d["\145\x72\155\x73\x67"] = "\x4c\47\x61\x6e\156\303\xa9\145\40\x73\x63\157\x6c\141\151\162\x65\x20\x6e\47\x65\163\164\x20\x70\141\x73\x20\x64\xc3\251\146\x69\x6e\x69\145"; } goto G7gfA; uGWzw: $d["\x65\162\x72\x6f\162"] = true; goto gwydI; G7gfA: return $d; goto W2bZi; gwydI: $an = $this->utils->get_an(); goto H8tMJ; W2bZi: } public function delete_session_salaire() { $this->session->unset_userdata("\x6d\157\x69\x73"); $this->session->unset_userdata("\x64\x61\x74\141"); } public function delete($id) { goto gYoiy; rqIbS: $check = $this->check_usage_classe($id); goto U2KPS; gYoiy: $d = false; goto rqIbS; U2KPS: $where = array("\x69\144" => $id); goto OooTQ; j2n1G: return $d; goto QsyLw; OooTQ: if ($check == false) { goto B8Tcs; HodcN: $diff = time() - $time; goto fluxF; B8Tcs: $p = $this->get($id); goto pKHQU; fluxF: if ($diff > 3600 * 24 * 90) { $d = $this->mydb->update($this->table, array("\x73\164\x61\164\165\163" => 1), $where); } else { $this->delete_prof_classe($id); $d = $this->mydb->delete($this->table, $where); } goto N2H1p; pKHQU: $time = strtotime($p->created); goto HodcN; N2H1p: } else { $d = $this->mydb->update($this->table, array("\163\164\141\x74\165\x73" => 1), $where); } goto j2n1G; QsyLw: } public function delete_prof_has_mat($id, $mat) { goto lHuo_; dJp1i: return $d; goto Zx5P3; E3iq9: if ($check == false) { $d = $this->mydb->delete($this->phm, $where); } else { $d = $this->mydb->update($this->phm, $where); } goto dJp1i; IlZ7Y: $where = array("\160\x65\162\163\157\x6e\x6e\x65\x6c" => $id, "\x6d\141\x74\151\145\x72\x65" => $mat); goto E3iq9; lHuo_: $check = $this->check_mat_note($id, $mat); goto IlZ7Y; Zx5P3: } private function add_user_roles($roles, $id) { if (!empty($roles)) { foreach ($roles as $role) { $this->mydb->set($this->phr, array("\x75\x73\x65\x72" => $this->id, "\x70\145\162\163\x6f\x6e\x6e\x65\x6c" => $id, "\162\x6f\x6c\145" => $role)); } } } private function remove_user_roles($roles, $id) { if (!empty($roles)) { $params = set_params($roles); return $this->mydb->custom_req("\104\x45\x4c\105\x54\x45\x20\106\x52\x4f\115\40\160\145\x72\163\157\x6e\156\x65\154\x5f\x68\x61\163\x5f\x72\157\x6c\145\x20\127\110\x45\122\x45\x20\x70\145\162\163\157\x6e\x6e\145\x6c\40\75\40{$id}\40\101\x4e\x44\x20\162\157\154\x65\x20\x49\116\40\x28{$params}\51", $roles); } } private function add_prof_mats($mats, $id) { if (!empty($mats)) { foreach ($mats as $m) { $this->mydb->set($this->phm, array("\x75\163\x65\162" => $this->id, "\x70\145\x72\163\x6f\x6e\x6e\x65\154" => $id, "\155\141\x74\151\x65\x72\145" => $m)); } } } private function remove_prof_mats($mats, $id) { if (!empty($mats)) { $params = set_params($mats); return $this->mydb->custom_req("\104\105\x4c\x45\x54\x45\40\106\x52\x4f\x4d\x20\160\162\157\x66\137\x68\x61\x73\x5f\x6d\141\164\x20\127\x48\105\x52\x45\x20\160\x65\x72\x73\x6f\156\x6e\x65\154\40\x3d\40{$id}\x20\x41\x4e\x44\x20\155\x61\x74\x69\145\162\145\x20\x49\x4e\x20\x28{$params}\x29", $mats); } } private function check_usage_classe($id) { goto puKBM; puKBM: $d = false; goto qngE4; CVhSz: return $d; goto utUbf; zRxGt: if (!empty($check)) { $d = true; } goto CVhSz; qngE4: $check = $this->mydb->count("\x63\154\x61\x73\x73\145\137\150\x61\163\137\155\141\x74", array("\x70\x65\x72\163\157\x6e\x6e\x65\x6c" => $id)); goto zRxGt; utUbf: } private function delete_prof_classe($id) { return $this->mydb->delete("\x70\x72\157\146\x5f\x68\141\163\137\155\x61\x74", array("\160\x65\162\163\157\156\156\x65\154" => $id)); } private function check_mat_note($id, $mat) { goto KI3yF; VMQMY: return $d; goto cj6rF; ii3gJ: if (!empty($check)) { $d = true; } goto VMQMY; Dwef6: $check = $this->mydb->count("\156\157\164\145", array("\143\x6c\x61\x73\x73\145\x5f\150\x61\163\137\155\141\x74\x2e\160\x65\162\x73\157\x6e\156\145\154" => $id, "\156\x6f\x74\145\x2e\155\141\164\151\145\x72\x65" => $mat), array("\143\x6c\141\163\163\145\x5f\x68\x61\163\137\155\x61\x74" => array("\x69\156\156\x65\162" => array("\143\x6c\x61\x73\163\x65", "\143\x6c\x61\163\163\x65")))); goto ii3gJ; KI3yF: $d = false; goto Dwef6; cj6rF: } }
