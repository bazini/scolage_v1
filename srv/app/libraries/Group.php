<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:18              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\x42\x41\123\105\120\101\124\x48") or exit("\x4e\157\40\x64\151\x72\145\143\x74\40\163\x63\162\x69\x70\164\x20\x61\x63\x63\145\x73\x73\40\141\x6c\154\157\167\145\x64"); class Group { protected $CI; private $mydb; private $table; private $utg; public function __construct() { goto k97Ed; zncA4: $this->table = "\x67\x72\157\x75\160\163"; goto SX2O8; k97Ed: $this->CI =& get_instance(); goto vNq8g; SX2O8: $this->utg = "\x75\x73\x65\162\137\x74\x6f\x5f\x67\162\157\165\160"; goto CrGVf; vNq8g: $this->mydb =& $this->CI->mydb; goto zncA4; CrGVf: } public function get($id) { goto oFWkC; oFWkC: if (intval($id) !== 0) { $where["\151\x64"] = $id; } else { $where["\156\141\x6d\145"] = $id; } goto PYM5g; pIjFf: return $d; goto KrqfP; P0aN4: if (!empty($d)) { $d->users = $this->mydb->gets($this->utg, array(array("\x75\163\x65\x72\x73\56\151\x64" => "\151\144"), "\156\x61\155\145", "\x65\x6d\141\151\x6c", "\163\145\170\x65", "\x6e\x6f\x6d", "\160\x72\145\156\157\155\163", "\142\x61\x6e\x6e\145\x64"), array("\165\x73\x65\x72\137\164\x6f\x5f\147\162\157\x75\160\56\147\x72\x6f\165\160\x5f\x69\x64" => $d->id), array("\x75\163\145\162\163" => array("\x69\x6e\x6e\x65\162" => array("\165\163\145\162\137\x69\x64", "\x69\144")))); } goto pIjFf; PYM5g: $d = $this->mydb->get($this->table, '', $where); goto P0aN4; KrqfP: } public function gets() { goto Ilzny; eZ7gK: return $d; goto KcbxX; Ilzny: $d = false; goto EG8yd; s753Y: if (!empty($groups)) { goto CBH91; Ac3Ck: foreach ($groups as $g) { $g->users = $this->mydb->gets($this->utg, array(array("\165\x73\x65\162\163\x2e\x69\144" => "\x69\144"), "\156\x61\x6d\x65", "\145\x6d\141\x69\x6c", "\x73\145\x78\x65", "\156\x6f\155", "\x70\x72\145\156\157\x6d\163", "\x62\141\156\x6e\x65\144"), array("\x75\x73\145\162\137\164\x6f\x5f\147\x72\157\165\x70\x2e\147\162\157\x75\160\x5f\151\144" => $g->id), array("\165\163\x65\162\163" => array("\151\156\x6e\x65\x72" => array("\165\163\x65\162\137\x69\x64", "\151\144")))); array_push($data, $g); } goto JvCr2; CBH91: $data = array(); goto Ac3Ck; JvCr2: $d = $data; goto zgD7x; zgD7x: } goto eZ7gK; EG8yd: $groups = $this->mydb->gets($this->table); goto s753Y; KcbxX: } public function get_user_groups($id = false) { goto tjL_K; oZPUU: if ($id == false) { $id = $this->session->userdata("\151\144"); } goto Z3ELs; Z3ELs: $perm = $this->mydb->get($this->utg, '', array("\165\163\145\x72\137\x69\144" => $id), array("\147\x72\x6f\165\160\163" => array("\x69\x6e\156\145\x72" => array("\x67\x72\x6f\x75\160\x5f\x69\144", "\151\144"))), array("\x67\162\x6f\x75\x70\137\151\x64" => "\101\123\x43")); goto AoL3v; AoL3v: if (!empty($perm)) { $d = $perm; } goto O2jCi; O2jCi: return $d; goto EYzys; tjL_K: $d = false; goto oZPUU; EYzys: } public function is_member($user, $group) { goto xBbB1; zlb0i: return $d; goto iyUoQ; J4uWT: if ($res > 0) { $d = true; } goto zlb0i; xBbB1: $d = false; goto og9_z; HpcTi: $res = $this->mydb->count($this->utg, array("\x75\163\x65\x72\137\151\144" => $user, "\147\x72\157\x75\x70\137\151\144" => $group_id)); goto J4uWT; og9_z: if (intval($group) !== 0) { $group_id = $group; } else { $group_id = $this->getid($group); } goto HpcTi; iyUoQ: } public function group_exist($name, $id = false) { goto cTOCf; CPVYX: if ($id != false) { $where["\x69\144"] = array("\x3c\x3e" => $id); } goto QnKdv; KH6M1: if (!empty($group)) { $d = $group; } goto ESJkT; cTOCf: $d = false; goto fNqQA; ESJkT: return $d; goto IaNXi; QnKdv: $group = $this->mydb->get($this->table, '', $where); goto KH6M1; fNqQA: $where["\x6e\141\x6d\x65"] = $name; goto CPVYX; IaNXi: } public function set($name, $def = '') { return $this->mydb->set($this->table, array("\156\141\155\145" => $name, "\144\x65\146\151\x6e\151\164\x69\157\x6e" => $def)); } public function add_member($user, $group) { if (intval($group) !== 0) { $group_id = $group; } else { $group_id = $this->getid($group); } if ($this->is_member($user, $group_id)) { return true; } else { return $this->mydb->set($this->utg, array("\x75\x73\x65\162\137\x69\x64" => $user, "\x67\x72\x6f\165\160\x5f\x69\x64" => $group_id)); } } public function update_membership($user, $group) { goto B9zzg; CLVyH: if (!empty($group)) { $this->mydb->update($this->utg, array("\x67\162\157\x75\x70\137\x69\x64" => $group_id), array("\x75\163\145\162\137\x69\144" => $user)); } else { $this->add_member($user, $group); } goto KcGNF; W61cz: $group = $this->get_user_groups($user); goto CLVyH; B9zzg: if (intval($group) !== 0) { $group_id = $group; } else { $group_id = $this->getid($group); } goto W61cz; KcGNF: } public function rem_member($user, $group) { if (intval($group) !== 0) { $group_id = $group; } else { $group_id = $this->getid($group); } return $this->mydb->delete($this->utg, array("\165\x73\145\162\x5f\x69\x64" => $user, "\x67\162\x6f\165\160\x5f\151\x64" => $group_id)); } public function update($name, $def, $id) { if (intval($id) !== 0) { $where["\151\x64"] = $id; } else { $where["\156\141\x6d\x65"] = $id; } return $this->mydb->update($this->table, array("\156\141\155\x65" => $name, "\144\145\x66\x69\x6e\151\x74\151\157\156" => $def), $where); } public function delete($id) { goto N_iex; N_iex: if (intval($id) !== 0) { $where["\x69\x64"] = $id; $group_id = $id; } else { $where["\156\141\155\145"] = $id; $group_id = $this->getid($id); } goto fpEmM; EoYef: $this->mydb->delete($this->utg, array("\147\162\x6f\165\x70\137\151\144" => $group_id)); goto i1cAO; fpEmM: $this->mydb->delete("\x70\145\162\x6d\137\x74\157\137\147\162\157\x75\160", array("\147\162\x6f\x75\160\x5f\x69\x64" => $group_id)); goto EoYef; i1cAO: return $this->mydb->delete($this->table, $where); goto yPIcS; yPIcS: } public function getid($name) { goto AWnnR; ddi5d: if (!empty($gid)) { $d = $gid->id; } goto otOwB; otOwB: return $d; goto LJ9PF; z0ew1: $gid = $this->mydb->get($this->table, array("\151\x64"), array("\156\141\x6d\x65" => $name)); goto ddi5d; AWnnR: $d = false; goto z0ew1; LJ9PF: } }
