<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:18              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\x42\101\x53\105\120\101\124\110") or exit("\x4e\x6f\x20\x64\151\162\x65\x63\164\40\x73\143\x72\x69\160\x74\x20\x61\x63\143\145\x73\x73\x20\x61\x6c\154\157\167\145\x64"); class Posts { private $CI; private $mydb; private $table; private $mdate; private $auth; public function __construct() { goto O9zrk; qOWbG: $this->mdate = gmdate("\x59\x2d\155\55\144\40\x48\x3a\x69\x3a\163"); goto b7yT1; U8u5O: $this->auth =& $this->CI->auth; goto Z0_1v; M8PoB: $this->mydb =& $this->CI->mydb; goto U8u5O; Z0_1v: $this->table = "\x70\157\x73\164"; goto qOWbG; O9zrk: $this->CI =& get_instance(); goto M8PoB; b7yT1: } public function get($link, $lang) { goto Yje3I; qA43M: if (!empty($post)) { goto yY89B; DsDUy: if (!isset($post->laune) || empty($post->laune)) { $post->laune = "\x64\x65\x66\x61\165\154\x74\x2e\152\160\x67"; } goto wKE1G; Iz4Nk: if (!isset($post->laune) || empty($post->laune)) { $post->laune = "\x64\x65\146\x61\x75\x6c\x74\56\152\x70\147"; } goto Ea5sR; wKE1G: if ($post->post_type == "\160\157\x73\x74") { $post->cats = $this->mydb->gets("\x63\x61\164\x5f\x68\x61\x73\137\x70\x6f\163\x74", '', array("\160\x6f\x73\164" => $post->idpost), array("\143\x61\x74\x65\x67\x6f\162\171" => array("\151\x6e\156\x65\162" => array("\143\x61\x74", "\143\x61\x74\137\151\x64")))); } goto ID90M; Hy1C5: if ($post->post_type != "\x70\141\x67\x65") { goto zfQdW; lov_C: $post->nbc = count($comments); goto f4CtU; zfQdW: $comments = $this->getcomments($post->idpost); goto lov_C; f4CtU: $post->comments = $comments; goto DNxWJ; DNxWJ: } goto Iz4Nk; yY89B: $meta = $this->mydb->gets("\160\x6f\x73\164\x5f\x6d\x65\x74\141", '', array("\160\157\163\x74" => $post->idpost)); goto kc0Ot; Ea5sR: $d = $post; goto YH_r9; kc0Ot: if (!empty($meta)) { foreach ($meta as $m) { $name = $m->name; $post->{$name} = $m->value; } } goto DsDUy; ID90M: if (is_multilang()) { goto Mta7S; Mta7S: $dl = defaultlang(); goto GF19f; h3B_S: $alts = $this->mydb->gets($this->table, '', $where, $join); goto MrgrM; Vxcvb: if ($post->lang == $dl->idlang) { $where = array("\x6f\162\x69\147\x69\156\x61\x6c\x5f\151\144" => $post->idpost, "\157\x72\x2d\x69\144\x70\x6f\x73\x74" => $post->idpost); } else { $where = array("\x6f\162\151\147\x69\x6e\x61\x6c\x5f\x69\x64" => $post->original_id, "\157\162\x2d\151\144\160\157\x73\164" => $post->original_id); } goto h3B_S; GF19f: $join = array("\154\x61\156\x67\x75\145" => array("\x69\x6e\156\145\x72" => array("\154\x61\156\x67", "\x69\x64\154\x61\156\x67"))); goto Vxcvb; MrgrM: if (!empty($alts)) { goto cWvUW; m5yLi: $post->alternates = $alt; goto F_4Y1; cWvUW: $alt = array(); goto yWYa7; yWYa7: foreach ($alts as $a) { $alt[$a->code] = $a; } goto m5yLi; F_4Y1: } goto ijnx1; ijnx1: } goto Hy1C5; YH_r9: } goto qnRaT; PeCyO: $post = $this->mydb->get($this->table, array("\151\x64\160\x6f\x73\164", "\x74\x69\164\162\x65", "\x6c\x69\x6e\153", "\160\x6f\x73\x74\137\x74\x79\x70\145", "\x63\x6f\x6e\164\x65\156\164", "\143\x61\x74", "\143\157\162\x62", "\x65\x6e\154\x69\x67\156\x65", "\x64\141\164\x65\x5f\x70\157\x73\x74", "\143\x61\x74\x5f\151\x64", "\x63\141\x74\137\156\x61\155\x65", "\x63\x61\164\137\x6c\x69\x6e\x6b", "\143\141\164\x5f\164\171\x70\145", "\x6e\141\155\145", "\x71\164\145", "\160\x6f\x69\x64\163", "\x74\x61\x69\x6c\154\x65", "\164\x76\x61", "\144\141\164\x65\137\x66\x61\142\162\151\143\x61\164\x69\157\x6e", "\144\141\164\x65\x5f\x65\x78\160\151\162\x61\164\151\x6f\156", "\x6c\151\145\x75", "\141\x64\162\145\163\x73\x65", "\160\x6c\x61\143\x65", "\144\141\x74\x65\137\144\x65\142\x75\x74", "\x64\141\x74\x65\137\x66\x69\x6e", "\x68\x65\x75\162\145\137\144\x65\x62\165\x74", "\x68\x65\x75\x72\145\x5f\146\x69\x6e", array("\160\157\x73\x74\56\165\163\x65\x72" => "\x75\163\145\x72"), array("\160\157\163\164\56\154\141\156\x67" => "\x6c\x61\156\147"), array("\x70\x6f\x73\164\56\164\162\x61\x6e\163\154\141\164\x65\x64" => "\164\x72\x61\x6e\163\x6c\141\x74\x65\x64"), array("\160\x6f\x73\x74\x2e\x6f\162\x69\147\151\156\141\x6c\x5f\151\144" => "\x6f\x72\x69\x67\x69\x6e\x61\x6c\x5f\x69\144"), array("\160\157\x73\x74\x2e\x64\141\164\145\x5f\x6d\x6f\144\x69\x66\x69\145\144" => "\144\141\x74\x65\x5f\x6d\157\144\151\146\151\x65\x64"), array("\160\x72\157\x64\165\143\164\x2e\x70\x72\151\170" => "\160\x72\x6f\144\165\x63\x74\137\x70\162\151\170"), array("\x65\x76\145\156\x74\x2e\160\162\151\x78" => "\145\x76\x65\156\x74\x5f\160\x72\x69\170"), array("\165\163\145\x72\x73\x2e\x6e\157\155" => "\x6e\157\155"), array("\x75\163\x65\162\163\56\160\x72\145\x6e\157\155" => "\x70\x72\x65\156\157\x6d"), array("\x6c\141\x6e\147\165\145\56\156\157\155" => "\x6c\141\156\x67\x75\145"), array("\154\x61\x6e\x67\x75\145\x2e\143\157\144\145" => "\143\x6f\x64\x65"), array("\155\x61\x72\x71\x75\145\x2e\x6e\157\155" => "\x6d\x61\x72\x71\x75\145"), array("\x70\x61\171\163\x2e\x6e\x6f\155" => "\160\141\x79\163"), array("\x76\151\x6c\x6c\145\x2e\x6e\x6f\155" => "\x76\151\154\154\x65")), array("\154\151\x6e\x6b" => $link, $this->table . "\56\154\141\x6e\x67" => $lang, $this->table . "\x2e\x65\x6e\x6c\x69\x67\156\x65" => 1, $this->table . "\x2e\143\x6f\x72\x62" => 0), array("\x75\163\x65\x72\163" => array("\151\x6e\156\x65\x72" => array("\x75\163\145\x72", "\151\144")), "\154\x61\x6e\x67\x75\x65" => array("\151\x6e\156\145\162" => array("\154\141\x6e\x67", "\151\x64\154\x61\x6e\x67")), "\x63\141\164\x65\147\x6f\162\171" => array("\154\145\x66\164" => array("\x63\141\164", "\x63\141\x74\x5f\151\144")), "\160\x72\157\144\x75\x63\164" => array("\x6c\x65\x66\164" => array("\151\144\x70\x6f\163\164", "\x70\157\163\x74")), "\x65\x76\x65\156\x74" => array("\x6c\x65\x66\x74" => array("\x69\144\160\157\163\x74", "\160\x6f\x73\164")), "\x6d\x61\162\161\x75\x65" => array("\154\145\146\x74" => array("\x70\162\157\144\165\143\164\56\x6d\141\162\x71\x75\145", "\x69\144\155\141\162\x71\x75\x65")), "\160\x61\171\x73" => array("\x6c\x65\146\164" => array("\x65\x76\145\x6e\164\56\x70\x61\x79\x73", "\151\144\x70\141\171\163")), "\166\x69\x6c\154\145" => array("\154\x65\x66\164" => array("\x65\166\x65\x6e\164\x2e\166\x69\x6c\154\145", "\x69\144\x76\151\154\154\145")))); goto qA43M; qnRaT: return $d; goto toKtH; Yje3I: $d = false; goto PeCyO; toKtH: } public function gets($cat, $type, $lang, $nb = 15) { goto BPh06; Qtlc9: $count = $this->mydb->count($this->table, $where, $join); goto QcVEh; mj6vA: $posts = $this->mydb->gets($this->table, $req, $where, $join, array("\160\157\x73\x74\56\164\x69\x74\162\x65"), array($p->start, $p->epp)); goto X6925; p8YWD: if ($type == "\x70\x6f\x73\x74") { $where["\x63\141\x74\x5f\x68\141\x73\x5f\x70\x6f\x73\164\56\x63\141\x74"] = $cat; } else { $where["\160\x6f\x73\x74\x2e\x63\141\x74"] = $cat; } goto Qtlc9; X6925: if (!empty($posts)) { goto whPFS; W42MS: $d["\160\157\x73\164"] = $data; goto SKY1c; whPFS: $data = array(); goto n0Mt6; wQN2v: $d["\x6e\x62\160\x61\147\145\163"] = $p->nbpages; goto pxOrj; n0Mt6: foreach ($posts as $post) { goto uN5U7; tKlZj: $post->cats = $cts; goto Ubzes; d2Ksb: if (!empty($cats)) { foreach ($cats as $c) { $ct = "\x3c\141\x20\150\162\145\x66\x3d\x22" . site_link("\143\x61\164\145\147\x6f\x72\x79\57" . $c->cat_link) . "\x22\76\74\x73\x70\x61\156\40\x63\x6c\141\163\163\75\42\x74\x61\147\x22\76" . ucfirst(excerpt_title($c->cat_name, 3)) . "\74\57\163\160\x61\x6e\76\74\57\x61\x3e"; if (empty($cts)) { $cts = $ct; } else { $cts .= "\54\x20" . $ct; } } } goto tKlZj; XCp7B: if (!empty($meta)) { foreach ($meta as $m) { $name = $m->name; $post->{$name} = $m->value; } } goto EhuAb; uN5U7: $meta = $this->mydb->gets("\160\157\x73\x74\x5f\155\x65\x74\x61", '', array("\160\x6f\163\x74" => $post->idpost)); goto XCp7B; Fghck: $cts = ''; goto d2Ksb; bexkY: $post->author = ucfirst($post->nom) . "\x20" . ucfirst($post->prenom); goto bneyd; Ubzes: array_push($data, $post); goto A59OF; bneyd: $cats = $this->mydb->gets("\x63\x61\x74\x65\147\x6f\x72\171", '', array("\x63\x61\164\x5f\x68\141\x73\137\160\157\163\x74\x2e\160\157\x73\164" => $post->idpost, "\143\141\x74\137\x63\x6f\x72\142" => 0), array("\143\141\164\137\150\141\x73\137\160\x6f\x73\x74" => array("\x69\156\156\x65\162" => array("\x63\141\164\x5f\x69\x64", "\143\x61\x74")))); goto Fghck; EhuAb: if (!isset($post->laune) || empty($post->laune)) { $post->laune = "\144\x65\146\141\165\x6c\164\x2e\152\160\x67"; } goto bexkY; A59OF: } goto wQN2v; pxOrj: $d["\x63\x75\x72\x72\145\x6e\164"] = $p->current; goto M3591; M3591: $d["\x74\x6f\x74\x61\x6c"] = $count; goto W42MS; SKY1c: } goto B5619; BPh06: $d = array(); goto ApKLI; zPgiC: $where = array($this->table . "\56\x6c\x61\x6e\147" => $lang, $this->table . "\x2e\145\156\154\x69\x67\x6e\x65" => 1, $this->table . "\x2e\x63\157\162\142" => 0); goto gSPst; gSPst: $join = array("\165\x73\x65\162\163" => array("\151\156\x6e\145\x72" => array("\x75\163\x65\162", "\151\144")), "\154\141\x6e\147\165\145" => array("\x69\x6e\156\145\162" => array("\x6c\141\x6e\147", "\151\x64\x6c\x61\x6e\x67")), "\160\162\157\144\165\x63\164" => array("\154\x65\146\x74" => array("\x69\x64\160\157\x73\164", "\160\157\x73\164")), "\145\166\145\x6e\x74" => array("\154\145\x66\164" => array("\151\x64\x70\157\163\164", "\x70\x6f\x73\x74")), "\155\x61\x72\x71\165\x65" => array("\154\145\146\x74" => array("\160\162\157\144\165\x63\164\56\155\x61\x72\x71\165\145", "\151\144\155\x61\162\161\165\x65")), "\x70\x61\171\163" => array("\x6c\145\146\164" => array("\x65\x76\x65\156\x74\56\160\141\x79\x73", "\x69\144\160\141\171\x73")), "\x76\x69\154\x6c\145" => array("\x6c\x65\146\164" => array("\x65\166\145\156\164\56\x76\151\154\154\x65", "\x69\x64\x76\x69\154\154\x65"))); goto cVYsk; ApKLI: $req = array("\x69\144\160\x6f\163\164", "\164\151\x74\162\x65", "\154\151\156\153", "\160\157\x73\164\137\x74\171\x70\145", "\143\x6f\x6e\x74\145\x6e\164", "\x63\157\162\142", "\145\156\154\x69\x67\x6e\145", "\x64\x61\x74\145\137\160\x6f\x73\x74", "\143\141\x74\x5f\151\144", "\x63\141\164\x5f\156\x61\x6d\145", "\143\141\164\137\x6c\x69\156\153", "\x63\x61\164\x5f\x74\171\160\145", "\156\141\155\x65", "\161\164\145", "\x70\157\151\x64\163", "\x74\x61\151\x6c\154\x65", "\x74\166\141", "\144\x61\x74\x65\137\x66\141\142\162\x69\x63\x61\164\x69\157\x6e", "\x64\141\x74\145\x5f\x65\x78\x70\x69\162\x61\164\151\157\x6e", "\154\151\x65\x75", "\x61\x64\x72\x65\x73\x73\x65", "\160\154\141\x63\145", "\x64\141\x74\145\x5f\x64\x65\142\x75\164", "\x64\x61\x74\145\137\146\x69\x6e", "\150\145\x75\162\145\x5f\144\145\x62\165\x74", "\150\x65\x75\162\x65\x5f\146\151\156", array("\x70\x6f\163\x74\x2e\x75\x73\145\x72" => "\x75\x73\x65\x72"), array("\x70\x6f\163\164\x2e\154\141\156\x67" => "\x6c\x61\156\x67"), array("\x70\157\163\164\x2e\x74\162\x61\156\163\x6c\141\x74\x65\144" => "\164\x72\141\156\x73\x6c\141\164\145\x64"), array("\x70\157\x73\x74\56\x6f\x72\151\x67\x69\x6e\x61\x6c\x5f\151\144" => "\157\x72\151\x67\151\156\141\154\x5f\151\144"), array("\160\x6f\163\x74\x2e\144\141\164\145\137\155\157\x64\151\x66\x69\145\144" => "\144\141\164\145\x5f\x6d\157\x64\x69\x66\x69\145\144"), array("\x70\162\157\x64\165\x63\x74\x2e\x70\162\151\170" => "\160\x72\157\144\x75\x63\164\x5f\x70\162\151\x78"), array("\145\166\145\x6e\x74\x2e\160\x72\x69\170" => "\x65\166\145\156\x74\137\x70\x72\151\170"), array("\x75\x73\145\x72\163\x2e\x6e\x6f\x6d" => "\x6e\157\x6d"), array("\x75\x73\145\x72\x73\56\x70\x72\x65\x6e\157\155" => "\x70\x72\x65\156\x6f\x6d"), array("\x6c\x61\156\147\165\145\x2e\x6e\x6f\x6d" => "\x6c\141\156\147\165\145"), array("\x6c\141\x6e\x67\x75\x65\56\143\x6f\x64\x65" => "\x63\157\144\x65"), array("\155\x61\x72\161\x75\145\x2e\x6e\x6f\155" => "\x6d\x61\x72\161\x75\x65"), array("\x70\141\171\x73\x2e\156\x6f\155" => "\x70\141\171\x73"), array("\x76\x69\154\154\145\x2e\156\x6f\155" => "\166\x69\x6c\154\145")); goto zPgiC; cVYsk: if ($type == "\x70\157\x73\x74") { $join["\x63\x61\164\137\150\141\x73\137\x70\157\x73\x74"] = array("\151\156\156\x65\162" => array("\x70\157\163\164\56\151\144\x70\x6f\163\x74", "\x70\x6f\163\164")); $join["\143\141\x74\x65\x67\157\x72\x79"] = array("\151\156\156\x65\162" => array("\x63\x61\164\137\150\x61\x73\137\160\157\163\x74\x2e\143\141\164", "\143\141\x74\137\151\x64")); } else { $join["\143\141\x74\145\147\x6f\x72\x79"] = array("\154\x65\146\x74" => array("\160\x6f\163\164\x2e\x63\141\x74", "\x63\x61\164\137\151\x64")); } goto p8YWD; QcVEh: $p = pager($count, $nb); goto mj6vA; B5619: return $d; goto urNmS; urNmS: } public function getprodstock($idpost) { goto AeW2p; NEWM5: return $d; goto T68Wf; NeMkf: if (!empty($prod)) { goto deS5f; deS5f: $qte = $prod->qte; goto IO19D; wbWzQ: $d = $qte - $coms->qte; goto JGhiF; IO19D: $coms = $this->mydb->get("\143\157\155\155\x61\156\144\145", array(array("\x53\125\x4d\50\161\164\145\51" => "\161\164\145")), array("\x70\162\157\144\x75\x63\164" => $idpost)); goto wbWzQ; JGhiF: } goto NEWM5; AeW2p: $d = 0; goto uXGJr; uXGJr: $prod = $this->mydb->get("\160\x72\157\144\165\x63\x74", '', array("\160\157\x73\x74" => $idpost)); goto NeMkf; T68Wf: } public function setcomment($idpost, $user, $name, $email, $website, $comment, $parent, $depth, $status) { $req = array("\x70\x6f\163\x74" => $idpost, "\165\163\x65\x72" => !empty($user) ? $user : NULL, "\x6e\x6f\x6d" => !empty($name) ? htmlentities($name) : NULL, "\x65\x6d\x61\151\154" => !empty($email) ? htmlentities($email) : NULL, "\167\x65\142\163\x69\x74\x65" => !empty($website) ? htmlentities($website) : NULL, "\143\x6f\155\155\145\x6e\x74" => htmlentities($comment), "\x70\x61\x72\145\156\164" => $parent, "\x64\145\x70\164\150" => $depth, "\x73\164\x61\x74\165\x73" => $status, "\144\141\x74\x65\137\143\157\x6d\x6d\145\x6e\164" => $this->mdate); return $this->mydb->set("\x63\x6f\x6d\x6d\x65\156\164\163", $req); } private function getcomments($id, $max = 6) { goto Ze3Eh; Ze3Eh: $d = array(); goto JnPiM; JnPiM: $table = "\x63\x6f\x6d\155\x65\x6e\164\163"; goto Gh8MH; qs1oI: if (!empty($comments)) { goto x6D3C; dMt3m: $data = array(); goto rQZDd; rQZDd: foreach ($comments as $key => $com) { goto HAGkd; WBQOB: $data[$com->idcomment] = $com; goto xAlc0; u3KPO: $com->more = $more; goto WBQOB; HAGkd: if (!empty($com->id)) { goto YP5WR; vzCCi: $avatar = $this->auth->get_user_var("\x61\166\141\x74\141\162", $com->id); goto OTo4B; OTo4B: if (!empty($avatar)) { $com->avatar = img_url($avatar, 4); } else { $com->avatar = tmpl_img("\141\166\x61\164\x61\162\x2e\160\156\x67"); } goto Wsg3h; YP5WR: $com->fullname = ucfirst($com->nom) . "\40" . ucfirst($com->prenom); goto vzCCi; Wsg3h: } else { $com->fullname = ucwords($com->cnom); $com->avatar = tmpl_img("\141\166\141\x74\141\x72\56\160\156\147"); } goto u3KPO; xAlc0: } goto h3fPZ; x6D3C: if (count($comments) > 5) { $more = true; } else { $more = false; } goto dMt3m; h3fPZ: foreach ($comments as $k => $com) { if ($com->parent != 0) { $data[$com->parent]->children[] = $com; unset($comments[$k]); } } goto fxBxh; fxBxh: $d = $comments; goto Te5aw; Te5aw: } goto UJghB; mdlDq: $join = array("\160\x6f\x73\x74" => array("\x69\156\x6e\145\162" => array("\160\x6f\x73\164", "\151\144\x70\x6f\x73\164")), "\165\x73\x65\162\163" => array("\x6c\145\x66\164" => array("\x75\x73\145\x72", "\151\x64"))); goto Qh_rl; O24GI: $limit = array($max); goto IL3kS; Qh_rl: $orderby = array("\143\x6f\155\155\x65\156\164\163\56\x64\x61\x74\145\137\143\157\155\x6d\x65\x6e\x74" => "\104\105\123\103"); goto O24GI; UJghB: return $d; goto RB213; IL3kS: $comments = $this->CI->mydb->gets($table, $req, $where, $join, $orderby, $limit); goto qs1oI; Gh8MH: $req = array("\151\x64", "\151\x64\x70\x6f\x73\x74", "\x69\x64\x63\157\x6d\x6d\145\156\x74", "\x6e\141\155\x65", "\x77\x65\142\x73\x69\x74\145", "\143\157\155\x6d\x65\156\x74", "\x70\141\162\145\x6e\x74", "\x64\x65\160\x74\x68", "\x74\x69\164\162\145", "\154\151\156\153", array("\143\x6f\x6d\155\145\156\164\x73\56\156\x6f\x6d" => "\x63\x6e\x6f\155"), array("\x75\163\145\x72\163\56\156\x6f\x6d" => "\x6e\x6f\155"), array("\x75\163\145\162\163\x2e\x70\x72\145\156\x6f\x6d" => "\x70\x72\x65\x6e\157\155"), array("\143\157\x6d\155\145\156\164\163\x2e\165\x73\145\x72" => "\x75\x73\145\162"), array("\x63\157\155\155\145\156\x74\x73\x2e\145\x6d\x61\151\154" => "\x65\x6d\x61\x69\154"), array("\x63\157\155\155\x65\156\164\163\56\x64\x61\164\145\137\143\x6f\155\155\x65\156\x74" => "\144\x61\164\x65")); goto r1S2t; r1S2t: $where = array("\x73\164\x61\x74\165\x73" => 1, "\151\x64\160\157\x73\x74" => $id); goto mdlDq; RB213: } }
