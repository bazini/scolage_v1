<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-10-02 08:19:17              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\102\101\x53\105\x50\x41\x54\x48") or exit("\116\x6f\40\144\151\162\x65\143\x74\40\x73\143\162\151\x70\x74\40\x61\143\x63\x65\163\163\x20\141\x6c\x6c\x6f\167\x65\144"); class Users { protected $CI; private $mydb; private $session; private $table; public function __construct() { goto avhsl; YRDGt: $this->session =& $this->CI->session; goto qeyWY; qeyWY: $this->table = "\x75\x73\145\162\163"; goto MBwcS; avhsl: $this->CI =& get_instance(); goto b5ckI; b5ckI: $this->mydb =& $this->CI->mydb; goto YRDGt; MBwcS: } public function liste() { goto q5_OY; S6owC: if (!empty($users)) { $d["\145\162\x72\157\x72"] = false; $d["\144\x61\x74\141"] = $users; } goto HSIe1; HSIe1: return $d; goto T2QHu; v1Zbc: $users = $this->mydb->gets($this->table, '', array("\142\141\156\156\x65\144" => 0, "\x69\144" => array("\74\x3e" => 1))); goto S6owC; q5_OY: $d["\x65\x72\x72\x6f\x72"] = true; goto v1Zbc; T2QHu: } public function get_users($banned = 0) { goto Xehuo; Xehuo: $d = array(); goto RGyP2; RrLDO: return $d; goto xigHy; HWDA2: $p = pager($count, 10); goto bvUyR; FyMqs: $count = $this->mydb->count($this->table, $where, $join); goto HWDA2; bvUyR: $users = $this->mydb->gets($this->table, array(array("\165\163\145\x72\x73\56\151\x64" => "\151\x64"), array("\165\x73\145\162\163\x2e\x6e\x6f\155" => "\156\x6f\x6d"), array("\165\163\145\x72\x73\56\x70\162\x65\156\x6f\155\163" => "\x70\x72\x65\x6e\157\x6d\x73"), array("\165\x73\145\x72\163\56\x73\x65\170\145" => "\163\145\170\145"), array("\x75\163\x65\162\163\x2e\x6e\141\155\x65" => "\156\x61\x6d\x65"), array("\x75\163\x65\162\163\x2e\145\155\x61\x69\x6c" => "\x65\x6d\x61\x69\x6c"), array("\165\x73\145\x72\163\x2e\142\141\156\x6e\145\x64" => "\142\x61\156\x6e\145\144"), array("\160\x65\x72\155\x73\56\156\x61\155\x65" => "\x70\x65\x72\155"), array("\160\145\162\155\x5f\164\x6f\137\165\163\145\x72\x2e\160\145\162\x6d\x5f\x69\x64" => "\x70\145\162\155\137\x69\144"), array("\147\x72\x6f\165\x70\x73\x2e\x6e\141\x6d\145" => "\140\147\x72\x6f\x75\160\140"), array("\165\163\145\x72\x5f\164\157\x5f\x67\162\157\x75\160\56\147\162\157\165\x70\137\151\x64" => "\x67\162\157\165\160\x5f\x69\x64")), $where, $join, array("\x75\x73\145\162\x73\56\x69\x64"), array($p->start, $p->epp)); goto kCwM8; kCwM8: if (!empty($users)) { goto d9ZvE; rWlCT: $params = set_params($ids); goto LKWZ_; gKTCL: $d["\x74\157\164\141\154"] = $count; goto BRqm3; LKWZ_: $sql = "\x53\105\x4c\x45\x43\x54\40\x2a\x20\x46\122\x4f\115\x20\x75\163\145\162\137\166\141\x72\151\x61\x62\154\x65\163\x20\127\x48\x45\x52\105\40\165\163\145\x72\x5f\151\144\x20\111\116\40\50{$params}\51"; goto fB2kq; BRqm3: $d["\165\163\x65\x72\x73"] = array_values($data); goto FtAEN; fB2kq: $meta = $this->mydb->custom_get($sql, $ids); goto ATkrN; Qj42o: $d["\x65\x70\x70"] = $p->epp; goto gKTCL; d9ZvE: $data = array(); goto MgEI3; RPj0D: foreach ($users as $user) { $data[$user->id] = $user; array_push($ids, $user->id); } goto rWlCT; hQfRM: $d["\143\x75\x72\162\x65\156\164"] = $p->current; goto Qj42o; ATkrN: if (!empty($meta)) { foreach ($meta as $m) { goto Z2Pjy; QvXAe: $data[$m->user_id]->{$key} = $value; goto zxQso; Z2Pjy: $key = $m->key; goto fZIUg; nE7I2: if ($key == "\160\141\x73\163") { $value = decrypt($m->value); } goto QvXAe; fZIUg: $value = $m->value; goto nE7I2; zxQso: } } goto R4Vng; R4Vng: $d["\156\x62\160\x61\147\x65\x73"] = $p->nbpages; goto hQfRM; MgEI3: $ids = array(); goto RPj0D; FtAEN: } goto RrLDO; Vjjvp: $join = array("\160\x65\162\x6d\x5f\164\x6f\x5f\x75\x73\145\x72" => array("\151\156\x6e\x65\x72" => array("\x69\144", "\165\x73\x65\x72\x5f\x69\x64")), "\x70\145\x72\155\163" => array("\x69\156\156\145\x72" => array("\160\145\x72\155\x5f\164\157\x5f\x75\163\x65\162\56\160\x65\x72\155\x5f\x69\x64", "\151\x64")), "\x75\x73\x65\162\x5f\x74\x6f\x5f\147\162\157\x75\x70" => array("\151\156\156\145\x72" => array("\x69\144", "\165\x73\145\162\x5f\x69\x64")), "\x67\162\x6f\165\160\x73" => array("\x69\156\156\145\162" => array("\165\x73\145\162\137\x74\x6f\137\x67\162\x6f\x75\160\x2e\x67\x72\157\165\160\x5f\x69\x64", "\151\x64"))); goto FyMqs; RGyP2: $where = array("\x62\141\156\156\145\x64" => $banned, "\154\157\147\x69\x6e\x5f\141\x74\164\x65\155\160\x74\x73" => 0); goto Vjjvp; xigHy: } public function get_deactivated_users() { goto zVgLB; NV3XH: $p = pager($count, 10); goto p1iZT; WHOT_: return $d; goto LHPbz; q1yHF: if (!empty($users)) { goto ylJGG; fKzgN: foreach ($users as $user) { $data[$user->id] = $user; array_push($ids, $user->id); } goto YmB81; Wht6x: $d["\x75\163\x65\162\x73"] = array_values($data); goto HXOjO; Hg1aV: $d["\x65\x70\160"] = $p->epp; goto nKg2x; nKg2x: $d["\x74\x6f\164\x61\x6c"] = $count; goto Wht6x; UESPZ: $d["\156\142\160\141\x67\145\163"] = $p->nbpages; goto eREBA; E0xlV: $ids = array(); goto fKzgN; wDWD4: if (!empty($meta)) { foreach ($meta as $m) { goto ARDpB; q6Jgw: if ($key == "\160\x61\x73\163") { $value = decrypt($m->value); } goto AD6LR; ARDpB: $key = $m->key; goto tsRqv; tsRqv: $value = $m->value; goto q6Jgw; AD6LR: $data[$m->user_id]->{$key} = $value; goto B9D07; B9D07: } } goto UESPZ; Kq3KB: $sql = "\123\105\x4c\x45\x43\124\40\52\40\x46\122\117\x4d\40\x75\x73\x65\162\137\x76\141\162\x69\x61\x62\154\145\x73\40\127\110\x45\122\x45\40\165\163\x65\162\x5f\151\x64\x20\111\x4e\x20\50{$params}\51"; goto pWb5z; eREBA: $d["\143\x75\162\x72\x65\x6e\164"] = $p->current; goto Hg1aV; YmB81: $params = set_params($ids); goto Kq3KB; ylJGG: $data = array(); goto E0xlV; pWb5z: $meta = $this->mydb->custom_get($sql, $ids); goto wDWD4; HXOjO: } goto WHOT_; zVgLB: $d = array(); goto MYUFO; HdB1o: $count = $this->mydb->count($this->table, $where, $join); goto NV3XH; p1iZT: $users = $this->mydb->gets($this->table, array(array("\165\x73\145\x72\163\56\x69\x64" => "\x69\144"), array("\x75\x73\x65\x72\x73\x2e\x6e\x6f\155" => "\x6e\x6f\x6d"), array("\x75\163\145\162\x73\56\x70\162\x65\x6e\157\x6d\x73" => "\160\x72\x65\156\x6f\155\x73"), array("\165\x73\145\162\163\x2e\163\x65\x78\x65" => "\x73\145\x78\x65"), array("\165\x73\x65\162\163\56\x6e\141\x6d\x65" => "\x6e\x61\x6d\145"), array("\165\163\x65\x72\163\x2e\x65\155\x61\151\154" => "\x65\x6d\x61\x69\x6c"), array("\x75\x73\x65\x72\x73\x2e\142\141\156\156\145\144" => "\142\141\x6e\x6e\x65\x64"), array("\x70\x65\162\x6d\x73\x2e\x6e\x61\x6d\145" => "\x70\145\x72\155"), array("\x70\x65\162\155\137\164\x6f\x5f\165\163\x65\162\56\160\145\162\155\x5f\151\x64" => "\x70\x65\162\x6d\137\x69\x64"), array("\x67\x72\157\x75\x70\163\x2e\156\x61\x6d\x65" => "\x60\147\162\x6f\x75\x70\x60"), array("\x75\x73\145\x72\x5f\x74\157\137\x67\x72\x6f\165\160\x2e\147\x72\157\165\x70\x5f\151\144" => "\147\x72\157\x75\x70\x5f\151\x64")), $where, $join, array("\x75\x73\x65\162\163\x2e\151\x64"), array($p->start, $p->epp)); goto q1yHF; NmdsS: $join = array("\x70\x65\162\x6d\x5f\x74\157\x5f\165\x73\145\x72" => array("\x69\156\x6e\x65\x72" => array("\x69\x64", "\x75\163\145\x72\137\151\x64")), "\160\145\162\155\163" => array("\151\156\156\145\162" => array("\x70\145\x72\x6d\x5f\x74\157\x5f\165\x73\145\162\x2e\160\x65\x72\155\137\x69\144", "\x69\144")), "\x75\x73\x65\162\x5f\164\157\x5f\x67\x72\157\x75\x70" => array("\151\156\x6e\145\162" => array("\x69\144", "\165\163\145\x72\x5f\151\x64")), "\147\162\157\165\x70\x73" => array("\151\156\156\145\x72" => array("\x75\163\145\x72\x5f\x74\x6f\137\147\x72\157\165\x70\x2e\x67\162\x6f\x75\160\x5f\151\x64", "\151\x64"))); goto HdB1o; MYUFO: $where["\154\x6f\147\x69\x6e\137\141\x74\x74\145\x6d\x70\x74\163"] = array("\x3e" => 0); goto NmdsS; LHPbz: } public function get_user_edition($id) { goto M6Y1N; V8T6m: $users = $this->mydb->gets($this->table, array(array("\165\x73\x65\162\163\x2e\151\x64" => "\151\x64"), array("\x75\163\145\x72\x73\x2e\x6e\157\155" => "\x6e\x6f\155"), array("\x75\x73\145\x72\x73\56\160\x72\x65\x6e\x6f\155\163" => "\x70\x72\x65\x6e\x6f\x6d\163"), array("\x75\x73\145\162\x73\x2e\x73\x65\x78\x65" => "\x73\x65\x78\x65"), array("\165\163\145\x72\163\56\156\x61\x6d\x65" => "\156\x61\155\145"), array("\x75\163\145\162\x73\56\145\155\141\x69\154" => "\145\155\x61\151\x6c"), array("\165\163\145\162\x73\x2e\x62\141\156\156\145\144" => "\x62\141\156\x6e\x65\144"), array("\x70\x65\x72\155\x73\56\156\141\x6d\145" => "\x70\x65\162\155"), array("\160\x65\162\155\x5f\164\157\137\165\x73\x65\x72\x2e\160\x65\x72\x6d\x5f\x69\144" => "\x70\145\162\x6d\137\151\144"), array("\147\162\x6f\x75\x70\163\x2e\x6e\141\155\x65" => "\x60\x67\162\157\x75\160\x60"), array("\x75\x73\x65\x72\137\x74\157\137\x67\162\157\x75\160\56\x67\162\x6f\165\x70\x5f\x69\144" => "\147\x72\x6f\165\x70\137\x69\x64")), $where, $join); goto tD4LJ; ZeOGM: return $d; goto HEGkY; zZPUV: $where["\165\x73\145\x72\x73\56\151\x64"] = $id; goto kJSwJ; kJSwJ: $join = array("\x70\x65\162\x6d\x5f\x74\157\137\165\x73\x65\x72" => array("\x69\156\x6e\x65\x72" => array("\151\144", "\165\163\x65\x72\x5f\x69\144")), "\x70\145\162\155\163" => array("\151\x6e\x6e\x65\162" => array("\x70\145\x72\155\137\164\157\137\165\x73\x65\162\56\160\145\x72\x6d\137\151\144", "\151\x64")), "\x75\163\x65\x72\x5f\x74\x6f\137\147\162\x6f\165\x70" => array("\151\156\156\x65\x72" => array("\x69\x64", "\x75\163\x65\x72\x5f\151\x64")), "\x67\162\157\x75\160\163" => array("\151\156\x6e\x65\162" => array("\x75\163\145\x72\137\x74\157\x5f\147\162\157\x75\160\x2e\147\162\x6f\x75\160\137\x69\x64", "\x69\144"))); goto V8T6m; tD4LJ: if (!empty($users)) { goto eaz6y; wyruK: if (!empty($meta)) { foreach ($meta as $m) { goto xU23C; FmYJS: $value = $m->value; goto nMajv; T9wtn: $user->{$key} = $value; goto PeBil; xU23C: $key = $m->key; goto FmYJS; nMajv: if ($key == "\160\141\163\163") { $value = decrypt($m->value); } goto T9wtn; PeBil: } } goto qlRgb; qlRgb: $d = $user; goto s7aTy; epXU1: $meta = $this->mydb->gets("\165\x73\145\162\x5f\166\141\x72\x69\x61\x62\154\145\x73", array(), array("\165\x73\x65\x72\x5f\x69\144" => $user->id)); goto wyruK; eaz6y: $user = $users[0]; goto epXU1; s7aTy: } goto ZeOGM; M6Y1N: $d = false; goto zZPUV; HEGkY: } public function gets($ban = false) { goto q0IfM; yRlsX: $data["\156\x62\x70\x61\147\x65\x73"] = $p->nbpages; goto oSQU5; C8lu1: $d = $data; goto Jio4a; Dr3cP: $count = $this->mydb->count($this->table, $where); goto O_2zl; rLUyJ: $data["\x74\157\164\x61\154"] = $count; goto Qo6vK; CQ1gq: $where["\151\x64"] = array("\x3c\x3e" => 1); goto Dr3cP; O_2zl: $p = pager($count, 20); goto yRlsX; Jio4a: return $d; goto hVcSH; z3hn8: if ($ban != false) { $where["\x62\x61\x6e\156\x65\144"] = $ban; } goto CQ1gq; oSQU5: $data["\x63\165\162\x72\x65\156\164"] = $p->current; goto rLUyJ; q0IfM: $d = false; goto xfeI1; Qo6vK: $data["\x75\163\x65\162\x73"] = $this->mydb->gets($this->table, '', $where, '', array("\x6e\157\x6d"), array($p->start, $p->epp)); goto C8lu1; xfeI1: $where["\142\141\x6e\x6e\145\144"] = 0; goto z3hn8; hVcSH: } public function get($id = false) { goto LuHe7; hJFcM: return $d; goto wsqCp; OPRJ7: if ($id == false) { $userid = $this->session->userdata("\151\144"); if ($userid) { $where["\151\x64"] = $userid; } else { $d["\145\x72\x6d\163\147"] = "\x41\165\x63\x75\156\40\x75\x74\x69\x6c\151\x73\141\164\x65\165\x72\x20\x64\145\155\x61\x6e\144\xc3\xa9"; } } else { if (valid_email($id)) { $where["\x65\x6d\141\151\154"] = $id; } elseif (intval($id) !== 0) { $where["\x69\x64"] = $id; } else { $where["\156\141\x6d\145"] = $id; } } goto p09eZ; WH_Ib: if (!empty($us)) { goto Imcvl; R3Wzs: if (!empty($vars)) { foreach ($vars as $v) { $us->vars[$v->key] = $v->value; } } goto QeXSL; Imcvl: $vars = $this->mydb->gets("\165\163\x65\x72\137\x76\141\x72\151\141\142\154\x65\x73", array("\140\153\x65\x79\x60", "\166\141\154\165\145"), array("\165\163\145\162\x5f\x69\x64" => $us->id)); goto R3Wzs; rrM64: $d["\x64\141\x74\x61"] = $us; goto OmDnT; QeXSL: $d["\x65\x72\x72\x6f\162"] = false; goto rrM64; OmDnT: } else { $d["\x65\x72\x6d\163\x67"] = "\x41\x75\143\165\x6e\x20\165\164\151\x6c\151\x73\x61\164\145\165\x72\40\156\145\40\x63\x6f\162\x65\x73\x70\157\x6e\144\40\303\240\x20\143\145\x20\x63\162\x69\164\303\250\x72\x65\40\144\x65\x20\162\x65\x63\x68\x65\x72\x63\150\145"; } goto hJFcM; n2RSW: $where = array(); goto OPRJ7; p09eZ: $us = $this->mydb->get($this->table, '', $where); goto WH_Ib; LuHe7: $d["\145\x72\x72\157\x72"] = true; goto n2RSW; wsqCp: } public function getid($email = false) { goto W_lrS; W_lrS: $d["\x65\162\162\157\162"] = true; goto mnB1d; rijl5: return $d; goto zRqxe; mnB1d: if ($email == false) { $email = $this->session->userdata("\x65\155\x61\x69\x6c"); if (empty($email)) { $d["\145\x72\155\x73\147"] = "\x41\165\143\165\x6e\40\165\164\x69\x6c\x69\163\141\164\145\165\x72\x20\x73\x70\303\251\143\x69\146\151\xc3\xa9"; } else { $d["\145\162\x72\157\x72"] = false; $d["\151\x64"] = $this->session->userdata("\x69\144"); } } else { $user = $this->mydb->get($this->table, array("\151\x64"), array("\145\x6d\x61\151\154" => $email)); if (!empty($user)) { $d["\x65\162\x72\157\162"] = false; $d["\x69\144"] = $user->id; } else { $d["\x65\162\x6d\163\x67"] = "\111\x44\40\x69\156\x74\162\x6f\x75\x76\141\142\154\145\40\160\x6f\x75\162\x20\x63\145\164\x20\165\164\x69\x6c\151\x73\x61\x74\145\165\x72"; } } goto rijl5; zRqxe: } public function getpassword($id = false) { goto bnBDa; xMq8S: $mdp = $this->mydb->get($this->table, array("\x70\x61\x73\x73"), array("\x69\x64" => $id)); goto tF4tS; bnBDa: $d = false; goto PZFPn; g6dhZ: return $d; goto GePiH; tF4tS: if (!empty($mdp)) { $d = $mdp->pass; } goto g6dhZ; PZFPn: if ($id == false) { $id = $this->getid(); } goto xMq8S; GePiH: } public function user_exist_by_email($email, $id = false) { goto kgH41; Uzy_a: if (!empty($user)) { $d = $user->id; } goto lcfQe; Q6QDP: $where["\x65\x6d\141\x69\154"] = $email; goto dEhLr; kgH41: $d = false; goto Q6QDP; dEhLr: if ($id !== false) { $where["\151\x64"] = array("\74\76" => $id); } goto fPdKa; fPdKa: $user = $this->mydb->get($this->table, array("\x69\144"), $where); goto Uzy_a; lcfQe: return $d; goto LL_Ws; LL_Ws: } public function user_exist_by_name($name, $id = false) { goto v2Iam; OW6Ii: if ($id !== false) { $where["\151\144"] = array("\74\76" => $id); } goto Hdq5L; CVMsZ: if (!empty($user)) { $d = $user->id; } goto V7T7N; sZlwR: $where["\x6e\141\155\145"] = $name; goto OW6Ii; V7T7N: return $d; goto QRSic; v2Iam: $d = false; goto sZlwR; Hdq5L: $user = $this->mydb->get($this->table, array("\151\x64"), $where); goto CVMsZ; QRSic: } public function ban($id) { return $this->mydb->update($this->table, array("\142\x61\x6e\156\145\x64" => 1, "\x63\x61\x6e\137\154\x6f\147\x69\156" => 0), array("\x69\x64" => $id)); } public function is_banned($id) { goto x8OuN; qp7Zd: if ($user > 0) { $d = true; } goto SWg7u; grvA1: $user = $this->mydb->count($this->table, array("\x69\144" => $id, "\142\141\x6e\x6e\x65\x64" => 1)); goto qp7Zd; x8OuN: $d = false; goto grvA1; SWg7u: return $d; goto UocJ7; UocJ7: } public function can_login($id) { goto B3Bqc; pdbBA: return $d; goto PxYHt; B3Bqc: $d = false; goto Nnjic; N0VlJ: if ($user > 0) { $d = true; } goto pdbBA; Nnjic: $user = $this->mydb->count($this->table, array("\151\x64" => $id, "\143\141\156\137\154\x6f\147\x69\156" => 0)); goto N0VlJ; PxYHt: } public function unban($id) { return $this->mydb->update($this->table, array("\x62\141\156\156\145\144" => 0, "\143\x61\156\x5f\x6c\157\x67\151\156" => 1, "\154\157\147\x69\156\137\x61\x74\x74\145\x6d\x70\164\x73" => 0), array("\x69\144" => $id)); } public function set($nom, $prenom, $name, $email, $sexe, $mdp) { goto Kd_VP; Kd_VP: $id = $this->lastid(); goto xm0Bh; S2pX6: return $this->mydb->set($this->table, array("\x65\155\x61\x69\x6c" => $email, "\160\x61\163\163" => $pass, "\x6e\141\x6d\145" => $name, "\156\157\x6d" => $nom, "\x70\162\145\156\157\155\163" => $prenom, "\163\145\x78\145" => $sexe, "\x62\141\156\156\x65\x64" => 0, "\163\145\143\162\x65\164" => generate_password(6))); goto GM6er; xm0Bh: $pass = hash_password($mdp, $id); goto S2pX6; GM6er: } public function update($nom, $prenom, $name, $email, $sexe, $mdp, $id) { $pass = hash_password($mdp, $id); return $this->mydb->update($this->table, array("\145\x6d\141\151\154" => $email, "\160\141\x73\163" => $pass, "\x6e\141\x6d\x65" => $name, "\x6e\x6f\x6d" => $nom, "\x70\162\x65\156\157\155\163" => $prenom, "\163\145\x78\x65" => $sexe), array("\151\x64" => $id)); } public function update_info($nom, $prenom, $sexe, $email, $id = false) { if ($id == false) { $id = $this->session->userdata("\x69\x64"); } return $this->mydb->update($this->table, array("\x65\155\141\151\154" => $email, "\x6e\x6f\155" => $nom, "\x70\x72\x65\156\157\x6d\163" => $prenom, "\x73\x65\170\x65" => $sexe), array("\151\144" => $id)); } public function update_password($mdp, $id = false) { goto aCnDj; wZyMt: $pass = hash_password($mdp, $id); goto yR2wB; aCnDj: if ($id == false) { $id = $this->session->userdata("\x69\x64"); } goto wZyMt; yR2wB: return $this->mydb->update($this->table, array("\160\x61\x73\x73" => $pass), array("\x69\144" => $id)); goto Ax7Ly; Ax7Ly: } private function lastid() { goto TEaVA; TEaVA: $d = 1; goto fLa0O; fLa0O: $user = $this->mydb->get($this->table, array("\x69\144"), '', '', array("\151\144" => "\104\105\x53\103"), array(1)); goto XKbeP; XKbeP: if (!empty($user)) { $d = $user->id + 1; } goto FgXPJ; FgXPJ: return $d; goto aTCDo; aTCDo: } }
