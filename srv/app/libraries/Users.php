<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:17              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\x42\101\123\x45\120\x41\x54\x48") or exit("\x4e\157\x20\x64\x69\162\145\143\164\40\x73\x63\x72\151\x70\x74\x20\x61\143\x63\x65\x73\x73\x20\x61\154\154\x6f\x77\145\x64"); class Users { protected $CI; private $mydb; private $session; private $table; public function __construct() { goto bzB1f; nkCTF: $this->mydb =& $this->CI->mydb; goto S09Hc; S09Hc: $this->session =& $this->CI->session; goto SIeTj; bzB1f: $this->CI =& get_instance(); goto nkCTF; SIeTj: $this->table = "\x75\163\145\x72\x73"; goto TyIvr; TyIvr: } public function liste() { goto v58D4; NtDhp: if (!empty($users)) { $d["\145\162\162\157\x72"] = false; $d["\144\x61\x74\x61"] = $users; } goto iA_QZ; iA_QZ: return $d; goto hUcQq; v58D4: $d["\x65\x72\162\x6f\162"] = true; goto Z5Edw; Z5Edw: $users = $this->mydb->gets($this->table, '', array("\142\141\156\156\145\x64" => 0, "\x69\144" => array("\x3c\x3e" => 1))); goto NtDhp; hUcQq: } public function get_users($banned = 0) { goto DdO_R; DdO_R: $d = array(); goto Vtb0N; OeCcw: $join = array("\160\145\x72\x6d\137\x74\x6f\x5f\x75\x73\145\162" => array("\151\156\156\x65\162" => array("\151\x64", "\165\x73\x65\x72\137\151\144")), "\160\x65\x72\x6d\163" => array("\151\156\156\x65\x72" => array("\x70\145\x72\155\137\x74\x6f\137\x75\x73\145\x72\x2e\160\145\162\155\137\151\144", "\x69\x64")), "\165\163\x65\162\x5f\x74\157\x5f\x67\x72\x6f\x75\x70" => array("\x69\156\x6e\145\162" => array("\151\144", "\x75\163\145\x72\x5f\151\144")), "\x67\x72\x6f\165\x70\163" => array("\151\156\x6e\x65\162" => array("\x75\163\x65\x72\137\x74\157\137\x67\x72\157\165\x70\x2e\147\162\157\165\160\x5f\x69\x64", "\x69\x64"))); goto adU_f; sqK5L: if (!empty($users)) { goto WZnZN; Ex9SO: $ids = array(); goto TMSBe; TMSBe: foreach ($users as $user) { $data[$user->id] = $user; array_push($ids, $user->id); } goto Si0CP; kpB1P: $d["\x6e\x62\x70\141\x67\x65\163"] = $p->nbpages; goto dkEjy; dkEjy: $d["\x63\x75\162\x72\145\156\x74"] = $p->current; goto AvEBZ; IAOEz: $d["\165\163\x65\162\163"] = array_values($data); goto Len7X; AvEBZ: $d["\145\x70\x70"] = $p->epp; goto jorW_; jorW_: $d["\x74\157\x74\x61\154"] = $count; goto IAOEz; Hh2bn: $sql = "\123\x45\x4c\105\x43\x54\40\x2a\40\106\x52\x4f\x4d\40\165\x73\x65\162\137\166\141\162\151\x61\x62\154\x65\x73\x20\127\x48\105\x52\105\40\165\x73\x65\x72\137\x69\x64\40\x49\x4e\x20\x28{$params}\51"; goto SA4wF; Si0CP: $params = set_params($ids); goto Hh2bn; WZnZN: $data = array(); goto Ex9SO; SA4wF: $meta = $this->mydb->custom_get($sql, $ids); goto jf9iY; jf9iY: if (!empty($meta)) { foreach ($meta as $m) { goto DRIwE; GLgE9: $data[$m->user_id]->{$key} = $value; goto pUKtv; DRIwE: $key = $m->key; goto RHibh; RHibh: $value = $m->value; goto FylhL; FylhL: if ($key == "\160\141\x73\x73") { $value = decrypt($m->value); } goto GLgE9; pUKtv: } } goto kpB1P; Len7X: } goto sa78B; X5vcB: $p = pager($count, 10); goto R4PlY; R4PlY: $users = $this->mydb->gets($this->table, array(array("\165\163\x65\x72\163\x2e\151\x64" => "\x69\144"), array("\x75\x73\x65\x72\163\56\x6e\x6f\155" => "\156\x6f\155"), array("\x75\163\x65\162\163\56\160\x72\x65\x6e\x6f\x6d\163" => "\160\x72\145\156\157\155\163"), array("\165\163\145\162\x73\x2e\x73\145\x78\x65" => "\163\x65\170\x65"), array("\x75\163\x65\x72\x73\x2e\x6e\x61\x6d\145" => "\156\141\x6d\x65"), array("\x75\x73\145\x72\163\56\145\x6d\x61\151\154" => "\x65\155\x61\x69\x6c"), array("\165\163\x65\x72\163\56\x62\141\156\x6e\x65\x64" => "\142\x61\x6e\x6e\145\144"), array("\160\145\x72\155\163\x2e\156\x61\x6d\x65" => "\x70\145\162\x6d"), array("\160\x65\162\x6d\x5f\x74\x6f\137\165\x73\x65\162\56\x70\x65\x72\x6d\137\x69\144" => "\x70\145\162\x6d\x5f\x69\144"), array("\147\x72\x6f\165\160\x73\x2e\156\x61\155\x65" => "\x60\147\x72\x6f\x75\160\x60"), array("\165\163\x65\162\x5f\x74\157\x5f\147\x72\157\x75\160\x2e\x67\x72\x6f\x75\160\x5f\151\144" => "\x67\x72\157\165\x70\137\x69\144")), $where, $join, array("\165\163\x65\162\x73\56\151\x64"), array($p->start, $p->epp)); goto sqK5L; adU_f: $count = $this->mydb->count($this->table, $where, $join); goto X5vcB; sa78B: return $d; goto iVqHk; Vtb0N: $where["\142\x61\156\x6e\x65\144"] = $banned; goto OeCcw; iVqHk: } public function get_user_edition($id) { goto WYqzz; SbZLT: $users = $this->mydb->gets($this->table, array(array("\x75\163\145\x72\x73\56\151\144" => "\x69\x64"), array("\x75\163\145\x72\163\x2e\x6e\157\155" => "\156\157\155"), array("\x75\163\145\162\163\x2e\x70\162\x65\156\157\x6d\163" => "\160\x72\145\x6e\x6f\x6d\163"), array("\165\x73\145\x72\x73\56\x73\145\170\x65" => "\x73\145\170\x65"), array("\x75\163\x65\162\x73\56\156\x61\x6d\145" => "\x6e\141\x6d\x65"), array("\x75\x73\x65\x72\x73\56\145\x6d\x61\151\154" => "\x65\155\141\x69\154"), array("\165\163\145\162\x73\x2e\142\x61\156\x6e\x65\x64" => "\x62\141\156\x6e\145\144"), array("\x70\x65\162\155\163\56\156\141\155\x65" => "\x70\x65\162\155"), array("\x70\145\x72\155\137\x74\x6f\x5f\x75\163\145\x72\x2e\160\145\x72\155\x5f\x69\x64" => "\x70\145\162\x6d\x5f\x69\x64"), array("\x67\162\157\165\160\x73\x2e\156\x61\x6d\145" => "\140\x67\162\157\x75\160\140"), array("\165\163\145\162\x5f\164\x6f\137\x67\x72\157\x75\160\x2e\147\162\x6f\x75\x70\137\151\144" => "\147\162\x6f\x75\x70\x5f\x69\x64")), $where, $join); goto xOITR; JWEuE: return $d; goto u625w; xOITR: if (!empty($users)) { goto Gi3sa; Gi3sa: $user = $users[0]; goto dUyy6; McCnH: if (!empty($meta)) { foreach ($meta as $m) { goto eKuIL; eKuIL: $key = $m->key; goto qtQgq; n2CXm: if ($key == "\160\141\163\x73") { $value = decrypt($m->value); } goto ZlYY3; ZlYY3: $user->{$key} = $value; goto Wt0rh; qtQgq: $value = $m->value; goto n2CXm; Wt0rh: } } goto atkbc; dUyy6: $meta = $this->mydb->gets("\x75\x73\145\x72\137\166\x61\162\151\141\142\x6c\x65\163", array(), array("\x75\x73\x65\162\137\151\x64" => $user->id)); goto McCnH; atkbc: $d = $user; goto EtoLC; EtoLC: } goto JWEuE; LnWLu: $where["\x75\163\145\x72\x73\x2e\151\x64"] = $id; goto Qj2wY; WYqzz: $d = false; goto LnWLu; Qj2wY: $join = array("\x70\x65\162\155\137\164\157\137\165\163\x65\162" => array("\x69\156\156\x65\162" => array("\x69\x64", "\x75\163\x65\162\137\x69\144")), "\160\145\x72\155\x73" => array("\x69\156\x6e\x65\162" => array("\x70\x65\x72\155\x5f\164\157\137\x75\x73\145\x72\x2e\x70\x65\x72\155\x5f\x69\144", "\151\x64")), "\165\x73\145\162\x5f\164\157\137\147\x72\x6f\x75\x70" => array("\151\x6e\x6e\x65\x72" => array("\x69\x64", "\165\x73\145\162\137\x69\144")), "\x67\x72\x6f\165\x70\x73" => array("\151\x6e\156\x65\162" => array("\x75\x73\x65\162\137\164\157\x5f\x67\162\157\x75\160\56\x67\162\157\165\160\x5f\x69\144", "\x69\x64"))); goto SbZLT; u625w: } public function gets($ban = false) { goto Y4CgE; Y4CgE: $d = false; goto sDtJX; Vriww: $data["\x63\x75\x72\x72\145\x6e\164"] = $p->current; goto qJYRz; dhwiZ: $where["\151\144"] = array("\x3c\x3e" => 1); goto VzMbV; kOMBZ: if ($ban != false) { $where["\x62\141\156\x6e\x65\144"] = $ban; } goto dhwiZ; VzMbV: $count = $this->mydb->count($this->table, $where); goto pS3hb; pdZzv: return $d; goto xZ8s6; sDtJX: $where["\x62\x61\x6e\156\x65\x64"] = 0; goto kOMBZ; dqdzl: $data["\x75\x73\x65\162\163"] = $this->mydb->gets($this->table, '', $where, '', array("\x6e\157\x6d"), array($p->start, $p->epp)); goto qDf7X; FwZ8A: $data["\156\x62\x70\x61\x67\145\x73"] = $p->nbpages; goto Vriww; qJYRz: $data["\164\x6f\x74\141\154"] = $count; goto dqdzl; qDf7X: $d = $data; goto pdZzv; pS3hb: $p = pager($count, 20); goto FwZ8A; xZ8s6: } public function get($id = false) { goto OiQej; M3DkZ: if (!empty($us)) { goto nTioR; AiUMZ: if (!empty($vars)) { foreach ($vars as $v) { $us->vars[$v->key] = $v->value; } } goto D7WNz; D7WNz: $d["\x65\162\162\157\162"] = false; goto oiU_u; oiU_u: $d["\144\141\164\141"] = $us; goto JY2iQ; nTioR: $vars = $this->mydb->gets("\x75\x73\x65\x72\137\166\x61\162\x69\x61\x62\154\x65\163", array("\140\153\x65\x79\140", "\x76\141\154\x75\x65"), array("\x75\x73\x65\162\137\x69\x64" => $us->id)); goto AiUMZ; JY2iQ: } else { $d["\x65\x72\155\x73\x67"] = "\101\165\x63\165\x6e\x20\x75\164\x69\154\151\x73\141\x74\145\x75\162\x20\x6e\x65\x20\143\x6f\162\145\163\x70\157\x6e\x64\40\303\xa0\x20\143\145\x20\x63\162\x69\x74\303\250\162\x65\40\144\145\x20\x72\145\x63\150\x65\x72\x63\x68\x65"; } goto VuXIY; oerzG: if ($id == false) { $userid = $this->session->userdata("\151\x64"); if ($userid) { $where["\151\x64"] = $userid; } else { $d["\145\162\x6d\x73\x67"] = "\x41\x75\x63\165\156\x20\165\164\x69\x6c\x69\163\x61\164\x65\x75\x72\x20\144\x65\155\x61\x6e\x64\xc3\251"; } } else { if (valid_email($id)) { $where["\145\x6d\141\151\x6c"] = $id; } elseif (intval($id) !== 0) { $where["\x69\144"] = $id; } else { $where["\156\141\155\x65"] = $id; } } goto AbgVq; HC07e: $where = array(); goto oerzG; VuXIY: return $d; goto xo40A; AbgVq: $us = $this->mydb->get($this->table, '', $where); goto M3DkZ; OiQej: $d["\x65\x72\162\x6f\162"] = true; goto HC07e; xo40A: } public function getid($email = false) { goto rmyJK; cdTmV: if ($email == false) { $email = $this->session->userdata("\145\155\141\x69\x6c"); if (empty($email)) { $d["\x65\x72\155\163\x67"] = "\x41\x75\x63\x75\156\x20\x75\x74\x69\154\151\x73\141\x74\145\x75\162\x20\163\160\xc3\251\x63\x69\146\x69\xc3\251"; } else { $d["\x65\x72\x72\157\162"] = false; $d["\x69\x64"] = $this->session->userdata("\151\144"); } } else { $user = $this->mydb->get($this->table, array("\151\144"), array("\x65\155\x61\x69\x6c" => $email)); if (!empty($user)) { $d["\145\x72\x72\x6f\x72"] = false; $d["\151\144"] = $user->id; } else { $d["\145\162\155\x73\147"] = "\x49\x44\x20\151\156\164\162\x6f\x75\x76\141\x62\154\145\40\x70\x6f\x75\162\40\x63\x65\x74\x20\165\x74\x69\x6c\151\163\141\164\x65\x75\x72"; } } goto gqIDd; rmyJK: $d["\x65\162\x72\157\162"] = true; goto cdTmV; gqIDd: return $d; goto fUw3I; fUw3I: } public function getpassword($id = false) { goto LDCXX; GMc9p: if (!empty($mdp)) { $d = $mdp->pass; } goto Oc471; PiVvz: if ($id == false) { $id = $this->getid(); } goto PUnNL; Oc471: return $d; goto XNny7; PUnNL: $mdp = $this->mydb->get($this->table, array("\x70\x61\x73\x73"), array("\x69\144" => $id)); goto GMc9p; LDCXX: $d = false; goto PiVvz; XNny7: } public function user_exist_by_email($email, $id = false) { goto utrcs; Fl9Tm: return $d; goto TEf1N; Pnxyn: if (!empty($user)) { $d = $user->id; } goto Fl9Tm; Bm4Bt: $where["\145\x6d\141\x69\x6c"] = $email; goto mV2f0; utrcs: $d = false; goto Bm4Bt; B7jtc: $user = $this->mydb->get($this->table, array("\x69\x64"), $where); goto Pnxyn; mV2f0: if ($id !== false) { $where["\151\144"] = array("\74\x3e" => $id); } goto B7jtc; TEf1N: } public function user_exist_by_name($name, $id = false) { goto pk9o4; xHtC8: if (!empty($user)) { $d = $user->id; } goto cYQLo; OqW0Y: if ($id !== false) { $where["\x69\x64"] = array("\74\x3e" => $id); } goto Y3ME9; Y3ME9: $user = $this->mydb->get($this->table, array("\151\x64"), $where); goto xHtC8; cYQLo: return $d; goto BnNhp; pk9o4: $d = false; goto gyQEN; gyQEN: $where["\x6e\141\155\145"] = $name; goto OqW0Y; BnNhp: } public function ban($id) { return $this->mydb->update($this->table, array("\x62\x61\156\x6e\145\144" => 1, "\143\141\x6e\x5f\x6c\157\x67\151\x6e" => 0), array("\x69\144" => $id)); } public function is_banned($id) { goto g7OLv; g7OLv: $d = false; goto Q2BHA; WQqdm: if ($user > 0) { $d = true; } goto LLyJJ; Q2BHA: $user = $this->mydb->count($this->table, array("\151\x64" => $id, "\142\x61\156\x6e\145\144" => 1)); goto WQqdm; LLyJJ: return $d; goto UdEFQ; UdEFQ: } public function can_login($id) { goto QxCFC; zWPV0: return $d; goto URFfI; pZGxo: $user = $this->mydb->count($this->table, array("\x69\x64" => $id, "\x63\x61\x6e\137\154\157\x67\x69\x6e" => 0)); goto CTLuO; QxCFC: $d = false; goto pZGxo; CTLuO: if ($user > 0) { $d = true; } goto zWPV0; URFfI: } public function unban($id) { return $this->mydb->update($this->table, array("\x62\141\156\x6e\x65\x64" => 0, "\143\141\x6e\137\154\x6f\147\x69\156" => 1), array("\151\x64" => $id)); } public function set($nom, $prenom, $name, $email, $sexe, $mdp) { goto CRk7I; huwkg: $pass = hash_password($mdp, $id); goto drLzS; CRk7I: $id = $this->lastid(); goto huwkg; drLzS: return $this->mydb->set($this->table, array("\145\155\141\x69\x6c" => $email, "\x70\x61\163\163" => $pass, "\156\141\155\145" => $name, "\x6e\x6f\155" => $nom, "\160\x72\145\x6e\157\155\x73" => $prenom, "\x73\145\x78\x65" => $sexe, "\x62\x61\156\156\x65\144" => 0, "\163\x65\x63\x72\x65\x74" => generate_password(6))); goto theAw; theAw: } public function update($nom, $prenom, $name, $email, $sexe, $mdp, $id) { $pass = hash_password($mdp, $id); return $this->mydb->update($this->table, array("\x65\155\141\151\154" => $email, "\160\141\x73\163" => $pass, "\156\141\x6d\x65" => $name, "\x6e\157\x6d" => $nom, "\x70\162\x65\156\157\155\163" => $prenom, "\x73\145\170\x65" => $sexe), array("\x69\x64" => $id)); } public function update_info($nom, $prenom, $sexe, $email, $id = false) { if ($id == false) { $id = $this->session->userdata("\x69\x64"); } return $this->mydb->update($this->table, array("\x65\x6d\x61\x69\x6c" => $email, "\x6e\157\x6d" => $nom, "\x70\x72\145\x6e\x6f\x6d\x73" => $prenom, "\163\x65\170\145" => $sexe), array("\151\x64" => $id)); } public function update_password($mdp, $id = false) { goto eviEe; AXTAW: $pass = hash_password($mdp, $id); goto LChGN; LChGN: return $this->mydb->update($this->table, array("\160\141\163\x73" => $pass), array("\x69\x64" => $id)); goto chwi2; eviEe: if ($id == false) { $id = $this->session->userdata("\x69\x64"); } goto AXTAW; chwi2: } private function lastid() { goto SJllt; SJllt: $d = 1; goto Q56tb; HwrZR: return $d; goto UEPu5; dPfzI: if (!empty($user)) { $d = $user->id + 1; } goto HwrZR; Q56tb: $user = $this->mydb->get($this->table, array("\x69\144"), '', '', array("\x69\144" => "\104\x45\123\x43"), array(1)); goto dPfzI; UEPu5: } }
