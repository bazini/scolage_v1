<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:17              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\102\101\123\x45\x50\101\124\110") or exit("\116\157\40\x64\151\x72\145\143\164\40\x73\143\x72\151\160\x74\x20\x61\143\143\x65\x73\x73\x20\x61\x6c\x6c\x6f\x77\145\144"); class CI_Cart { public $product_id_rules = "\x5c\56\x61\x2d\x7a\60\55\71\137\x2d"; public $product_name_rules = "\x5c\x77\40\134\x2d\x5c\x2e\x5c\x3a"; public $product_name_safe = TRUE; protected $CI; protected $_cart_contents = array(); public function __construct($params = array()) { goto dEDHd; v5vYo: if ($this->_cart_contents === NULL) { $this->_cart_contents = array("\143\x61\x72\164\137\x74\x6f\164\x61\154" => 0, "\x74\x6f\x74\x61\x6c\137\151\164\145\x6d\x73" => 0); } goto qnY6w; hYqyM: $config = is_array($params) ? $params : array(); goto hRqJG; hRqJG: $this->CI->load->driver("\x73\145\x73\163\151\157\x6e", $config); goto u6_h2; u6_h2: $this->_cart_contents = $this->CI->session->userdata("\x63\x61\x72\164\137\x63\x6f\x6e\x74\145\x6e\x74\x73"); goto v5vYo; qnY6w: log_message("\x69\x6e\146\x6f", "\x43\x61\x72\x74\40\103\154\x61\163\163\40\111\x6e\x69\x74\x69\141\x6c\x69\172\x65\144"); goto CYqLo; dEDHd: $this->CI =& get_instance(); goto hYqyM; CYqLo: } public function insert($items = array()) { goto casQ3; casQ3: if (!is_array($items) or count($items) === 0) { log_message("\x65\x72\x72\157\162", "\x54\x68\x65\40\151\156\163\145\x72\164\40\x6d\145\164\x68\x6f\144\x20\155\165\163\164\x20\142\x65\x20\x70\141\x73\163\x65\144\x20\141\x6e\x20\141\162\x72\141\171\x20\143\157\156\x74\141\151\x6e\x69\x6e\x67\40\144\x61\x74\x61\56"); return FALSE; } goto W3Ix5; W3Ix5: $save_cart = FALSE; goto zxOPd; u8EGP: if ($save_cart === TRUE) { $this->_save_cart(); return isset($rowid) ? $rowid : TRUE; } goto MUm3Z; MUm3Z: return FALSE; goto OK_6k; zxOPd: if (isset($items["\151\144"])) { if ($rowid = $this->_insert($items)) { $save_cart = TRUE; } } else { foreach ($items as $val) { if (is_array($val) && isset($val["\x69\x64"])) { if ($this->_insert($val)) { $save_cart = TRUE; } } } } goto u8EGP; OK_6k: } protected function _insert($items = array()) { goto weMOf; UBJDk: $this->_cart_contents[$rowid] = $items; goto p5xQJ; weMOf: if (!is_array($items) or count($items) === 0) { log_message("\145\x72\162\x6f\162", "\x54\150\x65\40\151\156\x73\x65\162\x74\x20\x6d\145\164\150\x6f\x64\40\155\165\163\164\40\142\145\x20\160\x61\163\x73\145\x64\x20\x61\x6e\x20\x61\162\162\x61\x79\x20\x63\x6f\x6e\164\141\x69\156\x69\156\147\40\x64\x61\164\x61\56"); return FALSE; } goto IAoeG; g567x: $old_quantity = isset($this->_cart_contents[$rowid]["\161\164\x79"]) ? (int) $this->_cart_contents[$rowid]["\x71\164\171"] : 0; goto kewir; p5xQJ: return $rowid; goto uxKIy; tmSow: $items["\161\x74\x79"] = (float) $items["\161\164\171"]; goto ubsqc; NAnrb: if (!preg_match("\x2f\x5e\133" . $this->product_id_rules . "\x5d\53\44\x2f\151", $items["\x69\144"])) { log_message("\x65\162\162\x6f\x72", "\111\x6e\x76\x61\154\151\144\40\160\x72\x6f\x64\165\x63\164\40\111\104\x2e\x20\x20\x54\x68\145\x20\160\x72\157\x64\165\x63\164\x20\x49\x44\x20\143\x61\x6e\40\157\156\x6c\171\40\x63\x6f\x6e\164\x61\x69\156\40\x61\154\160\x68\x61\x2d\156\x75\155\x65\162\151\x63\x20\143\x68\x61\162\x61\x63\x74\145\162\x73\x2c\40\144\x61\x73\150\x65\x73\54\40\141\x6e\144\x20\x75\156\x64\145\x72\163\143\x6f\x72\x65\163"); return FALSE; } goto lopRz; lopRz: if ($this->product_name_safe && !preg_match("\x2f\136\x5b" . $this->product_name_rules . "\135\x2b\x24\57\x69" . (UTF8_ENABLED ? "\165" : ''), $items["\x6e\141\155\x65"])) { log_message("\x65\162\162\x6f\162", "\x41\x6e\x20\x69\x6e\x76\x61\154\151\x64\x20\x6e\141\x6d\x65\40\167\141\x73\40\x73\165\x62\x6d\151\164\164\145\144\x20\141\x73\x20\164\x68\145\x20\x70\x72\x6f\x64\x75\143\164\40\x6e\x61\x6d\x65\72\40" . $items["\156\141\155\145"] . "\40\x54\x68\145\40\x6e\x61\x6d\145\40\x63\141\x6e\40\x6f\x6e\x6c\x79\x20\143\157\156\164\141\x69\156\x20\141\x6c\x70\150\141\55\x6e\165\155\x65\x72\151\143\x20\x63\x68\141\162\141\x63\164\145\x72\x73\54\x20\144\141\163\x68\145\x73\54\40\165\x6e\x64\x65\162\x73\x63\157\162\x65\x73\x2c\40\x63\157\154\x6f\x6e\163\54\40\141\156\x64\x20\163\160\x61\x63\x65\x73"); return FALSE; } goto IwSpD; CZv5U: if (isset($items["\157\x70\x74\151\157\x6e\163"]) && count($items["\157\x70\x74\x69\x6f\x6e\x73"]) > 0) { $rowid = md5($items["\151\x64"] . serialize($items["\157\160\x74\x69\157\x6e\163"])); } else { $rowid = md5($items["\x69\144"]); } goto g567x; IwSpD: $items["\x70\162\151\143\x65"] = (float) $items["\160\162\151\143\145"]; goto CZv5U; kewir: $items["\x72\157\167\x69\144"] = $rowid; goto NL6sU; IAoeG: if (!isset($items["\151\x64"], $items["\x71\164\x79"], $items["\160\x72\151\x63\145"], $items["\x6e\141\155\145"])) { log_message("\x65\x72\162\x6f\x72", "\x54\150\x65\40\x63\x61\162\164\x20\141\x72\162\141\x79\40\155\165\163\x74\40\x63\x6f\156\x74\141\151\x6e\x20\x61\40\x70\162\157\144\x75\x63\164\x20\x49\x44\x2c\x20\161\x75\141\x6e\x74\x69\x74\171\x2c\40\x70\x72\151\x63\x65\x2c\x20\141\x6e\x64\x20\x6e\141\x6d\145\56"); return FALSE; } goto tmSow; ubsqc: if ($items["\x71\164\171"] == 0) { return FALSE; } goto NAnrb; NL6sU: $items["\161\164\171"] += $old_quantity; goto UBJDk; uxKIy: } public function update($items = array()) { goto McjZa; McjZa: if (!is_array($items) or count($items) === 0) { return FALSE; } goto amd19; lC2v7: if (isset($items["\x72\157\x77\151\x64"])) { if ($this->_update($items) === TRUE) { $save_cart = TRUE; } } else { foreach ($items as $val) { if (is_array($val) && isset($val["\x72\x6f\x77\151\144"])) { if ($this->_update($val) === TRUE) { $save_cart = TRUE; } } } } goto nf1tM; nf1tM: if ($save_cart === TRUE) { $this->_save_cart(); return TRUE; } goto ZUEOR; ZUEOR: return FALSE; goto cK9Qs; amd19: $save_cart = FALSE; goto lC2v7; cK9Qs: } protected function _update($items = array()) { goto KoUSx; Lx1Ym: $keys = array_intersect(array_keys($this->_cart_contents[$items["\162\157\167\x69\x64"]]), array_keys($items)); goto KCwKE; KCwKE: if (isset($items["\x70\x72\151\x63\145"])) { $items["\160\162\151\x63\x65"] = (float) $items["\160\162\151\x63\x65"]; } goto o28CX; KoUSx: if (!isset($items["\162\157\167\151\x64"], $this->_cart_contents[$items["\x72\x6f\167\x69\x64"]])) { return FALSE; } goto ViXtM; o28CX: foreach (array_diff($keys, array("\151\144", "\x6e\141\155\145")) as $key) { $this->_cart_contents[$items["\x72\157\x77\x69\x64"]][$key] = $items[$key]; } goto xabFm; ViXtM: if (isset($items["\x71\x74\x79"])) { $items["\161\164\171"] = (float) $items["\161\x74\171"]; if ($items["\x71\164\x79"] == 0) { unset($this->_cart_contents[$items["\x72\x6f\167\151\144"]]); return TRUE; } } goto Lx1Ym; xabFm: return TRUE; goto zq6Pn; zq6Pn: } protected function _save_cart() { goto AYOWG; sp6zY: return TRUE; goto dddnh; JRlqg: $this->CI->session->set_userdata(array("\x63\x61\x72\x74\x5f\143\x6f\156\164\145\x6e\164\x73" => $this->_cart_contents)); goto sp6zY; QLwvr: if (count($this->_cart_contents) <= 2) { $this->CI->session->unset_userdata("\x63\141\x72\x74\137\x63\157\156\164\x65\x6e\x74\163"); return FALSE; } goto JRlqg; VbAvN: foreach ($this->_cart_contents as $key => $val) { goto zLoeF; Wi4SD: $this->_cart_contents["\143\141\162\x74\x5f\164\157\x74\x61\154"] += $val["\160\162\151\x63\145"] * $val["\x71\x74\x79"]; goto mGsg3; mGsg3: $this->_cart_contents["\164\x6f\164\x61\x6c\x5f\151\164\x65\155\163"] += $val["\161\164\x79"]; goto o5aGj; zLoeF: if (!is_array($val) or !isset($val["\x70\x72\x69\143\x65"], $val["\x71\x74\x79"])) { continue; } goto Wi4SD; o5aGj: $this->_cart_contents[$key]["\x73\165\x62\164\157\164\x61\x6c"] = $this->_cart_contents[$key]["\160\x72\151\x63\x65"] * $this->_cart_contents[$key]["\x71\x74\x79"]; goto WSq0o; WSq0o: } goto QLwvr; AYOWG: $this->_cart_contents["\164\157\x74\141\154\x5f\151\x74\x65\x6d\x73"] = $this->_cart_contents["\143\x61\x72\164\x5f\164\157\164\141\x6c"] = 0; goto VbAvN; dddnh: } public function total() { return $this->_cart_contents["\143\141\162\164\x5f\164\x6f\164\x61\154"]; } public function remove($rowid) { goto Uhakf; Uhakf: unset($this->_cart_contents[$rowid]); goto PoTtT; aND1x: return TRUE; goto flW1l; PoTtT: $this->_save_cart(); goto aND1x; flW1l: } public function total_items() { return $this->_cart_contents["\164\x6f\x74\x61\x6c\137\x69\x74\145\x6d\x73"]; } public function contents($newest_first = FALSE) { goto SuBgF; hV81_: return $cart; goto izKkH; VItot: unset($cart["\x74\x6f\164\x61\x6c\137\x69\164\x65\155\x73"]); goto J4F_6; SuBgF: $cart = $newest_first ? array_reverse($this->_cart_contents) : $this->_cart_contents; goto VItot; J4F_6: unset($cart["\143\141\x72\164\137\164\157\164\141\154"]); goto hV81_; izKkH: } public function get_item($row_id) { return (in_array($row_id, array("\x74\157\164\141\154\137\151\x74\145\155\163", "\x63\x61\162\x74\x5f\x74\157\x74\x61\x6c"), TRUE) or !isset($this->_cart_contents[$row_id])) ? FALSE : $this->_cart_contents[$row_id]; } public function has_options($row_id = '') { return isset($this->_cart_contents[$row_id]["\x6f\x70\164\151\157\x6e\163"]) && count($this->_cart_contents[$row_id]["\157\160\x74\x69\x6f\x6e\x73"]) !== 0; } public function product_options($row_id = '') { return isset($this->_cart_contents[$row_id]["\157\x70\164\x69\x6f\x6e\163"]) ? $this->_cart_contents[$row_id]["\x6f\x70\164\151\x6f\x6e\163"] : array(); } public function format_number($n = '') { return $n === '' ? '' : number_format((float) $n, 2, "\56", "\x2c"); } public function destroy() { $this->_cart_contents = array("\x63\141\x72\x74\x5f\x74\157\164\141\154" => 0, "\x74\x6f\x74\141\154\x5f\x69\164\145\x6d\x73" => 0); $this->CI->session->unset_userdata("\143\x61\x72\x74\x5f\x63\157\156\x74\x65\156\164\163"); } }
