<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:16              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\102\x41\x53\105\x50\x41\x54\x48") or exit("\116\157\40\144\x69\162\x65\143\164\x20\x73\x63\x72\151\160\164\40\x61\x63\143\145\x73\x73\40\141\x6c\154\157\167\145\144"); abstract class CI_DB_query_builder extends CI_DB_driver { protected $return_delete_sql = FALSE; protected $reset_delete_data = FALSE; protected $qb_select = array(); protected $qb_distinct = FALSE; protected $qb_from = array(); protected $qb_join = array(); protected $qb_where = array(); protected $qb_groupby = array(); protected $qb_having = array(); protected $qb_keys = array(); protected $qb_limit = FALSE; protected $qb_offset = FALSE; protected $qb_orderby = array(); protected $qb_set = array(); protected $qb_set_ub = array(); protected $qb_aliased_tables = array(); protected $qb_where_group_started = FALSE; protected $qb_where_group_count = 0; protected $qb_caching = FALSE; protected $qb_cache_exists = array(); protected $qb_cache_select = array(); protected $qb_cache_from = array(); protected $qb_cache_join = array(); protected $qb_cache_aliased_tables = array(); protected $qb_cache_where = array(); protected $qb_cache_groupby = array(); protected $qb_cache_having = array(); protected $qb_cache_orderby = array(); protected $qb_cache_set = array(); protected $qb_no_escape = array(); protected $qb_cache_no_escape = array(); public function select($select = "\52", $escape = NULL) { goto KmhiB; ZATZ3: foreach ($select as $val) { $val = trim($val); if ($val !== '') { goto DptO3; DptO3: $this->qb_select[] = $val; goto l1Cjb; l1Cjb: $this->qb_no_escape[] = $escape; goto qtOQe; qtOQe: if ($this->qb_caching === TRUE) { goto zDS9E; YqFKo: $this->qb_cache_exists[] = "\163\x65\x6c\145\x63\164"; goto rE8o4; zDS9E: $this->qb_cache_select[] = $val; goto YqFKo; rE8o4: $this->qb_cache_no_escape[] = $escape; goto lyH_l; lyH_l: } goto FRaKl; FRaKl: } } goto g0UDl; KmhiB: if (is_string($select)) { $select = explode("\54", $select); } goto Zq5n5; Zq5n5: is_bool($escape) or $escape = $this->_protect_identifiers; goto ZATZ3; g0UDl: return $this; goto B54Zg; B54Zg: } public function select_max($select = '', $alias = '') { return $this->_max_min_avg_sum($select, $alias, "\115\101\x58"); } public function select_min($select = '', $alias = '') { return $this->_max_min_avg_sum($select, $alias, "\115\x49\116"); } public function select_avg($select = '', $alias = '') { return $this->_max_min_avg_sum($select, $alias, "\101\126\107"); } public function select_sum($select = '', $alias = '') { return $this->_max_min_avg_sum($select, $alias, "\123\x55\x4d"); } protected function _max_min_avg_sum($select = '', $alias = '', $type = "\x4d\101\x58") { goto hWBqB; E0uTN: $this->qb_select[] = $sql; goto NaKgu; NaKgu: $this->qb_no_escape[] = NULL; goto U9TFk; KKL_E: if (!in_array($type, array("\x4d\101\130", "\115\111\116", "\101\x56\107", "\x53\125\x4d"))) { show_error("\111\156\x76\x61\154\x69\144\40\x66\165\x6e\143\164\x69\157\156\x20\164\x79\160\145\72\x20" . $type); } goto p4t7Y; Z5146: $sql = $type . "\50" . $this->protect_identifiers(trim($select)) . "\x29\40\101\x53\x20" . $this->escape_identifiers(trim($alias)); goto E0uTN; X0p4h: return $this; goto mg4XL; hWBqB: if (!is_string($select) or $select === '') { $this->display_error("\144\142\x5f\x69\x6e\x76\141\154\x69\x64\137\x71\x75\145\162\171"); } goto f8Yj6; p4t7Y: if ($alias === '') { $alias = $this->_create_alias_from_table(trim($select)); } goto Z5146; f8Yj6: $type = strtoupper($type); goto KKL_E; U9TFk: if ($this->qb_caching === TRUE) { $this->qb_cache_select[] = $sql; $this->qb_cache_exists[] = "\163\145\154\145\143\164"; } goto X0p4h; mg4XL: } protected function _create_alias_from_table($item) { if (strpos($item, "\x2e") !== FALSE) { $item = explode("\x2e", $item); return end($item); } return $item; } public function distinct($val = TRUE) { $this->qb_distinct = is_bool($val) ? $val : TRUE; return $this; } public function from($from) { foreach ((array) $from as $val) { if (strpos($val, "\x2c") !== FALSE) { foreach (explode("\x2c", $val) as $v) { goto c5qjF; hxoUc: $this->_track_aliases($v); goto LF1a6; LF1a6: $this->qb_from[] = $v = $this->protect_identifiers($v, TRUE, NULL, FALSE); goto RNj1V; c5qjF: $v = trim($v); goto hxoUc; RNj1V: if ($this->qb_caching === TRUE) { $this->qb_cache_from[] = $v; $this->qb_cache_exists[] = "\x66\x72\157\x6d"; } goto ijAca; ijAca: } } else { goto irdjs; T4wsE: $this->qb_from[] = $val = $this->protect_identifiers($val, TRUE, NULL, FALSE); goto oLxOx; hwOQw: $this->_track_aliases($val); goto T4wsE; irdjs: $val = trim($val); goto hwOQw; oLxOx: if ($this->qb_caching === TRUE) { $this->qb_cache_from[] = $val; $this->qb_cache_exists[] = "\146\162\157\155"; } goto PWGk6; PWGk6: } } return $this; } public function join($table, $cond, $type = '', $escape = NULL) { goto Hqzvk; Bl5VU: if ($this->qb_caching === TRUE) { $this->qb_cache_join[] = $join; $this->qb_cache_exists[] = "\x6a\157\x69\156"; } goto HNtxh; Hqzvk: if ($type !== '') { $type = strtoupper(trim($type)); if (!in_array($type, array("\114\105\106\124", "\x52\111\x47\110\x54", "\117\x55\x54\105\x52", "\x49\x4e\x4e\x45\122", "\x4c\105\x46\x54\x20\x4f\x55\124\105\x52", "\122\111\x47\x48\124\40\x4f\125\x54\105\122"), TRUE)) { $type = ''; } else { $type .= "\x20"; } } goto pNWrG; IKRd8: if (!$this->_has_operator($cond)) { $cond = "\x20\x55\123\111\x4e\x47\40\x28" . ($escape ? $this->escape_identifiers($cond) : $cond) . "\51"; } elseif ($escape === FALSE) { $cond = "\x20\117\x4e\40" . $cond; } else { goto iANKi; gye8B: for ($i = 0, $c = count($conditions); $i < $c; $i++) { $operator = $this->_get_operator($conditions[$i]); $cond .= $joints[$i]; $cond .= preg_match("\x2f\x28\x5c\x28\52\51\77\50\133\134\133\x5c\x5d\134\167\134\x2e\47\x2d\135\53\x29" . preg_quote($operator) . "\50\x2e\52\x29\57\151", $conditions[$i], $match) ? $match[1] . $this->protect_identifiers($match[2]) . $operator . $this->protect_identifiers($match[3]) : $conditions[$i]; } goto iAtvS; iANKi: if (preg_match_all("\x2f\x5c\x73\101\116\x44\x5c\163\174\x5c\163\x4f\122\x5c\x73\x2f\151", $cond, $joints, PREG_OFFSET_CAPTURE)) { goto I6iQq; orJE2: array_unshift($joints, array('', 0)); goto Mvoes; hr1Hm: $joints = $joints[0]; goto orJE2; Mvoes: for ($i = count($joints) - 1, $pos = strlen($cond); $i >= 0; $i--) { $joints[$i][1] += strlen($joints[$i][0]); $conditions[$i] = substr($cond, $joints[$i][1], $pos - $joints[$i][1]); $pos = $joints[$i][1] - strlen($joints[$i][0]); $joints[$i] = $joints[$i][0]; } goto acmj6; I6iQq: $conditions = array(); goto hr1Hm; acmj6: } else { $conditions = array($cond); $joints = array(''); } goto tL0RP; tL0RP: $cond = "\x20\117\116\x20"; goto gye8B; iAtvS: } goto xgHE8; EBC70: is_bool($escape) or $escape = $this->_protect_identifiers; goto IKRd8; zEcl0: $this->qb_join[] = $join = $type . "\x4a\x4f\111\116\40" . $table . $cond; goto Bl5VU; HNtxh: return $this; goto mi_Ey; xgHE8: if ($escape === TRUE) { $table = $this->protect_identifiers($table, TRUE, NULL, FALSE); } goto zEcl0; pNWrG: $this->_track_aliases($table); goto EBC70; mi_Ey: } public function where($key, $value = NULL, $escape = NULL) { return $this->_wh("\161\x62\137\167\150\145\162\x65", $key, $value, "\101\116\104\x20", $escape); } public function or_where($key, $value = NULL, $escape = NULL) { return $this->_wh("\x71\142\x5f\167\x68\145\162\145", $key, $value, "\117\122\x20", $escape); } protected function _wh($qb_key, $key, $value = NULL, $type = "\x41\x4e\104\40", $escape = NULL) { goto LdYA3; ItEsa: return $this; goto FLDBF; LdYA3: $qb_cache_key = $qb_key === "\x71\x62\x5f\150\x61\x76\151\156\147" ? "\x71\142\x5f\x63\141\x63\150\145\x5f\x68\141\166\x69\156\x67" : "\161\142\x5f\143\141\x63\x68\x65\137\167\x68\145\x72\x65"; goto bHuXP; TzYiF: is_bool($escape) or $escape = $this->_protect_identifiers; goto GxyjU; bHuXP: if (!is_array($key)) { $key = array($key => $value); } goto TzYiF; GxyjU: foreach ($key as $k => $v) { goto neI03; dCdjm: $this->{$qb_key}[] = ${$qb_key}; goto ApHIw; t8hjO: if ($v !== NULL) { if ($escape === TRUE) { $v = $this->escape($v); } if (!$this->_has_operator($k)) { $k .= "\40\x3d\x20"; } } elseif (!$this->_has_operator($k)) { $k .= "\40\x49\123\40\x4e\125\114\x4c"; } elseif (preg_match("\x2f\x5c\163\x2a\x28\x21\77\75\x7c\74\76\x7c\x5c\x73\111\123\x28\77\72\x5c\x73\53\116\117\x54\x29\x3f\x5c\163\51\134\163\52\44\x2f\151", $k, $match, PREG_OFFSET_CAPTURE)) { $k = substr($k, 0, $match[0][1]) . ($match[1][0] === "\x3d" ? "\x20\111\x53\40\x4e\x55\114\x4c" : "\x20\111\123\x20\x4e\x4f\x54\x20\116\125\x4c\114"); } goto CBEcd; neI03: $prefix = count($this->{$qb_key}) === 0 && count($this->{$qb_cache_key}) === 0 ? $this->_group_get_type('') : $this->_group_get_type($type); goto t8hjO; CBEcd: ${$qb_key} = array("\x63\157\x6e\144\x69\x74\151\x6f\156" => $prefix . $k, "\166\x61\x6c\165\x65" => $v, "\145\163\143\x61\x70\x65" => $escape); goto dCdjm; ApHIw: if ($this->qb_caching === TRUE) { $this->{$qb_cache_key}[] = ${$qb_key}; $this->qb_cache_exists[] = substr($qb_key, 3); } goto zZ1TL; zZ1TL: } goto ItEsa; FLDBF: } public function where_in($key = NULL, $values = NULL, $escape = NULL) { return $this->_where_in($key, $values, FALSE, "\101\116\104\x20", $escape); } public function or_where_in($key = NULL, $values = NULL, $escape = NULL) { return $this->_where_in($key, $values, FALSE, "\x4f\122\x20", $escape); } public function where_not_in($key = NULL, $values = NULL, $escape = NULL) { return $this->_where_in($key, $values, TRUE, "\x41\116\x44\x20", $escape); } public function or_where_not_in($key = NULL, $values = NULL, $escape = NULL) { return $this->_where_in($key, $values, TRUE, "\117\122\x20", $escape); } protected function _where_in($key = NULL, $values = NULL, $not = FALSE, $type = "\101\x4e\104\40", $escape = NULL) { goto VYtey; m0Hrf: $prefix = count($this->qb_where) === 0 && count($this->qb_cache_where) === 0 ? $this->_group_get_type('') : $this->_group_get_type($type); goto cHOYV; CfCmX: is_bool($escape) or $escape = $this->_protect_identifiers; goto d8sln; Vpiuw: if (!is_array($values)) { $values = array($values); } goto CfCmX; AxXDd: return $this; goto xMyOw; cHOYV: $where_in = array("\x63\x6f\156\x64\151\x74\151\157\156" => $prefix . $key . $not . "\x20\111\116\x28" . implode("\54\x20", $where_in) . "\x29", "\x76\x61\154\165\x65" => NULL, "\145\x73\143\141\x70\x65" => $escape); goto M2s2k; d8sln: $not = $not ? "\x20\x4e\x4f\124" : ''; goto fItac; VYtey: if ($key === NULL or $values === NULL) { return $this; } goto Vpiuw; aLdM1: if ($this->qb_caching === TRUE) { $this->qb_cache_where[] = $where_in; $this->qb_cache_exists[] = "\x77\150\x65\x72\x65"; } goto AxXDd; M2s2k: $this->qb_where[] = $where_in; goto aLdM1; fItac: if ($escape === TRUE) { $where_in = array(); foreach ($values as $value) { $where_in[] = $this->escape($value); } } else { $where_in = array_values($values); } goto m0Hrf; xMyOw: } public function like($field, $match = '', $side = "\x62\x6f\x74\150", $escape = NULL) { return $this->_like($field, $match, "\x41\116\104\x20", $side, '', $escape); } public function not_like($field, $match = '', $side = "\x62\157\x74\x68", $escape = NULL) { return $this->_like($field, $match, "\x41\116\x44\x20", $side, "\116\x4f\124", $escape); } public function or_like($field, $match = '', $side = "\x62\157\164\150", $escape = NULL) { return $this->_like($field, $match, "\x4f\122\x20", $side, '', $escape); } public function or_not_like($field, $match = '', $side = "\x62\157\164\x68", $escape = NULL) { return $this->_like($field, $match, "\x4f\122\x20", $side, "\116\117\124", $escape); } protected function _like($field, $match = '', $type = "\101\x4e\104\x20", $side = "\x62\157\164\150", $not = '', $escape = NULL) { goto ocus2; UDA70: is_bool($escape) or $escape = $this->_protect_identifiers; goto Rzxnn; ocus2: if (!is_array($field)) { $field = array($field => $match); } goto UDA70; Rzxnn: $side = strtolower($side); goto kRiLP; kRiLP: foreach ($field as $k => $v) { goto Hr5uD; ZuYqe: if ($escape === TRUE && $this->_like_escape_str !== '') { $v .= sprintf($this->_like_escape_str, $this->_like_escape_chr); } goto YRukr; kxxbM: if ($escape === TRUE) { $v = $this->escape_like_str($v); } goto h1XbI; Chjn7: if ($this->qb_caching === TRUE) { $this->qb_cache_where[] = $qb_where; $this->qb_cache_exists[] = "\x77\150\145\x72\x65"; } goto XRUJF; MrU4j: $this->qb_where[] = $qb_where; goto Chjn7; Hr5uD: $prefix = count($this->qb_where) === 0 && count($this->qb_cache_where) === 0 ? $this->_group_get_type('') : $this->_group_get_type($type); goto kxxbM; YRukr: $qb_where = array("\143\157\156\x64\x69\164\151\157\156" => "{$prefix}\40{$k}\40{$not}\x20\114\x49\113\105\x20{$v}", "\x76\141\154\x75\x65" => NULL, "\145\163\143\x61\x70\145" => $escape); goto MrU4j; h1XbI: switch ($side) { case "\156\157\156\x65": $v = "\47{$v}\47"; break; case "\x62\145\x66\x6f\162\145": $v = "\x27\x25{$v}\x27"; break; case "\x61\x66\164\145\162": $v = "\47{$v}\45\x27"; break; case "\142\157\164\150": default: $v = "\x27\45{$v}\45\x27"; break; } goto ZuYqe; XRUJF: } goto TBMPv; TBMPv: return $this; goto CKMrh; CKMrh: } public function group_start($not = '', $type = "\101\116\104\x20") { goto aHjSj; aHjSj: $type = $this->_group_get_type($type); goto ugI7z; PkWPJ: $this->qb_where[] = $where; goto uwh8h; v1x5M: return $this; goto YswIc; ugI7z: $this->qb_where_group_started = TRUE; goto u29UU; uwh8h: if ($this->qb_caching) { $this->qb_cache_where[] = $where; } goto v1x5M; u29UU: $prefix = count($this->qb_where) === 0 && count($this->qb_cache_where) === 0 ? '' : $type; goto ytUmM; ytUmM: $where = array("\143\157\156\x64\151\x74\151\x6f\156" => $prefix . $not . str_repeat("\x20", ++$this->qb_where_group_count) . "\40\x28", "\166\141\x6c\x75\145" => NULL, "\x65\x73\143\x61\x70\145" => FALSE); goto PkWPJ; YswIc: } public function or_group_start() { return $this->group_start('', "\x4f\122\40"); } public function not_group_start() { return $this->group_start("\x4e\x4f\124\x20", "\x41\x4e\x44\x20"); } public function or_not_group_start() { return $this->group_start("\x4e\x4f\x54\40", "\117\122\40"); } public function group_end() { goto js1M0; js1M0: $this->qb_where_group_started = FALSE; goto Gx6nC; pLqI8: return $this; goto hwQW7; AoRRk: if ($this->qb_caching) { $this->qb_cache_where[] = $where; } goto pLqI8; Gx6nC: $where = array("\x63\x6f\x6e\144\151\x74\x69\x6f\156" => str_repeat("\x20", $this->qb_where_group_count--) . "\x29", "\166\x61\x6c\165\x65" => NULL, "\145\163\x63\141\160\145" => FALSE); goto tPsBi; tPsBi: $this->qb_where[] = $where; goto AoRRk; hwQW7: } protected function _group_get_type($type) { if ($this->qb_where_group_started) { $type = ''; $this->qb_where_group_started = FALSE; } return $type; } public function group_by($by, $escape = NULL) { goto OuDIy; yMa6n: return $this; goto E9wzq; OuDIy: is_bool($escape) or $escape = $this->_protect_identifiers; goto khvU1; khvU1: if (is_string($by)) { $by = $escape === TRUE ? explode("\54", $by) : array($by); } goto FddzU; FddzU: foreach ($by as $val) { $val = trim($val); if ($val !== '') { goto aGzUG; aGzUG: $val = array("\146\151\145\x6c\x64" => $val, "\x65\x73\143\x61\160\x65" => $escape); goto GfI_9; sViaW: if ($this->qb_caching === TRUE) { $this->qb_cache_groupby[] = $val; $this->qb_cache_exists[] = "\147\162\x6f\165\160\x62\x79"; } goto TsHhn; GfI_9: $this->qb_groupby[] = $val; goto sViaW; TsHhn: } } goto yMa6n; E9wzq: } public function having($key, $value = NULL, $escape = NULL) { return $this->_wh("\161\x62\137\150\141\166\x69\156\x67", $key, $value, "\101\x4e\x44\x20", $escape); } public function or_having($key, $value = NULL, $escape = NULL) { return $this->_wh("\x71\x62\x5f\x68\141\x76\151\156\147", $key, $value, "\117\122\x20", $escape); } public function order_by($orderby, $direction = '', $escape = NULL) { goto g8nQm; e7y55: if ($escape === FALSE) { $qb_orderby[] = array("\x66\x69\x65\x6c\144" => $orderby, "\144\151\162\145\x63\x74\x69\157\x6e" => $direction, "\145\163\143\141\160\145" => FALSE); } else { $qb_orderby = array(); foreach (explode("\x2c", $orderby) as $field) { $qb_orderby[] = $direction === '' && preg_match("\57\x5c\163\53\50\x41\x53\x43\174\x44\x45\123\x43\x29\44\57\x69", rtrim($field), $match, PREG_OFFSET_CAPTURE) ? array("\146\151\145\154\144" => ltrim(substr($field, 0, $match[0][1])), "\x64\151\x72\x65\x63\164\x69\157\156" => "\40" . $match[1][0], "\145\163\x63\141\160\x65" => TRUE) : array("\x66\151\x65\154\144" => trim($field), "\x64\151\162\x65\x63\164\151\157\x6e" => $direction, "\145\x73\143\141\160\x65" => TRUE); } } goto e4BeG; rK3ck: if ($this->qb_caching === TRUE) { $this->qb_cache_orderby = array_merge($this->qb_cache_orderby, $qb_orderby); $this->qb_cache_exists[] = "\x6f\x72\x64\145\x72\142\x79"; } goto bB1FQ; e4BeG: $this->qb_orderby = array_merge($this->qb_orderby, $qb_orderby); goto rK3ck; j_f3e: if ($direction === "\x52\101\x4e\104\x4f\x4d") { $direction = ''; $orderby = ctype_digit((string) $orderby) ? sprintf($this->_random_keyword[1], $orderby) : $this->_random_keyword[0]; } elseif (empty($orderby)) { return $this; } elseif ($direction !== '') { $direction = in_array($direction, array("\101\123\x43", "\104\x45\x53\103"), TRUE) ? "\x20" . $direction : ''; } goto g8SNw; g8SNw: is_bool($escape) or $escape = $this->_protect_identifiers; goto e7y55; bB1FQ: return $this; goto CdxFA; g8nQm: $direction = strtoupper(trim($direction)); goto j_f3e; CdxFA: } public function limit($value, $offset = 0) { goto fK7qP; fK7qP: is_null($value) or $this->qb_limit = (int) $value; goto lw6XJ; lw6XJ: empty($offset) or $this->qb_offset = (int) $offset; goto E8RKi; E8RKi: return $this; goto jOhjB; jOhjB: } public function offset($offset) { empty($offset) or $this->qb_offset = (int) $offset; return $this; } protected function _limit($sql) { return $sql . "\x20\x4c\x49\x4d\x49\x54\40" . ($this->qb_offset ? $this->qb_offset . "\54\x20" : '') . (int) $this->qb_limit; } public function set($key, $value = '', $escape = NULL) { goto Ex1Id; wmEvj: is_bool($escape) or $escape = $this->_protect_identifiers; goto E3Dy_; E3Dy_: foreach ($key as $k => $v) { $this->qb_set[$this->protect_identifiers($k, FALSE, $escape)] = $escape ? $this->escape($v) : $v; } goto cgex8; cgex8: return $this; goto QU_fz; baUQl: if (!is_array($key)) { $key = array($key => $value); } goto wmEvj; Ex1Id: $key = $this->_object_to_array($key); goto baUQl; QU_fz: } public function get_compiled_select($table = '', $reset = TRUE) { goto u1gis; H20SJ: $select = $this->_compile_select(); goto Frpxc; gvl7t: return $select; goto xp0_L; u1gis: if ($table !== '') { $this->_track_aliases($table); $this->from($table); } goto H20SJ; Frpxc: if ($reset === TRUE) { $this->_reset_select(); } goto gvl7t; xp0_L: } public function get($table = '', $limit = NULL, $offset = NULL) { goto L7g9W; bWKif: return $result; goto eB6x0; S2LGV: if (!empty($limit)) { $this->limit($limit, $offset); } goto l2xtn; l2xtn: $result = $this->query($this->_compile_select()); goto jmPTh; jmPTh: $this->_reset_select(); goto bWKif; L7g9W: if ($table !== '') { $this->_track_aliases($table); $this->from($table); } goto S2LGV; eB6x0: } public function count_all_results($table = '', $reset = TRUE) { goto NrX61; OiZU0: return (int) $row->numrows; goto K9tAd; SU9vw: $qb_orderby = $this->qb_orderby; goto lG2Mh; eEfJ1: $this->qb_orderby = $this->qb_cache_orderby = array(); goto Q2O3n; NrX61: if ($table !== '') { $this->_track_aliases($table); $this->from($table); } goto SU9vw; pP9nC: if ($result->num_rows() === 0) { return 0; } goto AvjWl; Q2O3n: $result = ($this->qb_distinct === TRUE or !empty($this->qb_groupby) or !empty($this->qb_cache_groupby) or $this->qb_limit or $this->qb_offset) ? $this->query($this->_count_string . $this->protect_identifiers("\x6e\165\155\162\157\x77\x73") . "\xa\106\x52\117\x4d\40\50\xa" . $this->_compile_select() . "\12\x29\x20\103\x49\x5f\143\157\x75\x6e\164\137\141\154\x6c\137\x72\x65\x73\165\154\x74\163") : $this->query($this->_compile_select($this->_count_string . $this->protect_identifiers("\x6e\x75\x6d\x72\157\x77\163"))); goto EGf8W; AvjWl: $row = $result->row(); goto OiZU0; EGf8W: if ($reset === TRUE) { $this->_reset_select(); } else { $this->qb_orderby = $qb_orderby; $this->qb_cache_orderby = $qb_cache_orderby; } goto pP9nC; lG2Mh: $qb_cache_orderby = $this->qb_cache_orderby; goto eEfJ1; K9tAd: } public function get_where($table = '', $where = NULL, $limit = NULL, $offset = NULL) { goto vOYt5; IA7FQ: if ($where !== NULL) { $this->where($where); } goto xNIDo; vOYt5: if ($table !== '') { $this->from($table); } goto IA7FQ; ke8d5: return $result; goto j1ucD; xNIDo: if (!empty($limit)) { $this->limit($limit, $offset); } goto zmTGA; zmTGA: $result = $this->query($this->_compile_select()); goto ixq39; ixq39: $this->_reset_select(); goto ke8d5; j1ucD: } public function insert_batch($table, $set = NULL, $escape = NULL, $batch_size = 100) { goto rM10T; i0LR1: if (strlen($table) === 0) { if (!isset($this->qb_from[0])) { return $this->db_debug ? $this->display_error("\144\142\137\x6d\165\x73\164\x5f\x73\x65\x74\137\164\141\x62\x6c\145") : FALSE; } $table = $this->qb_from[0]; } goto MnC9k; rM10T: if ($set === NULL) { if (empty($this->qb_set)) { return $this->db_debug ? $this->display_error("\x64\142\137\155\x75\163\164\137\165\x73\145\x5f\x73\x65\x74") : FALSE; } } else { if (empty($set)) { return $this->db_debug ? $this->display_error("\x69\x6e\x73\x65\x72\164\137\x62\x61\164\x63\x68\50\x29\40\143\141\154\x6c\145\x64\x20\167\x69\164\150\x20\156\157\40\x64\x61\164\x61") : FALSE; } $this->set_insert_batch($set, '', $escape); } goto i0LR1; mKGEb: for ($i = 0, $total = count($this->qb_set); $i < $total; $i += $batch_size) { if ($this->query($this->_insert_batch($this->protect_identifiers($table, TRUE, $escape, FALSE), $this->qb_keys, array_slice($this->qb_set, $i, $batch_size)))) { $affected_rows += $this->affected_rows(); } } goto B4jYP; MnC9k: $affected_rows = 0; goto mKGEb; bfV3N: return $affected_rows; goto aGrcb; B4jYP: $this->_reset_write(); goto bfV3N; aGrcb: } protected function _insert_batch($table, $keys, $values) { return "\x49\x4e\x53\x45\122\x54\x20\x49\x4e\x54\117\40" . $table . "\40\x28" . implode("\54\40", $keys) . "\51\40\x56\x41\x4c\x55\x45\123\40" . implode("\54\x20", $values); } public function set_insert_batch($key, $value = '', $escape = NULL) { goto pf6Ai; NY_H9: return $this; goto y2a7v; pf6Ai: $key = $this->_object_to_array_batch($key); goto dfeY6; iamZN: foreach ($key as $row) { goto i_jIJ; xT2Ji: if ($escape !== FALSE) { goto B2hyN; b7Sxe: foreach ($row as $value) { $clean[] = $this->escape($value); } goto QGK3w; B2hyN: $clean = array(); goto b7Sxe; QGK3w: $row = $clean; goto VFi7x; VFi7x: } goto cGhpb; i_jIJ: $row = $this->_object_to_array($row); goto qBLHu; h9mDs: ksort($row); goto xT2Ji; cGhpb: $this->qb_set[] = "\x28" . implode("\x2c", $row) . "\x29"; goto UEjVK; qBLHu: if (count(array_diff($keys, array_keys($row))) > 0 or count(array_diff(array_keys($row), $keys)) > 0) { $this->qb_set[] = array(); return; } goto h9mDs; UEjVK: } goto mniHr; cLGJG: sort($keys); goto iamZN; dfeY6: if (!is_array($key)) { $key = array($key => $value); } goto B9b9E; B9b9E: is_bool($escape) or $escape = $this->_protect_identifiers; goto zUKM8; zUKM8: $keys = array_keys($this->_object_to_array(reset($key))); goto cLGJG; mniHr: foreach ($keys as $k) { $this->qb_keys[] = $this->protect_identifiers($k, FALSE, $escape); } goto NY_H9; y2a7v: } public function get_compiled_insert($table = '', $reset = TRUE) { goto VOjGB; VOjGB: if ($this->_validate_insert($table) === FALSE) { return FALSE; } goto sdppj; UUWDK: if ($reset === TRUE) { $this->_reset_write(); } goto WTJpd; sdppj: $sql = $this->_insert($this->protect_identifiers($this->qb_from[0], TRUE, NULL, FALSE), array_keys($this->qb_set), array_values($this->qb_set)); goto UUWDK; WTJpd: return $sql; goto zxLLD; zxLLD: } public function insert($table = '', $set = NULL, $escape = NULL) { goto kTBGc; RqwmQ: if ($this->_validate_insert($table) === FALSE) { return FALSE; } goto gEO5y; gEO5y: $sql = $this->_insert($this->protect_identifiers($this->qb_from[0], TRUE, $escape, FALSE), array_keys($this->qb_set), array_values($this->qb_set)); goto PgoIm; RAGLU: return $this->query($sql); goto y7zTk; kTBGc: if ($set !== NULL) { $this->set($set, '', $escape); } goto RqwmQ; PgoIm: $this->_reset_write(); goto RAGLU; y7zTk: } protected function _validate_insert($table = '') { goto xu9eL; JQcdZ: if ($table !== '') { $this->qb_from[0] = $table; } elseif (!isset($this->qb_from[0])) { return $this->db_debug ? $this->display_error("\x64\142\137\155\165\x73\164\137\163\145\x74\137\x74\x61\x62\x6c\x65") : FALSE; } goto zb88r; zb88r: return TRUE; goto aMLet; xu9eL: if (count($this->qb_set) === 0) { return $this->db_debug ? $this->display_error("\x64\142\137\155\165\163\x74\x5f\165\x73\145\137\163\145\x74") : FALSE; } goto JQcdZ; aMLet: } public function replace($table = '', $set = NULL) { goto OIyIM; k6Ggd: return $this->query($sql); goto v_pdR; ojGKU: $sql = $this->_replace($this->protect_identifiers($table, TRUE, NULL, FALSE), array_keys($this->qb_set), array_values($this->qb_set)); goto N5CjO; OIyIM: if ($set !== NULL) { $this->set($set); } goto TzUoK; N5CjO: $this->_reset_write(); goto k6Ggd; TzUoK: if (count($this->qb_set) === 0) { return $this->db_debug ? $this->display_error("\144\142\137\x6d\165\163\x74\x5f\x75\163\x65\137\163\145\x74") : FALSE; } goto U35jH; U35jH: if ($table === '') { if (!isset($this->qb_from[0])) { return $this->db_debug ? $this->display_error("\144\x62\137\155\x75\x73\164\x5f\x73\145\x74\x5f\x74\141\142\x6c\145") : FALSE; } $table = $this->qb_from[0]; } goto ojGKU; v_pdR: } protected function _replace($table, $keys, $values) { return "\x52\105\x50\114\101\103\x45\x20\111\116\124\x4f\x20" . $table . "\x20\50" . implode("\x2c\x20", $keys) . "\51\x20\x56\101\x4c\x55\105\x53\40\x28" . implode("\x2c\x20", $values) . "\51"; } protected function _from_tables() { return implode("\x2c\40", $this->qb_from); } public function get_compiled_update($table = '', $reset = TRUE) { goto awJnV; JyXNF: return $sql; goto D6ryE; awJnV: $this->_merge_cache(); goto m22Zf; TKg6E: $sql = $this->_update($this->qb_from[0], $this->qb_set); goto S_kU7; m22Zf: if ($this->_validate_update($table) === FALSE) { return FALSE; } goto TKg6E; S_kU7: if ($reset === TRUE) { $this->_reset_write(); } goto JyXNF; D6ryE: } public function update($table = '', $set = NULL, $where = NULL, $limit = NULL) { goto ex_T_; MeAWu: if ($set !== NULL) { $this->set($set); } goto GcKPW; nP_yF: if (!empty($limit)) { $this->limit($limit); } goto AJ3F3; Vkjom: return $this->query($sql); goto yk638; AJ3F3: $sql = $this->_update($this->qb_from[0], $this->qb_set); goto hIyeI; GcKPW: if ($this->_validate_update($table) === FALSE) { return FALSE; } goto LoqLx; hIyeI: $this->_reset_write(); goto Vkjom; LoqLx: if ($where !== NULL) { $this->where($where); } goto nP_yF; ex_T_: $this->_merge_cache(); goto MeAWu; yk638: } protected function _validate_update($table) { goto d07vC; BwxAy: return TRUE; goto LZMEY; d07vC: if (count($this->qb_set) === 0) { return $this->db_debug ? $this->display_error("\x64\142\137\x6d\x75\163\x74\137\x75\163\145\137\163\x65\164") : FALSE; } goto S3W3v; S3W3v: if ($table !== '') { $this->qb_from = array($this->protect_identifiers($table, TRUE, NULL, FALSE)); } elseif (!isset($this->qb_from[0])) { return $this->db_debug ? $this->display_error("\144\x62\137\155\x75\x73\164\137\163\x65\x74\x5f\164\141\142\x6c\145") : FALSE; } goto BwxAy; LZMEY: } public function update_batch($table, $set = NULL, $index = NULL, $batch_size = 100) { goto AFnl2; nTSof: $affected_rows = 0; goto cSTUt; x5GnJ: if ($set === NULL) { if (empty($this->qb_set_ub)) { return $this->db_debug ? $this->display_error("\144\x62\137\155\x75\163\164\x5f\x75\163\x65\x5f\163\x65\164") : FALSE; } } else { if (empty($set)) { return $this->db_debug ? $this->display_error("\x75\160\x64\141\x74\145\137\142\x61\164\143\150\x28\51\40\143\141\x6c\x6c\145\144\x20\167\151\x74\150\x20\x6e\157\40\x64\x61\164\x61") : FALSE; } $this->set_update_batch($set, $index); } goto mBkEj; L3bkU: return $affected_rows; goto ysyT4; cSTUt: for ($i = 0, $total = count($this->qb_set_ub); $i < $total; $i += $batch_size) { if ($this->query($this->_update_batch($this->protect_identifiers($table, TRUE, NULL, FALSE), array_slice($this->qb_set_ub, $i, $batch_size), $index))) { $affected_rows += $this->affected_rows(); } $this->qb_where = array(); } goto qkWY9; AFnl2: $this->_merge_cache(); goto JcWFz; mBkEj: if (strlen($table) === 0) { if (!isset($this->qb_from[0])) { return $this->db_debug ? $this->display_error("\144\142\x5f\155\x75\163\164\137\163\x65\x74\x5f\x74\x61\x62\x6c\x65") : FALSE; } $table = $this->qb_from[0]; } goto nTSof; qkWY9: $this->_reset_write(); goto L3bkU; JcWFz: if ($index === NULL) { return $this->db_debug ? $this->display_error("\x64\142\137\x6d\165\163\x74\137\x75\x73\x65\x5f\x69\156\144\x65\x78") : FALSE; } goto x5GnJ; ysyT4: } protected function _update_batch($table, $values, $index) { goto GXnPz; GXnPz: $ids = array(); goto RmaL0; RmaL0: foreach ($values as $key => $val) { $ids[] = $val[$index]["\166\x61\x6c\x75\145"]; foreach (array_keys($val) as $field) { if ($field !== $index) { $final[$val[$field]["\x66\x69\145\x6c\x64"]][] = "\127\x48\x45\x4e\x20" . $val[$index]["\x66\x69\145\154\144"] . "\40\75\40" . $val[$index]["\166\141\154\165\145"] . "\40\124\110\x45\x4e\x20" . $val[$field]["\166\x61\154\x75\x65"]; } } } goto aMuEJ; RQCke: $this->where($val[$index]["\x66\151\145\x6c\144"] . "\40\111\116\x28" . implode("\x2c", $ids) . "\x29", NULL, FALSE); goto r0w7A; WFXJ0: foreach ($final as $k => $v) { $cases .= $k . "\x20\x3d\40\103\101\x53\x45\40\12" . implode("\xa", $v) . "\12" . "\x45\114\123\x45\40" . $k . "\x20\105\x4e\104\x2c\x20"; } goto RQCke; r0w7A: return "\x55\120\x44\101\124\105\x20" . $table . "\40\x53\x45\x54\x20" . substr($cases, 0, -2) . $this->_compile_wh("\x71\142\137\167\x68\145\x72\145"); goto XZ5Fx; aMuEJ: $cases = ''; goto WFXJ0; XZ5Fx: } public function set_update_batch($key, $index = '', $escape = NULL) { goto Ze_wg; xSXjF: is_bool($escape) or $escape = $this->_protect_identifiers; goto wIszb; Cv4Vw: if (!is_array($key)) { } goto xSXjF; wIszb: foreach ($key as $k => $v) { goto EvEXk; ROvzI: foreach ($v as $k2 => $v2) { if ($k2 === $index) { $index_set = TRUE; } $clean[$k2] = array("\x66\151\x65\154\x64" => $this->protect_identifiers($k2, FALSE, $escape), "\166\x61\154\x75\x65" => $escape === FALSE ? $v2 : $this->escape($v2)); } goto qbFpW; F1YS5: $this->qb_set_ub[] = $clean; goto wXGvW; EvEXk: $index_set = FALSE; goto PU5cm; PU5cm: $clean = array(); goto ROvzI; qbFpW: if ($index_set === FALSE) { return $this->display_error("\x64\x62\x5f\142\141\164\143\150\x5f\x6d\x69\x73\163\x69\x6e\x67\x5f\x69\156\x64\145\x78"); } goto F1YS5; wXGvW: } goto MLgEp; Ze_wg: $key = $this->_object_to_array_batch($key); goto Cv4Vw; MLgEp: return $this; goto IOjC3; IOjC3: } public function empty_table($table = '') { goto kOxmp; zJvm9: $sql = $this->_delete($table); goto iJ5PF; kOxmp: if ($table === '') { if (!isset($this->qb_from[0])) { return $this->db_debug ? $this->display_error("\144\142\137\155\x75\x73\x74\x5f\x73\x65\164\x5f\164\x61\142\x6c\145") : FALSE; } $table = $this->qb_from[0]; } else { $table = $this->protect_identifiers($table, TRUE, NULL, FALSE); } goto zJvm9; iJ5PF: $this->_reset_write(); goto Jky2D; Jky2D: return $this->query($sql); goto fHOCH; fHOCH: } public function truncate($table = '') { goto WZU8t; VshoS: return $this->query($sql); goto gEqIw; WZU8t: if ($table === '') { if (!isset($this->qb_from[0])) { return $this->db_debug ? $this->display_error("\144\142\x5f\155\x75\x73\164\x5f\163\x65\164\x5f\164\x61\142\154\x65") : FALSE; } $table = $this->qb_from[0]; } else { $table = $this->protect_identifiers($table, TRUE, NULL, FALSE); } goto DLSAB; DLSAB: $sql = $this->_truncate($table); goto IhuAr; IhuAr: $this->_reset_write(); goto VshoS; gEqIw: } protected function _truncate($table) { return "\124\x52\125\116\x43\x41\x54\x45\x20" . $table; } public function get_compiled_delete($table = '', $reset = TRUE) { goto WQWBI; kNZn3: $this->return_delete_sql = FALSE; goto yMNyA; yMNyA: return $sql; goto GtgpC; EYSxX: $sql = $this->delete($table, '', NULL, $reset); goto kNZn3; WQWBI: $this->return_delete_sql = TRUE; goto EYSxX; GtgpC: } public function delete($table = '', $where = '', $limit = NULL, $reset_data = TRUE) { goto DJBWg; wsVli: if (count($this->qb_where) === 0) { return $this->db_debug ? $this->display_error("\144\x62\137\x64\145\154\137\x6d\165\x73\x74\137\x75\163\145\137\167\150\145\x72\145") : FALSE; } goto a2XTG; NzXOO: if ($table === '') { if (!isset($this->qb_from[0])) { return $this->db_debug ? $this->display_error("\144\x62\137\x6d\165\x73\164\x5f\x73\x65\x74\137\164\x61\x62\x6c\x65") : FALSE; } $table = $this->qb_from[0]; } elseif (is_array($table)) { goto ryDfd; ryDfd: empty($where) && ($reset_data = FALSE); goto XTt8c; XTt8c: foreach ($table as $single_table) { $this->delete($single_table, $where, $limit, $reset_data); } goto fUaBl; fUaBl: return; goto VJjy_; VJjy_: } else { $table = $this->protect_identifiers($table, TRUE, NULL, FALSE); } goto D5rlQ; a2XTG: $sql = $this->_delete($table); goto MDltP; ImD7V: return $this->return_delete_sql === TRUE ? $sql : $this->query($sql); goto Y5gjn; DJBWg: $this->_merge_cache(); goto NzXOO; COXjx: if (!empty($limit)) { $this->limit($limit); } goto wsVli; D5rlQ: if ($where !== '') { $this->where($where); } goto COXjx; MDltP: if ($reset_data) { $this->_reset_write(); } goto ImD7V; Y5gjn: } protected function _delete($table) { return "\x44\x45\x4c\105\124\x45\x20\x46\x52\117\x4d\40" . $table . $this->_compile_wh("\161\x62\x5f\x77\150\x65\162\x65") . ($this->qb_limit !== FALSE ? "\x20\x4c\111\x4d\111\124\x20" . $this->qb_limit : ''); } public function dbprefix($table = '') { if ($table === '') { $this->display_error("\x64\142\137\164\x61\x62\x6c\145\x5f\x6e\141\155\145\137\x72\x65\161\165\151\x72\x65\144"); } return $this->dbprefix . $table; } public function set_dbprefix($prefix = '') { return $this->dbprefix = $prefix; } protected function _track_aliases($table) { goto NERrp; NERrp: if (is_array($table)) { foreach ($table as $t) { $this->_track_aliases($t); } return; } goto YvI2K; UgJPd: if (strpos($table, "\40") !== FALSE) { goto GdUjU; cw4fu: if (!in_array($table, $this->qb_aliased_tables, TRUE)) { $this->qb_aliased_tables[] = $table; if ($this->qb_caching === TRUE && !in_array($table, $this->qb_cache_aliased_tables, TRUE)) { $this->qb_cache_aliased_tables[] = $table; $this->qb_cache_exists[] = "\x61\154\x69\x61\x73\x65\144\x5f\x74\x61\142\x6c\x65\x73"; } } goto AthkW; PbXmJ: $table = trim(strrchr($table, "\x20")); goto cw4fu; GdUjU: $table = preg_replace("\57\x5c\163\53\x41\x53\134\x73\x2b\57\x69", "\40", $table); goto PbXmJ; AthkW: } goto QYDq1; YvI2K: if (strpos($table, "\x2c") !== FALSE) { return $this->_track_aliases(explode("\x2c", $table)); } goto UgJPd; QYDq1: } protected function _compile_select($select_override = FALSE) { goto TK_Jd; ttAV5: if (count($this->qb_join) > 0) { $sql .= "\12" . implode("\xa", $this->qb_join); } goto UIqmk; TK_Jd: $this->_merge_cache(); goto N2CIQ; UIqmk: $sql .= $this->_compile_wh("\x71\x62\x5f\x77\150\x65\x72\145") . $this->_compile_group_by() . $this->_compile_wh("\x71\x62\x5f\x68\x61\166\x69\156\147") . $this->_compile_order_by(); goto QEGZG; barez: if (count($this->qb_from) > 0) { $sql .= "\12\106\x52\117\115\x20" . $this->_from_tables(); } goto ttAV5; QEGZG: if ($this->qb_limit !== FALSE or $this->qb_offset) { return $this->_limit($sql . "\12"); } goto e3Uw4; e3Uw4: return $sql; goto gLLvb; N2CIQ: if ($select_override !== FALSE) { $sql = $select_override; } else { $sql = !$this->qb_distinct ? "\123\x45\114\x45\x43\124\40" : "\123\x45\114\x45\x43\x54\x20\x44\x49\123\x54\x49\116\x43\124\x20"; if (count($this->qb_select) === 0) { $sql .= "\x2a"; } else { foreach ($this->qb_select as $key => $val) { $no_escape = isset($this->qb_no_escape[$key]) ? $this->qb_no_escape[$key] : NULL; $this->qb_select[$key] = $this->protect_identifiers($val, FALSE, $no_escape); } $sql .= implode("\54\x20", $this->qb_select); } } goto barez; gLLvb: } protected function _compile_wh($qb_key) { if (count($this->{$qb_key}) > 0) { for ($i = 0, $c = count($this->{$qb_key}); $i < $c; $i++) { if (is_string($this->{$qb_key}[$i])) { continue; } elseif ($this->{$qb_key}[$i]["\145\163\143\141\160\145"] === FALSE) { $this->{$qb_key}[$i] = $this->{$qb_key}[$i]["\143\157\x6e\144\x69\x74\151\x6f\156"] . (isset($this->{$qb_key}[$i]["\166\141\x6c\x75\x65"]) ? "\x20" . $this->{$qb_key}[$i]["\166\x61\x6c\165\x65"] : ''); continue; } $conditions = preg_split("\x2f\50\50\77\72\136\174\x5c\163\x2b\51\x41\116\x44\x5c\x73\53\174\x28\77\72\x5e\174\134\163\x2b\51\117\x52\134\x73\x2b\51\57\x69", $this->{$qb_key}[$i]["\143\157\x6e\144\151\164\151\x6f\156"], -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY); for ($ci = 0, $cc = count($conditions); $ci < $cc; $ci++) { if (($op = $this->_get_operator($conditions[$ci])) === FALSE or !preg_match("\57\136\x28\134\x28\77\x29\50\56\52\x29\50" . preg_quote($op, "\x2f") . "\51\x5c\163\52\50\56\52\x28\x3f\x3c\x21\134\x29\x29\51\x3f\x28\134\51\x3f\51\x24\x2f\151", $conditions[$ci], $matches)) { continue; } if (!empty($matches[4])) { $this->_is_literal($matches[4]) or $matches[4] = $this->protect_identifiers(trim($matches[4])); $matches[4] = "\x20" . $matches[4]; } $conditions[$ci] = $matches[1] . $this->protect_identifiers(trim($matches[2])) . "\x20" . trim($matches[3]) . $matches[4] . $matches[5]; } $this->{$qb_key}[$i] = implode('', $conditions) . (isset($this->{$qb_key}[$i]["\x76\x61\x6c\165\x65"]) ? "\x20" . $this->{$qb_key}[$i]["\x76\141\x6c\x75\145"] : ''); } return ($qb_key === "\161\142\137\150\141\x76\x69\156\147" ? "\12\110\x41\126\111\116\x47\40" : "\xa\127\x48\x45\122\105\40") . implode("\xa", $this->{$qb_key}); } return ''; } protected function _compile_group_by() { if (count($this->qb_groupby) > 0) { for ($i = 0, $c = count($this->qb_groupby); $i < $c; $i++) { if (is_string($this->qb_groupby[$i])) { continue; } $this->qb_groupby[$i] = ($this->qb_groupby[$i]["\x65\x73\143\141\160\x65"] === FALSE or $this->_is_literal($this->qb_groupby[$i]["\x66\x69\x65\x6c\144"])) ? $this->qb_groupby[$i]["\146\x69\x65\x6c\x64"] : $this->protect_identifiers($this->qb_groupby[$i]["\146\x69\x65\154\144"]); } return "\12\x47\122\117\125\120\x20\x42\x59\x20" . implode("\54\40", $this->qb_groupby); } return ''; } protected function _compile_order_by() { goto IzvJk; RqTsv: return "\xa\x4f\x52\104\105\122\40\102\131\40" . implode("\x2c\x20", $this->qb_orderby); goto odeSR; oFhYM: for ($i = 0, $c = count($this->qb_orderby); $i < $c; $i++) { if (is_string($this->qb_orderby[$i])) { continue; } if ($this->qb_orderby[$i]["\145\x73\143\141\x70\x65"] !== FALSE && !$this->_is_literal($this->qb_orderby[$i]["\x66\151\x65\x6c\144"])) { $this->qb_orderby[$i]["\146\151\x65\154\144"] = $this->protect_identifiers($this->qb_orderby[$i]["\146\x69\x65\154\x64"]); } $this->qb_orderby[$i] = $this->qb_orderby[$i]["\146\151\x65\x6c\x64"] . $this->qb_orderby[$i]["\x64\151\x72\145\143\x74\x69\x6f\156"]; } goto RqTsv; IzvJk: if (empty($this->qb_orderby)) { return ''; } goto oFhYM; odeSR: } protected function _object_to_array($object) { goto uBIhe; TIYhO: foreach (get_object_vars($object) as $key => $val) { if (!is_object($val) && !is_array($val) && $key !== "\x5f\x70\x61\162\145\x6e\164\x5f\x6e\141\155\145") { $array[$key] = $val; } } goto HXHhF; gsimM: $array = array(); goto TIYhO; uBIhe: if (!is_object($object)) { return $object; } goto gsimM; HXHhF: return $array; goto gv_Ou; gv_Ou: } protected function _object_to_array_batch($object) { goto eDfHI; PKxL7: $fields = array_keys($out); goto sKR7I; UOR31: $array = array(); goto lpC_f; eDfHI: if (!is_object($object)) { return $object; } goto UOR31; sKR7I: foreach ($fields as $val) { if ($val !== "\x5f\x70\x61\x72\145\156\x74\x5f\x6e\x61\155\x65") { $i = 0; foreach ($out[$val] as $data) { $array[$i++][$val] = $data; } } } goto QwY4g; lpC_f: $out = get_object_vars($object); goto PKxL7; QwY4g: return $array; goto V3wGA; V3wGA: } public function start_cache() { $this->qb_caching = TRUE; return $this; } public function stop_cache() { $this->qb_caching = FALSE; return $this; } public function flush_cache() { $this->_reset_run(array("\161\x62\x5f\143\x61\143\x68\x65\137\x73\145\154\x65\x63\164" => array(), "\x71\142\137\143\141\143\x68\x65\x5f\x66\x72\157\155" => array(), "\x71\x62\137\143\141\143\150\145\137\x6a\157\151\x6e" => array(), "\x71\142\137\143\141\143\x68\145\137\167\150\x65\x72\145" => array(), "\x71\x62\137\143\x61\143\x68\145\137\147\x72\x6f\165\160\142\x79" => array(), "\x71\142\137\143\141\x63\x68\145\x5f\150\141\x76\x69\156\147" => array(), "\x71\142\x5f\x63\x61\143\150\x65\x5f\x6f\x72\x64\145\x72\x62\x79" => array(), "\x71\142\x5f\143\x61\x63\x68\145\x5f\x73\x65\x74" => array(), "\x71\142\137\x63\141\143\150\145\137\145\x78\x69\x73\x74\163" => array(), "\x71\x62\137\x63\141\x63\150\145\x5f\156\157\x5f\145\x73\x63\141\x70\x65" => array(), "\x71\x62\x5f\143\141\143\150\x65\137\141\154\151\141\x73\145\144\137\x74\x61\142\x6c\145\163" => array())); return $this; } protected function _merge_cache() { if (count($this->qb_cache_exists) === 0) { return; } elseif (in_array("\163\x65\x6c\145\x63\164", $this->qb_cache_exists, TRUE)) { $qb_no_escape = $this->qb_cache_no_escape; } foreach (array_unique($this->qb_cache_exists) as $val) { goto Xk3Bc; e5qba: for ($i = 0, $c = count($this->{$qb_variable}); $i < $c; $i++) { if (!in_array($this->{$qb_variable}[$i], $qb_new, TRUE)) { $qb_new[] = $this->{$qb_variable}[$i]; if ($val === "\163\145\154\145\143\164") { $qb_no_escape[] = $this->qb_no_escape[$i]; } } } goto EyAM5; MCQq3: $qb_new = $this->{$qb_cache_var}; goto e5qba; Xk3Bc: $qb_variable = "\161\142\x5f" . $val; goto Qqfly; G9cbM: if ($val === "\x73\x65\x6c\145\143\x74") { $this->qb_no_escape = $qb_no_escape; } goto iXGEp; EyAM5: $this->{$qb_variable} = $qb_new; goto G9cbM; Qqfly: $qb_cache_var = "\x71\x62\137\143\x61\x63\150\145\137" . $val; goto MCQq3; iXGEp: } } protected function _is_literal($str) { goto w3n0j; E6F3e: static $_str; goto APIaa; w3n0j: $str = trim($str); goto stxq5; APIaa: if (empty($_str)) { $_str = $this->_escape_char !== "\x22" ? array("\x22", "\47") : array("\x27"); } goto YyQhp; stxq5: if (empty($str) or ctype_digit($str) or (string) (float) $str === $str or in_array(strtoupper($str), array("\x54\x52\x55\105", "\106\101\114\x53\x45"), TRUE)) { return TRUE; } goto E6F3e; YyQhp: return in_array($str[0], $_str, TRUE); goto fALrT; fALrT: } public function reset_query() { goto wyGri; wyGri: $this->_reset_select(); goto MnRQ5; MnRQ5: $this->_reset_write(); goto cFvwf; cFvwf: return $this; goto m0U0P; m0U0P: } protected function _reset_run($qb_reset_items) { foreach ($qb_reset_items as $item => $default_value) { $this->{$item} = $default_value; } } protected function _reset_select() { $this->_reset_run(array("\x71\x62\x5f\163\145\154\x65\143\164" => array(), "\161\142\137\x66\162\x6f\155" => array(), "\161\x62\x5f\152\x6f\x69\x6e" => array(), "\x71\x62\x5f\167\150\145\162\145" => array(), "\x71\x62\137\147\x72\x6f\165\x70\142\171" => array(), "\x71\x62\137\x68\x61\x76\x69\156\x67" => array(), "\161\x62\137\x6f\x72\144\145\x72\x62\x79" => array(), "\x71\x62\x5f\x61\x6c\x69\x61\x73\145\144\137\164\141\x62\x6c\145\163" => array(), "\161\142\137\x6e\157\137\145\163\x63\141\160\145" => array(), "\x71\x62\137\144\151\163\x74\151\x6e\143\x74" => FALSE, "\161\x62\x5f\154\x69\155\x69\164" => FALSE, "\x71\142\x5f\157\x66\x66\x73\145\164" => FALSE)); } protected function _reset_write() { $this->_reset_run(array("\x71\x62\x5f\163\x65\x74" => array(), "\161\x62\x5f\163\x65\164\x5f\x75\142" => array(), "\x71\142\137\x66\x72\x6f\x6d" => array(), "\161\142\137\x6a\x6f\151\156" => array(), "\161\x62\137\x77\150\145\162\145" => array(), "\161\x62\137\157\x72\144\x65\162\x62\x79" => array(), "\161\x62\137\153\x65\x79\x73" => array(), "\161\x62\137\154\x69\x6d\x69\x74" => FALSE)); } }
