<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:16              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\102\x41\123\105\x50\101\x54\110") or exit("\116\157\x20\x64\x69\162\x65\x63\164\x20\x73\x63\x72\151\160\164\40\141\x63\143\x65\163\163\x20\141\x6c\x6c\x6f\x77\x65\x64"); class CI_DB_Cache { public $CI; public $db; public function __construct(&$db) { goto ZI4bs; kVoBd: $this->check_path(); goto rPJft; ZI4bs: $this->CI =& get_instance(); goto kL0uB; GYJJe: $this->CI->load->helper("\x66\151\x6c\145"); goto kVoBd; kL0uB: $this->db =& $db; goto GYJJe; rPJft: } public function check_path($path = '') { goto dmRN6; ydlkB: $this->db->cachedir = $path; goto z_vVH; qwGKS: if (!is_really_writable($path)) { log_message("\144\x65\142\165\x67", "\104\x42\x20\x63\x61\143\150\x65\40\x64\151\x72\40\156\157\x74\x20\x77\162\x69\x74\x61\x62\x6c\x65\72\x20" . $path); return $this->db->cache_off(); } goto ydlkB; R93tz: $path = realpath($path) ? rtrim(realpath($path), DIRECTORY_SEPARATOR) . DIRECTORY_SEPARATOR : rtrim($path, "\57") . "\57"; goto Ti7m1; Ti7m1: if (!is_dir($path)) { log_message("\x64\x65\142\x75\147", "\104\102\40\143\141\143\150\145\40\160\x61\x74\x68\x20\x65\162\162\157\162\x3a\x20" . $path); return $this->db->cache_off(); } goto qwGKS; z_vVH: return TRUE; goto G03Ub; dmRN6: if ($path === '') { if ($this->db->cachedir === '') { return $this->db->cache_off(); } $path = $this->db->cachedir; } goto R93tz; G03Ub: } public function read($sql) { goto vB2oB; RWijn: if (!is_file($filepath) or FALSE === ($cachedata = file_get_contents($filepath))) { return FALSE; } goto DK70j; jzZlb: $segment_two = $this->CI->uri->segment(2) == FALSE ? "\x69\x6e\144\x65\170" : $this->CI->uri->segment(2); goto qVgWm; qVgWm: $filepath = $this->db->cachedir . $segment_one . "\x2b" . $segment_two . "\57" . md5($sql); goto RWijn; vB2oB: $segment_one = $this->CI->uri->segment(1) == FALSE ? "\144\x65\x66\x61\x75\154\x74" : $this->CI->uri->segment(1); goto jzZlb; DK70j: return unserialize($cachedata); goto b8N0_; b8N0_: } public function write($sql, $object) { goto R8m76; bvWpT: $filename = md5($sql); goto ITX3Z; IWR6f: $dir_path = $this->db->cachedir . $segment_one . "\x2b" . $segment_two . "\x2f"; goto bvWpT; Yd_zi: chmod($dir_path . $filename, 0640); goto JIPhc; jo2o8: $segment_two = $this->CI->uri->segment(2) == FALSE ? "\x69\156\144\x65\x78" : $this->CI->uri->segment(2); goto IWR6f; R8m76: $segment_one = $this->CI->uri->segment(1) == FALSE ? "\x64\145\x66\x61\165\154\x74" : $this->CI->uri->segment(1); goto jo2o8; JIPhc: return TRUE; goto JNG43; KZE9D: if (write_file($dir_path . $filename, serialize($object)) === FALSE) { return FALSE; } goto Yd_zi; ITX3Z: if (!is_dir($dir_path) && !@mkdir($dir_path, 0750)) { return FALSE; } goto KZE9D; JNG43: } public function delete($segment_one = '', $segment_two = '') { goto eqM7E; aaB2O: if ($segment_two === '') { $segment_two = $this->CI->uri->segment(2) == FALSE ? "\151\156\x64\x65\170" : $this->CI->uri->segment(2); } goto e_1R_; e_1R_: $dir_path = $this->db->cachedir . $segment_one . "\x2b" . $segment_two . "\x2f"; goto Xfd9T; Xfd9T: delete_files($dir_path, TRUE); goto Aflgj; eqM7E: if ($segment_one === '') { $segment_one = $this->CI->uri->segment(1) == FALSE ? "\144\145\146\141\x75\x6c\164" : $this->CI->uri->segment(1); } goto aaB2O; Aflgj: } public function delete_all() { delete_files($this->db->cachedir, TRUE, TRUE); } }
