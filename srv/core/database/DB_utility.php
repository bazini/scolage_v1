<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.14  |
    |              on 2024-09-11 13:11:16              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*

*/
 defined("\102\x41\x53\105\120\x41\124\x48") or exit("\x4e\157\x20\144\151\162\x65\143\x74\40\x73\143\x72\x69\x70\164\40\x61\x63\143\x65\x73\x73\40\x61\x6c\x6c\157\167\x65\x64"); abstract class CI_DB_utility { protected $db; protected $_list_databases = FALSE; protected $_optimize_table = FALSE; protected $_repair_table = FALSE; public function __construct(&$db) { $this->db =& $db; log_message("\151\x6e\146\x6f", "\x44\x61\x74\x61\x62\141\x73\x65\40\125\164\151\x6c\151\164\171\40\103\x6c\141\163\163\40\x49\156\x69\164\151\141\154\x69\172\145\144"); } public function list_databases() { goto URujP; j1sXq: return $this->db->data_cache["\x64\142\137\x6e\x61\155\x65\x73"]; goto CHVI3; bzvRz: for ($i = 0, $query = $query->result_array(), $c = count($query); $i < $c; $i++) { $this->db->data_cache["\x64\142\x5f\156\x61\x6d\145\163"][] = current($query[$i]); } goto j1sXq; KkJBL: $query = $this->db->query($this->_list_databases); goto JKXZy; JKXZy: if ($query === FALSE) { return $this->db->data_cache["\144\142\x5f\156\141\x6d\x65\163"]; } goto bzvRz; URujP: if (isset($this->db->data_cache["\x64\x62\x5f\x6e\141\155\145\163"])) { return $this->db->data_cache["\144\x62\x5f\x6e\x61\155\145\163"]; } elseif ($this->_list_databases === FALSE) { return $this->db->db_debug ? $this->db->display_error("\x64\x62\137\x75\x6e\x73\165\x70\x70\157\162\164\x65\x64\137\x66\145\x61\x74\x75\x72\x65") : FALSE; } goto NQtEj; NQtEj: $this->db->data_cache["\x64\142\x5f\156\x61\155\145\x73"] = array(); goto KkJBL; CHVI3: } public function database_exists($database_name) { return in_array($database_name, $this->list_databases()); } public function optimize_table($table_name) { goto XxUwJ; A0QMY: if ($query !== FALSE) { $query = $query->result_array(); return current($query); } goto V63_n; V63_n: return FALSE; goto K55ob; ES9VK: $query = $this->db->query(sprintf($this->_optimize_table, $this->db->escape_identifiers($table_name))); goto A0QMY; XxUwJ: if ($this->_optimize_table === FALSE) { return $this->db->db_debug ? $this->db->display_error("\144\x62\x5f\165\156\x73\x75\160\160\x6f\162\164\x65\x64\x5f\x66\x65\x61\x74\x75\x72\145") : FALSE; } goto ES9VK; K55ob: } public function optimize_database() { goto qvM46; vS_6z: $result = array(); goto LhrPh; LhrPh: foreach ($this->db->list_tables() as $table_name) { goto lDyix; JU8tn: $res = current($res); goto TFITe; TFITe: $key = str_replace($this->db->database . "\56", '', current($res)); goto cBsai; t6yuB: unset($res[$keys[0]]); goto lofdb; lofdb: $result[$key] = $res; goto Y7iKb; cBsai: $keys = array_keys($res); goto t6yuB; lDyix: $res = $this->db->query(sprintf($this->_optimize_table, $this->db->escape_identifiers($table_name))); goto p0Rpf; uzYvB: $res = $res->result_array(); goto JU8tn; p0Rpf: if (is_bool($res)) { return $res; } goto uzYvB; Y7iKb: } goto Zx2z3; Zx2z3: return $result; goto Ywz0C; qvM46: if ($this->_optimize_table === FALSE) { return $this->db->db_debug ? $this->db->display_error("\x64\142\137\x75\156\163\x75\160\160\157\162\x74\145\x64\137\146\x65\141\x74\165\162\x65") : FALSE; } goto vS_6z; Ywz0C: } public function repair_table($table_name) { goto k0w4j; jQXow: if (is_bool($query)) { return $query; } goto IASWm; IASWm: $query = $query->result_array(); goto fNmfg; NU11G: $query = $this->db->query(sprintf($this->_repair_table, $this->db->escape_identifiers($table_name))); goto jQXow; fNmfg: return current($query); goto tWieQ; k0w4j: if ($this->_repair_table === FALSE) { return $this->db->db_debug ? $this->db->display_error("\x64\x62\137\165\156\163\165\160\x70\157\x72\164\x65\144\x5f\x66\145\141\x74\x75\x72\145") : FALSE; } goto NU11G; tWieQ: } public function csv_from_result($query, $delim = "\x2c", $newline = "\12", $enclosure = "\x22") { goto TXO0c; IK6Xz: $out = substr($out, 0, -strlen($delim)) . $newline; goto aWkOY; DCb5a: foreach ($query->list_fields() as $name) { $out .= $enclosure . str_replace($enclosure, $enclosure . $enclosure, $name) . $enclosure . $delim; } goto IK6Xz; aWkOY: while ($row = $query->unbuffered_row("\141\x72\162\141\x79")) { $line = array(); foreach ($row as $item) { $line[] = $enclosure . str_replace($enclosure, $enclosure . $enclosure, $item) . $enclosure; } $out .= implode($delim, $line) . $newline; } goto E1UMj; TXO0c: if (!is_object($query) or !method_exists($query, "\154\151\163\x74\137\146\151\x65\154\x64\x73")) { show_error("\x59\157\x75\40\155\165\x73\164\40\x73\165\142\155\151\164\40\x61\40\x76\x61\x6c\x69\x64\40\x72\x65\x73\x75\154\x74\40\157\142\152\x65\143\164"); } goto w3bHk; E1UMj: return $out; goto q9Z7j; w3bHk: $out = ''; goto DCb5a; q9Z7j: } public function xml_from_result($query, $params = array()) { goto kXaco; OSOSg: get_instance()->load->helper("\170\x6d\154"); goto HRDVM; kXaco: if (!is_object($query) or !method_exists($query, "\154\151\163\x74\x5f\x66\151\x65\x6c\x64\x73")) { show_error("\131\157\x75\x20\155\x75\x73\164\40\x73\x75\x62\x6d\x69\164\40\x61\x20\166\x61\x6c\151\x64\x20\162\x65\163\x75\x6c\x74\40\157\142\152\145\x63\x74"); } goto tMcB0; HRDVM: $xml = "\74" . $root . "\x3e" . $newline; goto FoqZ1; Jocde: return $xml . "\x3c\x2f" . $root . "\76" . $newline; goto lEFj6; tMcB0: foreach (array("\x72\157\x6f\164" => "\162\x6f\x6f\164", "\x65\x6c\145\x6d\145\156\x74" => "\x65\154\145\155\145\156\164", "\x6e\145\x77\x6c\x69\x6e\145" => "\12", "\164\141\142" => "\x9") as $key => $val) { if (!isset($params[$key])) { $params[$key] = $val; } } goto RwLxR; RwLxR: extract($params); goto OSOSg; FoqZ1: while ($row = $query->unbuffered_row()) { $xml .= $tab . "\74" . $element . "\x3e" . $newline; foreach ($row as $key => $val) { $xml .= $tab . $tab . "\74" . $key . "\76" . xml_convert($val) . "\74\57" . $key . "\76" . $newline; } $xml .= $tab . "\x3c\57" . $element . "\x3e" . $newline; } goto Jocde; lEFj6: } public function backup($params = array()) { goto EJF5M; QfYEf: if ($prefs["\146\157\x72\x6d\x61\164"] === "\172\x69\160") { goto LH8gJ; jzRpW: $CI->zip->add_data($prefs["\x66\x69\x6c\145\x6e\141\x6d\145"], $this->_backup($prefs)); goto hT0ns; RJ7l8: $CI =& get_instance(); goto j_vzo; hT0ns: return $CI->zip->get_zip(); goto vGI1B; j_vzo: $CI->load->library("\172\151\x70"); goto jzRpW; LH8gJ: if ($prefs["\x66\x69\x6c\x65\156\x61\x6d\x65"] === '') { $prefs["\x66\x69\x6c\x65\x6e\x61\155\145"] = (count($prefs["\x74\x61\x62\x6c\145\163"]) === 1 ? $prefs["\164\141\142\154\145\x73"] : $this->db->database) . date("\x59\x2d\155\x2d\144\137\x48\x2d\x69", time()) . "\56\x73\161\154"; } else { if (preg_match("\174\56\53\x3f\x5c\56\x7a\x69\x70\x24\174", $prefs["\x66\151\x6c\x65\156\141\x6d\x65"])) { $prefs["\146\x69\154\145\x6e\141\155\145"] = str_replace("\56\172\151\x70", '', $prefs["\146\x69\154\x65\156\141\155\145"]); } if (!preg_match("\x7c\x2e\x2b\x3f\x5c\x2e\x73\161\x6c\44\174", $prefs["\146\x69\154\145\x6e\x61\155\145"])) { $prefs["\x66\151\154\145\x6e\141\x6d\x65"] .= "\56\x73\161\154"; } } goto RJ7l8; vGI1B: } elseif ($prefs["\146\x6f\162\x6d\141\x74"] === "\164\170\164") { return $this->_backup($prefs); } elseif ($prefs["\x66\x6f\162\x6d\141\164"] === "\x67\172\x69\160") { return gzencode($this->_backup($prefs)); } goto rXLhq; EJF5M: if (is_string($params)) { $params = array("\164\x61\142\x6c\145\x73" => $params); } goto iAkNB; x5pnP: if ($prefs["\146\157\x72\x6d\141\x74"] === "\x67\x7a\151\x70" && !function_exists("\x67\x7a\x65\156\x63\157\x64\x65") or $prefs["\x66\x6f\x72\x6d\x61\x74"] === "\172\x69\160" && !function_exists("\147\172\x63\157\x6d\x70\162\x65\163\163")) { if ($this->db->db_debug) { return $this->db->display_error("\144\142\137\165\156\163\165\x70\160\x6f\x72\x74\145\x64\137\x63\157\155\160\x72\x65\x73\163\151\157\x6e"); } $prefs["\146\157\x72\x6d\x61\164"] = "\x74\x78\164"; } goto QfYEf; y4hkU: if (count($prefs["\164\141\142\x6c\145\x73"]) === 0) { $prefs["\164\141\142\x6c\x65\x73"] = $this->db->list_tables(); } goto mw02j; J84Pu: if (count($params) > 0) { foreach ($prefs as $key => $val) { if (isset($params[$key])) { $prefs[$key] = $params[$key]; } } } goto y4hkU; mw02j: if (!in_array($prefs["\146\x6f\162\x6d\x61\x74"], array("\147\172\151\160", "\x7a\x69\160", "\164\170\164"), TRUE)) { $prefs["\146\x6f\162\x6d\141\164"] = "\x74\170\164"; } goto x5pnP; rXLhq: return; goto HcW3B; iAkNB: $prefs = array("\x74\141\x62\x6c\145\163" => array(), "\x69\x67\x6e\x6f\162\x65" => array(), "\x66\151\x6c\x65\156\141\155\x65" => '', "\146\x6f\x72\x6d\141\x74" => "\x67\172\151\160", "\141\144\x64\x5f\144\x72\157\x70" => TRUE, "\x61\x64\144\x5f\x69\156\163\145\x72\x74" => TRUE, "\156\145\167\154\151\x6e\x65" => "\12", "\146\x6f\x72\145\151\147\156\x5f\x6b\x65\171\137\143\x68\x65\x63\153\x73" => TRUE); goto J84Pu; HcW3B: } }
